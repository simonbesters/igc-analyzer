(()=>{var t={56:(t,e,a)=>{"use strict";t.exports=function(t){var e=a.nc;e&&t.setAttribute("nonce",e)}},72:t=>{"use strict";var e=[];function a(t){for(var a=-1,i=0;i<e.length;i++)if(e[i].identifier===t){a=i;break}return a}function i(t,i){for(var n={},r=[],o=0;o<t.length;o++){var h=t[o],l=i.base?h[0]+i.base:h[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=a(u),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var m=s(p,i);i.byIndex=o,e.splice(o,0,{identifier:u,updater:m,references:1})}r.push(u)}return r}function s(t,e){var a=e.domAPI(e);return a.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;a.update(t=e)}else a.remove()}}t.exports=function(t,s){var n=i(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<n.length;r++){var o=a(n[r]);e[o].references--}for(var h=i(t,s),l=0;l<n.length;l++){var c=a(n[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}n=h}}},83:(t,e,a)=>{"use strict";a.d(e,{A:()=>o});var i=a(354),s=a.n(i),n=a(314),r=a.n(n)()(s());r.push([t.id,":root {\n    font-family: Avenir, Helvetica Neue, Segoe UI, Helvetica, arial, sans-serif;\n}\n\na {\n    color: black;\n}\n\n.pico-content {\n    line-height: 1.2;\n}\n\n#background-map {\n    background-color: white;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: -1;\n}\n\nblockquote {\n    margin: 1em 0;\n    font-style: italic;\n}\n\nblockquote cite {\n    font-style: normal;\n    vertical-align: super;\n    font-size: smaller;\n}\n\nblockquote cite a:not(:hover) {\n    text-decoration: none;\n}\n\nform {\n    width: 500px;\n}\n\n.form-row {\n    display: block;\n    width: 500px;\n    margin-top: 10px;\n}\n\n.form-row > label {\n    min-width: 150px;\n    display: inline-block;\n}\n\n.form-row > input, select, button {\n    width: 200px;\n    display: inline-block;\n    box-sizing: border-box;\n}\n\n.failures {\n    color: red;\n}\n\nul.failures {\n    max-height: 25vh;\n    overflow-y: auto;\n    border: 1px solid gray;\n    padding-top: 1em;\n    padding-bottom: 1em;\n}\n","",{version:3,sources:["webpack://./style.css"],names:[],mappings:"AAAA;IACI,2EAA2E;AAC/E;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,uBAAuB;IACvB,kBAAkB;IAClB,MAAM;IACN,QAAQ;IACR,SAAS;IACT,OAAO;IACP,WAAW;AACf;;AAEA;IACI,aAAa;IACb,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,qBAAqB;IACrB,kBAAkB;AACtB;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,cAAc;IACd,YAAY;IACZ,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;IAChB,qBAAqB;AACzB;;AAEA;IACI,YAAY;IACZ,qBAAqB;IACrB,sBAAsB;AAC1B;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,gBAAgB;IAChB,gBAAgB;IAChB,sBAAsB;IACtB,gBAAgB;IAChB,mBAAmB;AACvB",sourcesContent:[":root {\n    font-family: Avenir, Helvetica Neue, Segoe UI, Helvetica, arial, sans-serif;\n}\n\na {\n    color: black;\n}\n\n.pico-content {\n    line-height: 1.2;\n}\n\n#background-map {\n    background-color: white;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: -1;\n}\n\nblockquote {\n    margin: 1em 0;\n    font-style: italic;\n}\n\nblockquote cite {\n    font-style: normal;\n    vertical-align: super;\n    font-size: smaller;\n}\n\nblockquote cite a:not(:hover) {\n    text-decoration: none;\n}\n\nform {\n    width: 500px;\n}\n\n.form-row {\n    display: block;\n    width: 500px;\n    margin-top: 10px;\n}\n\n.form-row > label {\n    min-width: 150px;\n    display: inline-block;\n}\n\n.form-row > input, select, button {\n    width: 200px;\n    display: inline-block;\n    box-sizing: border-box;\n}\n\n.failures {\n    color: red;\n}\n\nul.failures {\n    max-height: 25vh;\n    overflow-y: auto;\n    border: 1px solid gray;\n    padding-top: 1em;\n    padding-bottom: 1em;\n}\n"],sourceRoot:""}]);const o=r},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},235:function(t,e,a){var i,s,n;s=[a(525)],void 0===(n="function"==typeof(i=function(t){"use strict";return t.TileLayer.Provider=t.TileLayer.extend({initialize:function(e,a){var i=t.TileLayer.Provider.providers,s=e.split("."),n=s[0],r=s[1];if(!i[n])throw"No such provider ("+n+")";var o={url:i[n].url,options:i[n].options};if(r&&"variants"in i[n]){if(!(r in i[n].variants))throw"No such variant of "+n+" ("+r+")";var h,l=i[n].variants[r];h="string"==typeof l?{variant:l}:l.options,o={url:l.url||o.url,options:t.Util.extend({},o.options,h)}}var c=function(t){return-1===t.indexOf("{attribution.")?t:t.replace(/\{attribution.(\w*)\}/g,function(t,e){return c(i[e].options.attribution)})};o.options.attribution=c(o.options.attribution);var u=t.Util.extend({},o.options,a);t.TileLayer.prototype.initialize.call(this,o.url,u)}}),t.TileLayer.Provider.providers={OpenStreetMap:{url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},variants:{Mapnik:{},DE:{url:"https://tile.openstreetmap.de/{z}/{x}/{y}.png",options:{maxZoom:18}},CH:{url:"https://tile.osm.ch/switzerland/{z}/{x}/{y}.png",options:{maxZoom:18,bounds:[[45,5],[48,11]]}},France:{url:"https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:"&copy; OpenStreetMap France | {attribution.OpenStreetMap}"}},HOT:{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}},BZH:{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a>',bounds:[[46.2,-5.5],[50,.7]]}}}},MapTilesAPI:{url:"https://maptiles.p.rapidapi.com/{variant}/{z}/{x}/{y}.png?rapidapi-key={apikey}",options:{attribution:'&copy; <a href="http://www.maptilesapi.com/">MapTiles API</a>, {attribution.OpenStreetMap}',variant:"en/map/v1",apikey:"<insert your api key here>",maxZoom:19},variants:{OSMEnglish:{options:{variant:"en/map/v1"}},OSMFrancais:{options:{variant:"fr/map/v1"}},OSMEspagnol:{options:{variant:"es/map/v1"}}}},OpenSeaMap:{url:"https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OPNVKarte:{url:"https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",options:{maxZoom:18,attribution:'Map <a href="https://memomaps.de/">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, map data {attribution.OpenStreetMap}'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Stadia:{url:"https://tiles.stadiamaps.com/tiles/{variant}/{z}/{x}/{y}{r}.{ext}",options:{minZoom:0,maxZoom:20,attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"alidade_smooth",ext:"png"},variants:{AlidadeSmooth:"alidade_smooth",AlidadeSmoothDark:"alidade_smooth_dark",OSMBright:"osm_bright",Outdoors:"outdoors",StamenToner:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_toner"}},StamenTonerBackground:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_toner_background"}},StamenTonerLines:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_toner_lines"}},StamenTonerLabels:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_toner_labels"}},StamenTonerLite:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_toner_lite"}},StamenWatercolor:{url:"https://tiles.stadiamaps.com/tiles/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_watercolor",ext:"jpg",minZoom:1,maxZoom:16}},StamenTerrain:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_terrain",minZoom:0,maxZoom:18}},StamenTerrainBackground:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_terrain_background",minZoom:0,maxZoom:18}},StamenTerrainLabels:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_terrain_labels",minZoom:0,maxZoom:18}},StamenTerrainLines:{options:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> {attribution.OpenStreetMap}',variant:"stamen_terrain_lines",minZoom:0,maxZoom:18}}}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}",options:{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',variant:"cycle",apikey:"<insert your api key here>",maxZoom:22},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport"}},TransportDark:{options:{variant:"transport-dark"}},SpinalMap:{options:{variant:"spinal-map"}},Landscape:"landscape",Outdoors:"outdoors",Pioneer:"pioneer",MobileAtlas:"mobile-atlas",Neighbourhood:"neighbourhood"}},CyclOSM:{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: {attribution.OpenStreetMap}'}},Jawg:{url:"https://{s}.tile.jawg.io/{variant}/{z}/{x}/{y}{r}.png?access-token={accessToken}",options:{attribution:'<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> {attribution.OpenStreetMap}',minZoom:0,maxZoom:22,subdomains:"abcd",variant:"jawg-terrain",accessToken:"<insert your access token here>"},variants:{Streets:"jawg-streets",Terrain:"jawg-terrain",Sunny:"jawg-sunny",Dark:"jawg-dark",Light:"jawg-light",Matrix:"jawg-matrix"}},MapBox:{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}{r}?access_token={accessToken}",options:{attribution:'&copy; <a href="https://www.mapbox.com/about/maps/" target="_blank">Mapbox</a> {attribution.OpenStreetMap} <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',tileSize:512,maxZoom:18,zoomOffset:-1,id:"mapbox/streets-v11",accessToken:"<insert your access token here>"}},MapTiler:{url:"https://api.maptiler.com/maps/{variant}/{z}/{x}/{y}{r}.{ext}?key={key}",options:{attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',variant:"streets",ext:"png",key:"<insert your MapTiler Cloud API key here>",tileSize:512,zoomOffset:-1,minZoom:0,maxZoom:21},variants:{Streets:"streets",Basic:"basic",Bright:"bright",Pastel:"pastel",Positron:"positron",Hybrid:{options:{variant:"hybrid",ext:"jpg"}},Toner:"toner",Topo:"topo",Voyager:"voyager"}},TomTom:{url:"https://{s}.api.tomtom.com/map/1/tile/{variant}/{style}/{z}/{x}/{y}.{ext}?key={apikey}",options:{variant:"basic",maxZoom:22,attribution:'<a href="https://tomtom.com" target="_blank">&copy;  1992 - '+(new Date).getFullYear()+" TomTom.</a> ",subdomains:"abcd",style:"main",ext:"png",apikey:"<insert your API key here>"},variants:{Basic:"basic",Hybrid:"hybrid",Labels:"labels"}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean/World_Ocean_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',apiKey:"<insert your api key here>",opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:"Map &copy; 1987-"+(new Date).getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalDayTraffic:{options:{variant:"normal.traffic.day",base:"traffic",type:"traffictile"}},normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},hybridDayTraffic:{options:{variant:"hybrid.traffic.day",base:"traffic",type:"traffictile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},HEREv3:{url:"https://{s}.{base}.maps.ls.hereapi.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?apiKey={apiKey}&lg={language}",options:{attribution:"Map &copy; 1987-"+(new Date).getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",apiKey:"<insert your apiKey here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},FreeMapSK:{url:"https://{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"abcd",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, visualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels",Voyager:"rastertiles/voyager",VoyagerNoLabels:"rastertiles/voyager_nolabels",VoyagerOnlyLabels:"rastertiles/voyager_only_labels",VoyagerLabelsUnder:"rastertiles/voyager_labels_under"}},HikeBike:{url:"https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://mapsneu.wien.gv.at/basemap/{variant}/{type}/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',type:"normal",format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:{options:{maxZoom:20,variant:"geolandbasemap"}},grau:"bmapgrau",overlay:"bmapoverlay",terrain:{options:{variant:"bmapgelaende",type:"grau",format:"jpeg"}},surface:{options:{variant:"bmapoberflaeche",type:"grau",format:"jpeg"}},highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{maxZoom:20,variant:"bmaporthofoto30cm",format:"jpeg"}}}},nlmaps:{url:"https://service.pdok.nl/brt/achtergrondkaart/wmts/v2_0/{variant}/EPSG:3857/{z}/{x}/{y}.png",options:{minZoom:6,maxZoom:19,bounds:[[50.5,3.25],[54,7.6]],attribution:'Kaartgegevens &copy; <a href="https://www.kadaster.nl">Kadaster</a>'},variants:{standaard:"standaard",pastel:"pastel",grijs:"grijs",water:"water",luchtfoto:{url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_ortho25/EPSG:3857/{z}/{x}/{y}.jpeg"}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_NDSI_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"}},JusticeMap:{url:"https://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png",options:{attribution:'<a href="http://www.justicemap.org/terms.php">Justice Map</a>',size:"county",bounds:[[14,-180],[72,-56]]},variants:{income:"income",americanIndian:"indian",asian:"asian",black:"black",hispanic:"hispanic",multi:"multi",nonWhite:"nonwhite",white:"white",plurality:"plural"}},GeoportailFrance:{url:"https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER={variant}&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",options:{attribution:'<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',bounds:[[-75,-180],[81,180]],minZoom:2,maxZoom:18,apikey:"choisirgeoportail",format:"image/png",style:"normal",variant:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"},variants:{plan:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",parcels:{options:{variant:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",style:"PCI vecteur",maxZoom:20}},orthos:{options:{maxZoom:19,format:"image/jpeg",variant:"ORTHOIMAGERY.ORTHOPHOTOS"}}}},OneMapSG:{url:"https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png",options:{variant:"Default",minZoom:11,maxZoom:18,bounds:[[1.56073,104.11475],[1.16,103.502]],attribution:'<img src="https://docs.onemap.sg/maps/images/oneMap64-01.png" style="height:20px;width:20px;"/> New OneMap | Map data &copy; contributors, <a href="http://SLA.gov.sg">Singapore Land Authority</a>'},variants:{Default:"Default",Night:"Night",Original:"Original",Grey:"Grey",LandLot:"LandLot"}},USGS:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'},variants:{USTopo:{},USImagery:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}"},USImageryTopo:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}"}}},WaymarkedTrails:{url:"https://tile.waymarkedtrails.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:18,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://waymarkedtrails.org">waymarkedtrails.org</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'},variants:{hiking:"hiking",cycling:"cycling",mtb:"mtb",slopes:"slopes",riding:"riding",skating:"skating"}},OpenAIP:{url:"https://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_basemap@EPSG%3A900913@png/{z}/{x}/{y}.{ext}",options:{attribution:'<a href="https://www.openaip.net/">openAIP Data</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-NC-SA</a>)',ext:"png",minZoom:4,maxZoom:14,tms:!0,detectRetina:!0,subdomains:"12"}},OpenSnowMap:{url:"https://tiles.opensnowmap.org/{variant}/{z}/{x}/{y}.png",options:{minZoom:9,maxZoom:18,attribution:'Map data: {attribution.OpenStreetMap} & ODbL, &copy; <a href="https://www.opensnowmap.org/iframes/data.html">www.opensnowmap.org</a> <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'},variants:{pistes:"pistes"}},AzureMaps:{url:"https://atlas.microsoft.com/map/tile?api-version={apiVersion}&tilesetId={variant}&x={x}&y={y}&zoom={z}&language={language}&subscription-key={subscriptionKey}",options:{attribution:"See https://docs.microsoft.com/en-us/rest/api/maps/render-v2/get-map-tile for details.",apiVersion:"2.0",variant:"microsoft.imagery",subscriptionKey:"<insert your subscription key here>",language:"en-US"},variants:{MicrosoftImagery:"microsoft.imagery",MicrosoftBaseDarkGrey:"microsoft.base.darkgrey",MicrosoftBaseRoad:"microsoft.base.road",MicrosoftBaseHybridRoad:"microsoft.base.hybrid.road",MicrosoftTerraMain:"microsoft.terra.main",MicrosoftWeatherInfraredMain:{url:"https://atlas.microsoft.com/map/tile?api-version={apiVersion}&tilesetId={variant}&x={x}&y={y}&zoom={z}&timeStamp={timeStamp}&language={language}&subscription-key={subscriptionKey}",options:{timeStamp:"2021-05-08T09:03:00Z",attribution:"See https://docs.microsoft.com/en-us/rest/api/maps/render-v2/get-map-tile#uri-parameters for details.",variant:"microsoft.weather.infrared.main"}},MicrosoftWeatherRadarMain:{url:"https://atlas.microsoft.com/map/tile?api-version={apiVersion}&tilesetId={variant}&x={x}&y={y}&zoom={z}&timeStamp={timeStamp}&language={language}&subscription-key={subscriptionKey}",options:{timeStamp:"2021-05-08T09:03:00Z",attribution:"See https://docs.microsoft.com/en-us/rest/api/maps/render-v2/get-map-tile#uri-parameters for details.",variant:"microsoft.weather.radar.main"}}}},SwissFederalGeoportal:{url:"https://wmts.geo.admin.ch/1.0.0/{variant}/default/current/3857/{z}/{x}/{y}.jpeg",options:{attribution:'&copy; <a href="https://www.swisstopo.admin.ch/">swisstopo</a>',minZoom:2,maxZoom:18,bounds:[[45.398181,5.140242],[48.230651,11.47757]]},variants:{NationalMapColor:"ch.swisstopo.pixelkarte-farbe",NationalMapGrey:"ch.swisstopo.pixelkarte-grau",SWISSIMAGE:{options:{variant:"ch.swisstopo.swissimage",maxZoom:19}}}}},t.tileLayer.provider=function(e,a){return new t.TileLayer.Provider(e,a)},t})?i.apply(e,s):i)||(t.exports=n)},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var a="",i=void 0!==e[5];return e[4]&&(a+="@supports (".concat(e[4],") {")),e[2]&&(a+="@media ".concat(e[2]," {")),i&&(a+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),a+=t(e),i&&(a+="}"),e[2]&&(a+="}"),e[4]&&(a+="}"),a}).join("")},e.i=function(t,a,i,s,n){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var h=this[o][0];null!=h&&(r[h]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);i&&r[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),a&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=a):c[2]=a),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),e.push(c))}},e}},335:function(t,e){var a;(function(){var i=function(t){return t instanceof i?t:this instanceof i?void(this.EXIFwrapped=t):new i(t)};t.exports&&(e=t.exports=i),e.EXIF=i;var s=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},r=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},o=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},h=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},l=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function c(t){return!!t.exifdata}function u(t,e){function a(a){var s=d(a);t.exifdata=s||{};var n=function(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;for(var a=2,i=t.byteLength,s=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};a<i;){if(s(e,a)){var n=e.getUint8(a+7);return n%2!=0&&(n+=1),0===n&&(n=4),m(t,a+8+n,e.getUint16(a+6+n))}a++}}(a);if(t.iptcdata=n||{},i.isXmpEnabled){var r=function(t){if("DOMParser"in self){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;for(var a=2,i=t.byteLength,s=new DOMParser;a<i-4;){if("http"==_(e,a,4)){var n=a-1,r=e.getUint16(a-2)-1,o=_(e,n,r),h=o.indexOf("xmpmeta>")+8,l=(o=o.substring(o.indexOf("<x:xmpmeta"),h)).indexOf("x:xmpmeta")+10;return o=o.slice(0,l)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+o.slice(l),b(s.parseFromString(o,"text/xml"))}a++}}}(a);t.xmpdata=r||{}}e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))a(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var a=atob(t),i=a.length,s=new ArrayBuffer(i),n=new Uint8Array(s),r=0;r<i;r++)n[r]=a.charCodeAt(r);return s}(t.src));else if(/^blob\:/i.test(t.src))(n=new FileReader).onload=function(t){a(t.target.result)},function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="blob",e.onload=function(t){var e;200!=this.status&&0!==this.status||(e=this.response,n.readAsArrayBuffer(e))},e.send()}(t.src);else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";a(s.response),s=null},s.open("GET",t.src,!0),s.responseType="arraybuffer",s.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var n;(n=new FileReader).onload=function(t){a(t.target.result)},n.readAsArrayBuffer(t)}}function d(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;for(var a=2,i=t.byteLength;a<i;){if(255!=e.getUint8(a))return!1;if(225==e.getUint8(a+1))return y(e,a+4,e.getUint16(a+2));a+=2+e.getUint16(a+2)}}var p={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function m(t,e,a){for(var i,s,n,r,o=new DataView(t),h={},l=e;l<e+a;)28===o.getUint8(l)&&2===o.getUint8(l+1)&&(r=o.getUint8(l+2))in p&&(n=o.getInt16(l+3),s=p[r],i=_(o,l+5,n),h.hasOwnProperty(s)?h[s]instanceof Array?h[s].push(i):h[s]=[h[s],i]:h[s]=i),l++;return h}function f(t,e,a,i,s){var n,r,o=t.getUint16(a,!s),h={};for(r=0;r<o;r++)n=a+12*r+2,h[i[t.getUint16(n,!s)]]=g(t,n,e,0,s);return h}function g(t,e,a,i,s){var n,r,o,h,l,c,u=t.getUint16(e+2,!s),d=t.getUint32(e+4,!s),p=t.getUint32(e+8,!s)+a;switch(u){case 1:case 7:if(1==d)return t.getUint8(e+8,!s);for(n=d>4?p:e+8,r=[],h=0;h<d;h++)r[h]=t.getUint8(n+h);return r;case 2:return _(t,n=d>4?p:e+8,d-1);case 3:if(1==d)return t.getUint16(e+8,!s);for(n=d>2?p:e+8,r=[],h=0;h<d;h++)r[h]=t.getUint16(n+2*h,!s);return r;case 4:if(1==d)return t.getUint32(e+8,!s);for(r=[],h=0;h<d;h++)r[h]=t.getUint32(p+4*h,!s);return r;case 5:if(1==d)return l=t.getUint32(p,!s),c=t.getUint32(p+4,!s),(o=new Number(l/c)).numerator=l,o.denominator=c,o;for(r=[],h=0;h<d;h++)l=t.getUint32(p+8*h,!s),c=t.getUint32(p+4+8*h,!s),r[h]=new Number(l/c),r[h].numerator=l,r[h].denominator=c;return r;case 9:if(1==d)return t.getInt32(e+8,!s);for(r=[],h=0;h<d;h++)r[h]=t.getInt32(p+4*h,!s);return r;case 10:if(1==d)return t.getInt32(p,!s)/t.getInt32(p+4,!s);for(r=[],h=0;h<d;h++)r[h]=t.getInt32(p+8*h,!s)/t.getInt32(p+4+8*h,!s);return r}}function _(t,e,a){var i="";for(n=e;n<e+a;n++)i+=String.fromCharCode(t.getUint8(n));return i}function y(t,e){if("Exif"!=_(t,e,4))return!1;var a,i,n,c,u,d=e+6;if(18761==t.getUint16(d))a=!1;else{if(19789!=t.getUint16(d))return!1;a=!0}if(42!=t.getUint16(d+2,!a))return!1;var p=t.getUint32(d+4,!a);if(p<8)return!1;if((i=f(t,d,d+p,r,a)).ExifIFDPointer)for(n in c=f(t,d,d+i.ExifIFDPointer,s,a)){switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":c[n]=l[n][c[n]];break;case"ExifVersion":case"FlashpixVersion":c[n]=String.fromCharCode(c[n][0],c[n][1],c[n][2],c[n][3]);break;case"ComponentsConfiguration":c[n]=l.Components[c[n][0]]+l.Components[c[n][1]]+l.Components[c[n][2]]+l.Components[c[n][3]]}i[n]=c[n]}if(i.GPSInfoIFDPointer)for(n in u=f(t,d,d+i.GPSInfoIFDPointer,o,a))"GPSVersionID"===n&&(u[n]=u[n][0]+"."+u[n][1]+"."+u[n][2]+"."+u[n][3]),i[n]=u[n];return i.thumbnail=function(t,e,a,i){var s=function(t,e,a){var i=t.getUint16(e,!a);return t.getUint32(e+2+12*i,!a)}(t,e+a,i);if(!s)return{};if(s>t.byteLength)return{};var n=f(t,e,e+s,h,i);if(n.Compression)switch(n.Compression){case 6:if(n.JpegIFOffset&&n.JpegIFByteCount){var r=e+n.JpegIFOffset,o=n.JpegIFByteCount;n.blob=new Blob([new Uint8Array(t.buffer,r,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",n.Compression)}else 2==n.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return n}(t,d,p,a),i}function w(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var a=0;a<t.attributes.length;a++){var i=t.attributes.item(a);e["@attributes"][i.nodeName]=i.nodeValue}}}else if(3==t.nodeType)return t.nodeValue;if(t.hasChildNodes())for(var s=0;s<t.childNodes.length;s++){var n=t.childNodes.item(s),r=n.nodeName;if(null==e[r])e[r]=w(n);else{if(null==e[r].push){var o=e[r];e[r]=[],e[r].push(o)}e[r].push(w(n))}}return e}function b(t){try{var e={};if(t.children.length>0)for(var a=0;a<t.children.length;a++){var i=t.children.item(a),s=i.attributes;for(var n in s){var r=s[n],o=r.nodeName,h=r.nodeValue;void 0!==o&&(e[o]=h)}var l=i.nodeName;if(void 0===e[l])e[l]=w(i);else{if(void 0===e[l].push){var c=e[l];e[l]=[],e[l].push(c)}e[l].push(w(i))}}else e=t.textContent;return e}catch(t){console.log(t.message)}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete||(c(t)?e&&e.call(t):u(t,e),0))},i.getTag=function(t,e){if(c(t))return t.exifdata[e]},i.getIptcTag=function(t,e){if(c(t))return t.iptcdata[e]},i.getAllTags=function(t){if(!c(t))return{};var e,a=t.exifdata,i={};for(e in a)a.hasOwnProperty(e)&&(i[e]=a[e]);return i},i.getAllIptcTags=function(t){if(!c(t))return{};var e,a=t.iptcdata,i={};for(e in a)a.hasOwnProperty(e)&&(i[e]=a[e]);return i},i.pretty=function(t){if(!c(t))return"";var e,a=t.exifdata,i="";for(e in a)a.hasOwnProperty(e)&&("object"==typeof a[e]?a[e]instanceof Number?i+=e+" : "+a[e]+" ["+a[e].numerator+"/"+a[e].denominator+"]\r\n":i+=e+" : ["+a[e].length+" values]\r\n":i+=e+" : "+a[e]+"\r\n");return i},i.readFromBinaryFile=function(t){return d(t)},void 0===(a=function(){return i}.apply(e,[]))||(t.exports=a)}).call(this)},354:t=>{"use strict";t.exports=function(t){var e=t[1],a=t[3];if(!a)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),n="/*# ".concat(s," */");return[e].concat([n]).join("\n")}return[e].join("\n")}},477:(t,e,a)=>{const i=a(790);t.exports=function(t){let e=1===t.length;t=t.toUpperCase();let a=i.filter(a=>a[e?"short":"long"]===t);return 0!==a.length?a[0].name:t}},486:function(t,e){!function(t){"use strict";var e=[].slice,a={};function i(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function s(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,i=t._tasks[e],s=i.length-1,r=i[s];i[s]=n(t,e),--t._waiting,++t._active,i=r.apply(null,i),t._tasks[e]&&(t._tasks[e]=i||a)}}(t)}catch(e){t._tasks[t._ended+t._active-1]&&r(t,e)}}function n(t,e){return function(a,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=a?r(t,a):(t._data[e]=i,t._waiting?s(t):o(t))))}}function r(t,e){var a,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((a=t._tasks[i])&&(t._tasks[i]=null,a.abort))try{a.abort()}catch(e){}t._active=NaN,o(t)}function o(t){!t._active&&t._call&&t._call(t._error,t._data)}function h(t){return new i(arguments.length?+t:1/0)}i.prototype=h.prototype={constructor:i,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var a=e.call(arguments,1);return a.push(t),++this._waiting,this._tasks.push(a),s(this),this},abort:function(){return null==this._error&&r(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,a){t.apply(null,[e].concat(a))},o(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,o(this),this}},t.version="2.0.3",t.queue=h}(e)},525:t=>{"use strict";t.exports=L},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},650:function(t,e){var a,i;!function(){"use strict";a=function(){function t(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType}function e(){var t=[];return{watch:t.push.bind(t),trigger:function(e,a){for(var i=!0,s={detail:a,preventDefault:function(){i=!1}},n=0;n<t.length;n++)t[n](e,s);return i}}}function a(t){return"none"===window.getComputedStyle(t).display}function i(t){this.elem=t}function s(t,e){return i.make(t("parent")).clazz("pico-overlay").clazz(t("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(t("overlayStyles",{opacity:.5,background:"#000"})).onClick(function(){t("overlayClose",!0)&&e()})}i.make=function(t,e){"string"==typeof t&&(t=document.querySelector(t));var a=document.createElement(e||"div");return(t||document.body).appendChild(a),new i(a)},i.prototype={child:function(t){return i.make(this.elem,t)},stylize:function(t){for(var e in void 0!==(t=t||{}).opacity&&(t.filter="alpha(opacity="+100*t.opacity+")"),t)t.hasOwnProperty(e)&&(this.elem.style[e]=t[e]);return this},clazz:function(t){return this.elem.className+=" "+t,this},html:function(e){return t(e)?this.elem.appendChild(e):this.elem.innerHTML=e,this},onClick:function(t){return this.elem.addEventListener("click",t),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(t,e){return void 0!==e&&this.elem.setAttribute(t,e),this},anyAncestor:function(t){for(var e=this.elem;e;){if(t(new i(e)))return!0;e=e.parentNode}return!1},isVisible:function(){return!a(this.elem)}};var n=1;function r(t,e){if(e("closeButton",!0))return t.child("button").html(e("closeHtml","&#xD7;")).clazz("pico-close").clazz(e("closeClass","")).stylize(e("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",e("close-label","Close"))}function o(t){return function(){return t().elem}}var h=e(),l=e();function c(t,e){function i(t,e){return(t.msMatchesSelector||t.webkitMatchesSelector||t.matches).call(t,e)}function s(t){return!(a(t)||i(t,":disabled")||t.hasAttribute("contenteditable"))&&(t.hasAttribute("tabindex")||i(t,"input,select,textarea,button,a[href],area[href],iframe"))}function n(t){for(var e=t.getElementsByTagName("*"),a=0;a<e.length;a++)if(s(e[a]))return e[a]}var r;t.beforeShow(function(){r=document.activeElement}),t.afterShow(function(){if(e()){var a=n(t.modalElem());a&&a.focus()}}),t.afterClose(function(){e()&&r&&r.focus(),r=null}),l.watch(function(a){if(e()&&t.isVisible()){var i=n(t.modalElem()),r=function(t){for(var e=t.getElementsByTagName("*"),a=e.length;a--;)if(s(e[a]))return e[a]}(t.modalElem());(a.shiftKey?i:r)===document.activeElement&&((a.shiftKey?r:i).focus(),a.preventDefault())}})}return document.documentElement.addEventListener("keydown",function(t){var e=t.which||t.keyCode;27===e?h.trigger():9===e&&l.trigger(t)}),function(a){("string"==typeof a||t(a))&&(a={content:a});var l=e(),u=e(),d=e(),p=e(),m=e();function f(t,e){var i=a[t];return"function"==typeof i&&(i=i(e)),void 0===i?e:i}var g,_,y=S.bind(window,"modal"),w=S.bind(window,"overlay"),b=S.bind(window,"close");function M(t){w().hide(),y().hide(),m.trigger(g,t)}function v(t){p.trigger(g,t)&&M(t)}function x(t){return function(){return t.apply(this,arguments),g}}function S(t,e){if(!_){var a=function(t,e){var a=t("width","auto");"number"==typeof a&&(a+="px");var s=t("modalId","pico-"+n++);return i.make(t("parent")).clazz("pico-content").clazz(t("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:a,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(t("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(t("content")).attr("id",s).attr("role","dialog").attr("aria-labelledby",t("ariaLabelledBy")).attr("aria-describedby",t("ariaDescribedBy",s)).onClick(function(t){new i(t.target).anyAncestor(function(t){return/\bpico-close\b/.test(t.elem.className)})&&e()})}(f,v);_={modal:a,overlay:s(f,v),close:r(a,f)},l.trigger(g,e)}return _[t]}return c(g={modalElem:o(y),closeElem:o(b),overlayElem:o(w),buildDom:x(S.bind(null,null)),isVisible:function(){return!!(_&&y&&y().isVisible())},show:function(t){return u.trigger(g,t)&&(w().show(),b(),y().show(),d.trigger(g,t)),this},close:x(v),forceClose:x(M),destroy:function(){y().destroy(),w().destroy(),w=y=b=void 0},options:function(t){Object.keys(t).map(function(e){a[e]=t[e]})},afterCreate:x(l.watch),beforeShow:x(u.watch),afterShow:x(d.watch),beforeClose:x(p.watch),afterClose:x(m.watch)},f.bind(null,"focus",!0)),function(t,e){var a,s=new i(document.body);t.beforeShow(function(){a=s.elem.style.overflow,e()&&s.stylize({overflow:"hidden"})}),t.afterClose(function(){s.stylize({overflow:a})})}(g,f.bind(null,"bodyOverflow",!0)),h.watch(function(){f("escCloses",!0)&&g.isVisible()&&g.close()}),g}},void 0===(i=a.apply(e,[]))||(t.exports=i)}()},659:t=>{"use strict";var e={};t.exports=function(t,a){var i=function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}e[t]=a}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(a)}},670:(t,e,a)=>{var i=a(486).queue,s=+new Date;t.exports=function(t,e){var a=!!L.mapbox,n=t.getSize(),r=new i(1),o=document.createElement("canvas");o.width=n.x,o.height=n.y;var h=o.getContext("2d"),l=document.createElement("canvas");l.width=1,l.height=1;var c=l.getContext("2d");if(c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,1,1),t.eachLayer(function(t){t instanceof L.TileLayer?r.defer(d,t):t._heat&&r.defer(p,t._canvas)}),t.eachLayer(function(t){L.esri&&t instanceof L.esri.DynamicMapLayer&&r.defer(f,t)}),t._pathRoot)r.defer(p,t._pathRoot);else if(t._panes){var u=t._panes.overlayPane.getElementsByTagName("canvas").item(0);u&&r.defer(p,u)}function d(e,s){var r=L.TileLayer.Canvas&&e instanceof L.TileLayer.Canvas,o=document.createElement("canvas");o.width=n.x,o.height=n.y;var h=o.getContext("2d"),c=t.getPixelBounds(),u=t.getZoom(),d=e.options.tileSize;if(u>e.options.maxZoom||u<e.options.minZoom||a&&e instanceof L.mapbox.tileLayer&&!e.options.tiles)return s();var p,m,f=L.bounds(c.min.divideBy(d)._floor(),c.max.divideBy(d)._floor()),_=[],y=new i(1);for(p=f.min.y;p<=f.max.y;p++)for(m=f.min.x;m<=f.max.x;m++)_.push(new L.Point(m,p));function w(t,e,a,i){i(null,{img:t,pos:e,size:a})}function b(t,a,i,s){var n=new Image;n.crossOrigin="",n.onload=function(){s(null,{img:this,pos:a,size:i})},n.onerror=function(t){""!=e.options.errorTileUrl&&void 0===t.target.errorCheck?(t.target.errorCheck=!0,t.target.src=e.options.errorTileUrl):s(null,{img:l,pos:a,size:i})},n.src=t}function M(t){h.drawImage(t.img,Math.floor(t.pos.x),Math.floor(t.pos.y),t.size,t.size)}_.forEach(function(t){var a=t.clone();e._adjustTilePoint&&e._adjustTilePoint(t);var i=a.scaleBy(new L.Point(d,d)).subtract(c.min);if(t.y>=0)if(r){var s=e._tiles[t.x+":"+t.y];y.defer(w,s,i,d)}else{var n=g(e.getTileUrl(t));y.defer(b,n,i,d)}}),y.awaitAll(function(t,e){e.forEach(M),s(null,{canvas:o})})}function p(e,a){var i=t.getPixelBounds(),s=t.getPixelOrigin(),r=document.createElement("canvas");r.width=n.x,r.height=n.y;var o=r.getContext("2d"),h=L.DomUtil.getPosition(e).subtract(i.min).add(s);try{o.drawImage(e,h.x,h.y,r.width-2*h.x,r.height-2*h.y),a(null,{canvas:r})}catch(t){console.error("Element could not be drawn on canvas",e)}}function m(e,a){var i=document.createElement("canvas"),s=i.getContext("2d"),r=t.getPixelBounds(),o=new L.Point(r.min.x,r.min.y),h=t.project(e.getLatLng()),l=/^data\:/.test(e._icon.src),c=l?e._icon.src:g(e._icon.src),u=new Image,d=e.options.icon.options,p=d.iconSize,m=h.subtract(o),f=L.point(d.iconAnchor||p&&p.divideBy(2,!0));p instanceof L.Point&&(p=[p.x,p.y]);var _=Math.round(m.x-p[0]+f.x),y=Math.round(m.y-f.y);i.width=n.x,i.height=n.y,u.crossOrigin="",u.onload=function(){s.drawImage(this,_,y,p[0],p[1]),a(null,{canvas:i})},u.src=c,l&&u.onload()}function f(t,e){var a=document.createElement("canvas");a.width=n.x,a.height=n.y;var i=a.getContext("2d"),s=new Image;s.crossOrigin="",s.src=g(t._currentImage._image.src),s.onload=function(){i.drawImage(s,0,0),e(null,{canvas:a})}}function g(t){return function(t){return!!t.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}(t)||-1!==t.indexOf("mapbox.com/styles/v1")?t:t+(t.match(/\?/)?"&":"?")+"cache="+s}t.eachLayer(function(t){t instanceof L.Marker&&t.options.icon instanceof L.Icon&&r.defer(m,t)}),r.awaitAll(function(t,a){if(t)throw t;a.forEach(function(t){t&&t.canvas&&h.drawImage(t.canvas,0,0)}),e(null,o)})}},790:t=>{"use strict";t.exports=JSON.parse('[{"name":"Aircotec","long":"ACT","short":"I"},{"name":"Cambridge Aero Instruments","long":"CAM","short":"C"},{"name":"ClearNav Instruments","long":"CNI","short":null},{"name":"Data Swan/DSX","long":"DSX","short":"D"},{"name":"EW Avionics","long":"EWA","short":"E"},{"name":"Filser","long":"FIL","short":"F"},{"name":"Flarm","long":"FLA","short":"G"},{"name":"Flytech","long":"FLY","short":null},{"name":"Garrecht","long":"GCS","short":"A"},{"name":"IMI Gliding Equipment","long":"IMI","short":"M"},{"name":"Logstream","long":"LGS","short":null},{"name":"LX Navigation","long":"LXN","short":"L"},{"name":"LXNAV","long":"LXV","short":"V"},{"name":"Naviter","long":"NAV","short":null},{"name":"New Technologies","long":"NTE","short":"N"},{"name":"Nielsen Kellerman","long":"NKL","short":"K"},{"name":"Peschges","long":"PES","short":"P"},{"name":"PressFinish Electronics","long":"PFE","short":null},{"name":"Print Technik","long":"PRT","short":"R"},{"name":"Scheffel","long":"SCH","short":"H"},{"name":"Streamline Data Instruments","long":"SDI","short":"S"},{"name":"Triadis Engineering GmbH","long":"TRI","short":"T"},{"name":"Zander","long":"ZAN","short":"Z"},{"name":"XCSoar","long":"XCS","short":null},{"name":"LK8000","long":"XLK","short":null},{"name":"GpsDump","long":"XGD","short":null},{"name":"SeeYou Recorder","long":"XCM","short":null},{"name":"Flyskyhy","long":"XFH","short":null},{"name":"XCTrack","long":"XCT","short":null},{"name":"Flymaster Live","long":"XFM","short":null},{"name":"XCTracer","long":"XTR","short":null},{"name":"SkyBean","long":"XSB","short":null},{"name":"leGPSBip","long":"XSD","short":null},{"name":"Logfly","long":"XLF","short":null},{"name":"Loctome","long":"XLM","short":null}]')},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(a){!function(t,e,a){var i="";a.supports&&(i+="@supports (".concat(a.supports,") {")),a.media&&(i+="@media ".concat(a.media," {"));var s=void 0!==a.layer;s&&(i+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),i+=a.css,s&&(i+="}"),a.media&&(i+="}"),a.supports&&(i+="}");var n=a.sourceMap;n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,a)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},962:(t,e,a)=>{"use strict";var i=a(477),s=/^A(\w{3})(\w{3,}?)(?:FLIGHT:(\d+)|\:(.+))?$/,n=/^HFDTE(?:DATE:)?(\d{2})(\d{2})(\d{2})(?:,?(\d{2}))?/,r=/^H(\w)PLT(?:.{0,}?:(.*)|(.*))$/,o=/^H(\w)CM2(?:.{0,}?:(.*)|(.*))$/,h=/^H(\w)GTY(?:.{0,}?:(.*)|(.*))$/,l=/^H(\w)GID(?:.{0,}?:(.*)|(.*))$/,c=/^H(\w)CID(?:.{0,}?:(.*)|(.*))$/,u=/^H(\w)CCL(?:.{0,}?:(.*)|(.*))$/,d=/^H(\w)SIT(?:.{0,}?:(.*)|(.*))$/,p=/^H(\w)FTY(?:.{0,}?:(.*)|(.*))$/,m=/^H(\w)RFW(?:.{0,}?:(.*)|(.*))$/,f=/^H(\w)RHW(?:.{0,}?:(.*)|(.*))$/,g=/^H(\w)TZN(?:.{0,}?:([-+]?[\d.]+))$/,_=/^H(\w)DTM(?:.{0,}?:(.*)|(.*))$/,y=/^H(\w)ALG(?:.{0,}?:(.*)|(.*))$/,w=/^H(\w)ALP(?:.{0,}?:(.*)|(.*))$/,b=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{3})([NS])(\d{3})(\d{2})(\d{3})([EW])([AV])(-\d{4}|\d{5})(-\d{4}|\d{5})/,M=/^K(\d{2})(\d{2})(\d{2})/,v=/^[IJ](\d{2})(?:\d{2}\d{2}[A-Z]{3})+/,x=/^[L]([A-Z]{3})(.+)/,S=/^C(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{4})([-\d]{2})(.*)/,E=/^C(\d{2})(\d{2})(\d{3})([NS])(\d{3})(\d{2})(\d{3})([EW])(.*)/,P=/^\d*$/,A=["F","O","P"],k=function(){function t(t){void 0===t&&(t={}),this._result={numFlight:null,pilot:null,copilot:null,gliderType:null,registration:null,callsign:null,competitionClass:null,loggerType:null,firmwareVersion:null,hardwareVersion:null,geoDatum:null,geoDatumAlgorithm:null,geoPressureAlgorithm:null,task:null,fixes:[],dataRecords:[],commentRecords:[],security:null,errors:[]},this.fixExtensions=[],this.dataExtensions=[],this.lineNumber=0,this.prevTimestamp=null,this.options=t}return t.parse=function(e,a){void 0===a&&(a={});for(var i=new t(a),s=[],n=0,r=e.split("\n");n<r.length;n++){var o=r[n];try{i.processLine(o.trim())}catch(t){if(!a.lenient)throw t;s.push(t)}}var h=i.result;return h.errors=s,h},Object.defineProperty(t.prototype,"result",{get:function(){if(!this._result.loggerManufacturer)throw new Error("Missing A record");if(!this._result.date)throw new Error("Missing HFDTE record");return this._result},enumerable:!1,configurable:!0}),t.prototype.processLine=function(t){this.lineNumber+=1;var e=t[0];if("B"===e){var a=this.parseBRecord(t);this.prevTimestamp=a.timestamp,this._result.fixes.push(a)}else if("K"===e){var i=this.parseKRecord(t);this.prevTimestamp=i.timestamp,this._result.dataRecords.push(i)}else if("H"===e)this.processHeader(t);else if("C"===e)this.processTaskLine(t);else if("A"===e){var s=this.parseARecord(t);this._result.loggerId=s.loggerId,this._result.loggerManufacturer=s.manufacturer,null!==s.numFlight&&(this._result.numFlight=s.numFlight)}else"I"===e?this.fixExtensions=this.parseIJRecord(t):"J"===e?this.dataExtensions=this.parseIJRecord(t):"L"===e&&this.options.parseComments?this._result.commentRecords.push(this.parseLRecord(t)):"G"===e&&(this._result.security=(this._result.security||"")+t.slice(1))},t.prototype.processHeader=function(t){var e=t.slice(2,5);if("DTE"===e){var a=this.parseDateHeader(t);this._result.date=a.date,null!==a.numFlight&&(this._result.numFlight=a.numFlight)}else"PLT"===e?this._result.pilot=this.parsePilot(t):"CM2"===e?this._result.copilot=this.parseCopilot(t):"GTY"===e?this._result.gliderType=this.parseGliderType(t):"GID"===e?this._result.registration=this.parseRegistration(t):"CID"===e?this._result.callsign=this.parseCallsign(t):"CCL"===e?this._result.competitionClass=this.parseCompetitionClass(t):"SIT"===e?this._result.site=this.parseSite(t):"TZN"===e?this._result.timezone=this.parseTimezone(t):"FTY"===e?this._result.loggerType=this.parseLoggerType(t):"RFW"===e?this._result.firmwareVersion=this.parseFirmwareVersion(t):"RHW"===e?this._result.hardwareVersion=this.parseHardwareVersion(t):"DTM"===e?this._result.geoDatum=this.parseGeoDatum(t):"ALG"===e?this._result.geoDatumAlgorithm=this.parseGeoDatumAlgorithm(t):"ALP"===e&&(this._result.geoPressureAlgorithm=this.parseGeoPressureAlgorithm(t))},t.prototype.parseARecord=function(t){var e=t.match(s);if(e)return{manufacturer:i(e[1]),loggerId:e[2],numFlight:e[3]?parseInt(e[3],10):null,additionalData:e[4]||null};if(e=t.match(/^A(\w{3})(.+)?$/))return{manufacturer:i(e[1]),loggerId:null,numFlight:null,additionalData:e[2]?e[2].trim():null};throw new Error("Invalid A record at line ".concat(this.lineNumber,": ").concat(t))},t.prototype.parseDateHeader=function(t){var e=t.match(n);if(!e)throw new Error("Invalid DTE header at line ".concat(this.lineNumber,": ").concat(t));var a="8"===e[3][0]||"9"===e[3][0];return{date:"".concat(a?"19":"20").concat(e[3],"-").concat(e[2],"-").concat(e[1]),numFlight:e[4]?parseInt(e[4],10):null}},t.prototype.parseTextHeader=function(t,e,a,i){void 0===i&&(i=" ");var s=a.match(e);if(!s)throw new Error("Invalid ".concat(t," header at line ").concat(this.lineNumber,": ").concat(a));var n=s[1];if(-1===A.indexOf(n)&&!this.options.lenient)throw new Error("Invalid data source at line ".concat(this.lineNumber,": ").concat(n));return(s[2]||s[3]||"").replace(/_/g,i).trim()},t.prototype.parsePilot=function(t){return this.parseTextHeader("PLT",r,t)},t.prototype.parseCopilot=function(t){return this.parseTextHeader("CM2",o,t)},t.prototype.parseGliderType=function(t){return this.parseTextHeader("GTY",h,t)},t.prototype.parseRegistration=function(t){return this.parseTextHeader("GID",l,t,"-")},t.prototype.parseCallsign=function(t){return this.parseTextHeader("GTY",c,t)},t.prototype.parseCompetitionClass=function(t){return this.parseTextHeader("GID",u,t)},t.prototype.parseSite=function(t){return this.parseTextHeader("SIT",d,t)},t.prototype.parseTimezone=function(t){var e=this.parseTextHeader("TZN",g,t),a=parseFloat(e);if(isNaN(a))throw new Error("Invalid TZN header at line ".concat(this.lineNumber,": ").concat(t));return a},t.prototype.parseLoggerType=function(t){return this.parseTextHeader("FTY",p,t)},t.prototype.parseFirmwareVersion=function(t){return this.parseTextHeader("RFW",m,t)},t.prototype.parseHardwareVersion=function(t){return this.parseTextHeader("RHW",f,t)},t.prototype.parseGeoDatum=function(t){return this.parseTextHeader("FDT",_,t)},t.prototype.parseGeoDatumAlgorithm=function(t){return this.parseTextHeader("ALG",y,t)},t.prototype.parseGeoPressureAlgorithm=function(t){return this.parseTextHeader("ALP",w,t)},t.prototype.processTaskLine=function(t){this._result.task?this._result.task.points.push(this.parseTaskPoint(t)):this._result.task=this.parseTask(t)},t.prototype.parseTask=function(t){var e=t.match(S);if(!e)throw new Error("Invalid task declaration at line ".concat(this.lineNumber,": ").concat(t));var a="8"===e[3][0]||"9"===e[3][0],i="".concat(a?"19":"20").concat(e[3],"-").concat(e[2],"-").concat(e[1]),s="".concat(e[4],":").concat(e[5],":").concat(e[6]),n=Date.parse("".concat(i,"T").concat(s,"Z")),r=null;return"00"===e[7]&&"00"===e[8]&&"00"===e[9]||(a="8"===e[9][0]||"9"===e[9][0],r="".concat(a?"19":"20").concat(e[9],"-").concat(e[8],"-").concat(e[7])),{declarationDate:i,declarationTime:s,declarationTimestamp:n,flightDate:r,taskNumber:"0000"!==e[10]?parseInt(e[10],10):null,numTurnpoints:parseInt(e[11],10),comment:e[12]||null,points:[]}},t.prototype.parseTaskPoint=function(e){var a=e.match(E);if(!a)throw new Error("Invalid task point declaration at line ".concat(this.lineNumber,": ").concat(e));return{latitude:t.parseLatitude(a[1],a[2],a[3],a[4]),longitude:t.parseLongitude(a[5],a[6],a[7],a[8]),name:a[9]||null}},t.prototype.parseBRecord=function(e){if(!this._result.date)throw new Error("Missing HFDTE record before first B record");var a=e.match(b);if(!a)throw new Error("Invalid B record at line ".concat(this.lineNumber,": ").concat(e));var i={};if(this.fixExtensions)for(var s=0,n=this.fixExtensions;s<n.length;s++){var r=n[s],o=r.code,h=r.start,l=r.length;i[o]=e.slice(h,h+l)}var c="".concat(a[1],":").concat(a[2],":").concat(a[3]),u=this.calcTimestamp(c),d=P.test(i.LAD)?i.LAD:"",p=t.parseLatitude(a[4],a[5],a[6]+d,a[7]);d=P.test(i.LOD)?i.LOD:"";var m=t.parseLongitude(a[8],a[9],a[10]+d,a[11]),f="A"===a[12],g="00000"===a[13]?null:parseInt(a[13],10),_="00000"===a[14]?null:parseInt(a[14],10),y=null;if(i.ENL){var w=this.fixExtensions.filter(function(t){return"ENL"===t.code})[0].length,M=Math.pow(10,w);y=parseInt(i.ENL,10)/M}return{timestamp:u,time:c,latitude:p,longitude:m,valid:f,pressureAltitude:g,gpsAltitude:_,extensions:i,enl:y,fixAccuracy:i.FXA?parseInt(i.FXA,10):null}},t.prototype.parseKRecord=function(t){if(!this._result.date)throw new Error("Missing HFDTE record before first K record");if(!this.dataExtensions)throw new Error("Missing J record before first K record");var e=t.match(M);if(!e)throw new Error("Invalid K record at line ".concat(this.lineNumber,": ").concat(t));var a="".concat(e[1],":").concat(e[2],":").concat(e[3]),i=this.calcTimestamp(a),s={};if(this.dataExtensions)for(var n=0,r=this.dataExtensions;n<r.length;n++){var o=r[n],h=o.code,l=o.start,c=o.length;s[h]=t.slice(l,l+c)}return{timestamp:i,time:a,extensions:s}},t.prototype.parseIJRecord=function(t){var e=t.match(v);if(!e)throw new Error("Invalid ".concat(t[0]," record at line ").concat(this.lineNumber,": ").concat(t));var a=parseInt(e[1],10);if(t.length<3+7*a)throw new Error("Invalid ".concat(t[0]," record at line ").concat(this.lineNumber,": ").concat(t));for(var i=new Array(a),s=0;s<a;s++){var n=3+7*s,r=parseInt(t.slice(n,n+2),10)-1,o=parseInt(t.slice(n+2,n+4),10)-1-r+1,h=t.slice(n+4,n+7);i[s]={start:r,length:o,code:h}}return i},t.prototype.parseLRecord=function(t){var e=t.match(x);if(!e)throw new Error("Invalid L record at line ".concat(this.lineNumber,": ").concat(t));return{code:e[1],message:e[2].trim()}},t.parseLatitude=function(t,e,a,i){var s=parseInt(t,10)+parseFloat("".concat(e,".").concat(a))/60;return"S"===i?-s:s},t.parseLongitude=function(t,e,a,i){var s=parseInt(t,10)+parseFloat("".concat(e,".").concat(a))/60;return"W"===i?-s:s},t.prototype.calcTimestamp=function(t){for(var e=Date.parse("".concat(this._result.date,"T").concat(t,"Z"));this.prevTimestamp&&e<this.prevTimestamp-36e5;)e+=864e5;return e},t}();t.exports=k}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={id:i,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.nc=void 0,(()=>{"use strict";var t=a(72),e=a.n(t),i=a(825),s=a.n(i),n=a(659),r=a.n(n),o=a(56),h=a.n(o),l=a(540),c=a.n(l),u=a(113),d=a.n(u),p=a(83),m={};m.styleTagTransform=d(),m.setAttributes=h(),m.insert=r().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=c(),e()(p.A,m),p.A&&p.A.locals&&p.A.locals;var f=a(670),g=a.n(f),_=(a(235),a(650)),y=a.n(_);function w(t){let e=t.length;for(;--e>=0;)t[e]=0}const b=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),M=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),v=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new Array(576);w(S);const E=new Array(60);w(E);const P=new Array(512);w(P);const A=new Array(256);w(A);const k=new Array(29);w(k);const G=new Array(30);function C(t,e,a,i,s){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=s,this.has_stree=t&&t.length}let I,T,N;function O(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}w(G);const R=t=>t<256?P[t]:P[256+(t>>>7)],D=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,D(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},B=(t,e,a)=>{z(t,a[2*e],a[2*e+1])},F=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},U=(t,e,a)=>{const i=new Array(16);let s,n,r=0;for(s=1;s<=15;s++)r=r+a[s-1]<<1,i[s]=r;for(n=0;n<=e;n++){let e=t[2*n+1];0!==e&&(t[2*n]=F(i[e]++,e))}},j=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},q=t=>{t.bi_valid>8?D(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Z=(t,e,a,i)=>{const s=2*e,n=2*a;return t[s]<t[n]||t[s]===t[n]&&i[e]<=i[a]},H=(t,e,a)=>{const i=t.heap[a];let s=a<<1;for(;s<=t.heap_len&&(s<t.heap_len&&Z(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Z(e,i,t.heap[s],t.depth));)t.heap[a]=t.heap[s],a=s,s<<=1;t.heap[a]=i},W=(t,e,a)=>{let i,s,n,r,o=0;if(0!==t.sym_next)do{i=255&t.pending_buf[t.sym_buf+o++],i+=(255&t.pending_buf[t.sym_buf+o++])<<8,s=t.pending_buf[t.sym_buf+o++],0===i?B(t,s,e):(n=A[s],B(t,n+256+1,e),r=b[n],0!==r&&(s-=k[n],z(t,s,r)),i--,n=R(i),B(t,n,a),r=M[n],0!==r&&(i-=G[n],z(t,i,r)))}while(o<t.sym_next);B(t,256,e)},V=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,n=e.stat_desc.elems;let r,o,h,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<n;r++)0!==a[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)h=t.heap[++t.heap_len]=l<2?++l:0,a[2*h]=1,t.depth[h]=0,t.opt_len--,s&&(t.static_len-=i[2*h+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)H(t,a,r);h=n;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*h]=a[2*r]+a[2*o],t.depth[h]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=h,t.heap[1]=h++,H(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,s=e.stat_desc.static_tree,n=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,h=e.stat_desc.max_length;let l,c,u,d,p,m,f=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(a[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)c=t.heap[l],d=a[2*a[2*c+1]+1]+1,d>h&&(d=h,f++),a[2*c+1]=d,c>i||(t.bl_count[d]++,p=0,c>=o&&(p=r[c-o]),m=a[2*c],t.opt_len+=m*(d+p),n&&(t.static_len+=m*(s[2*c+1]+p)));if(0!==f){do{for(d=h-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[h]--,f-=2}while(f>0);for(d=h;0!==d;d--)for(c=t.bl_count[d];0!==c;)u=t.heap[--l],u>i||(a[2*u+1]!==d&&(t.opt_len+=(d-a[2*u+1])*a[2*u],a[2*u+1]=d),c--)}})(t,e),U(a,l,t.bl_count)},X=(t,e,a)=>{let i,s,n=-1,r=e[1],o=0,h=7,l=4;for(0===r&&(h=138,l=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)s=r,r=e[2*(i+1)+1],++o<h&&s===r||(o<l?t.bl_tree[2*s]+=o:0!==s?(s!==n&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,n=s,0===r?(h=138,l=3):s===r?(h=6,l=3):(h=7,l=4))},K=(t,e,a)=>{let i,s,n=-1,r=e[1],o=0,h=7,l=4;for(0===r&&(h=138,l=3),i=0;i<=a;i++)if(s=r,r=e[2*(i+1)+1],!(++o<h&&s===r)){if(o<l)do{B(t,s,t.bl_tree)}while(0!==--o);else 0!==s?(s!==n&&(B(t,s,t.bl_tree),o--),B(t,16,t.bl_tree),z(t,o-3,2)):o<=10?(B(t,17,t.bl_tree),z(t,o-3,3)):(B(t,18,t.bl_tree),z(t,o-11,7));o=0,n=s,0===r?(h=138,l=3):s===r?(h=6,l=3):(h=7,l=4)}};let $=!1;const Y=(t,e,a,i)=>{z(t,0+(i?1:0),3),q(t),D(t,a),D(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var J={_tr_init:t=>{$||((()=>{let t,e,a,i,s;const n=new Array(16);for(a=0,i=0;i<28;i++)for(k[i]=a,t=0;t<1<<b[i];t++)A[a++]=i;for(A[a-1]=i,s=0,i=0;i<16;i++)for(G[i]=s,t=0;t<1<<M[i];t++)P[s++]=i;for(s>>=7;i<30;i++)for(G[i]=s<<7,t=0;t<1<<M[i]-7;t++)P[256+s++]=i;for(e=0;e<=15;e++)n[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,n[8]++;for(;t<=255;)S[2*t+1]=9,t++,n[9]++;for(;t<=279;)S[2*t+1]=7,t++,n[7]++;for(;t<=287;)S[2*t+1]=8,t++,n[8]++;for(U(S,287,n),t=0;t<30;t++)E[2*t+1]=5,E[2*t]=F(t,5);I=new C(S,b,257,286,15),T=new C(E,M,0,30,15),N=new C(new Array(0),v,0,19,7)})(),$=!0),t.l_desc=new O(t.dyn_ltree,I),t.d_desc=new O(t.dyn_dtree,T),t.bl_desc=new O(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,j(t)},_tr_stored_block:Y,_tr_flush_block:(t,e,a,i)=>{let s,n,r=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),V(t,t.l_desc),V(t,t.d_desc),r=(t=>{let e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),V(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*x[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,n=t.static_len+3+7>>>3,n<=s&&(s=n)):s=n=a+5,a+4<=s&&-1!==e?Y(t,e,a,i):4===t.strategy||n===s?(z(t,2+(i?1:0),3),W(t,S,E)):(z(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(z(t,e-257,5),z(t,a-1,5),z(t,i-4,4),s=0;s<i;s++)z(t,t.bl_tree[2*x[s]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,r+1),W(t,t.dyn_ltree,t.dyn_dtree)),j(t),i&&q(t)},_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(A[a]+256+1)]++,t.dyn_dtree[2*R(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{z(t,2,3),B(t,256,S),(t=>{16===t.bi_valid?(D(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},Q=(t,e,a,i)=>{let s=65535&t,n=t>>>16&65535,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{s=s+e[i++]|0,n=n+s|0}while(--r);s%=65521,n%=65521}return s|n<<16};const tt=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var et=(t,e,a,i)=>{const s=tt,n=i+a;t^=-1;for(let a=i;a<n;a++)t=t>>>8^s[255&(t^e[a])];return-1^t},at={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},it={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:st,_tr_stored_block:nt,_tr_flush_block:rt,_tr_tally:ot,_tr_align:ht}=J,{Z_NO_FLUSH:lt,Z_PARTIAL_FLUSH:ct,Z_FULL_FLUSH:ut,Z_FINISH:dt,Z_BLOCK:pt,Z_OK:mt,Z_STREAM_END:ft,Z_STREAM_ERROR:gt,Z_DATA_ERROR:_t,Z_BUF_ERROR:yt,Z_DEFAULT_COMPRESSION:wt,Z_FILTERED:bt,Z_HUFFMAN_ONLY:Mt,Z_RLE:vt,Z_FIXED:xt,Z_DEFAULT_STRATEGY:St,Z_UNKNOWN:Et,Z_DEFLATED:Pt}=it,At=258,kt=262,Gt=42,Ct=113,It=666,Tt=(t,e)=>(t.msg=at[e],e),Nt=t=>2*t-(t>4?9:0),Ot=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Lt=t=>{let e,a,i,s=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=s?a-s:0}while(--e);e=s,i=e;do{a=t.prev[--i],t.prev[i]=a>=s?a-s:0}while(--e)};let Rt=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const Dt=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=(t,e)=>{rt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Dt(t.strm)},Bt=(t,e)=>{t.pending_buf[t.pending++]=e},Ft=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Ut=(t,e,a,i)=>{let s=t.avail_in;return s>i&&(s=i),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),a),1===t.state.wrap?t.adler=Q(t.adler,e,s,a):2===t.state.wrap&&(t.adler=et(t.adler,e,s,a)),t.next_in+=s,t.total_in+=s,s)},jt=(t,e)=>{let a,i,s=t.max_chain_length,n=t.strstart,r=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-kt?t.strstart-(t.w_size-kt):0,l=t.window,c=t.w_mask,u=t.prev,d=t.strstart+At;let p=l[n+r-1],m=l[n+r];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,l[a+r]===m&&l[a+r-1]===p&&l[a]===l[n]&&l[++a]===l[n+1]){n+=2,a++;do{}while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<d);if(i=At-(d-n),n=d-At,i>r){if(t.match_start=e,r=i,i>=o)break;p=l[n+r-1],m=l[n+r]}}}while((e=u[e&c])>h&&0!==--s);return r<=t.lookahead?r:t.lookahead},qt=t=>{const e=t.w_size;let a,i,s;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-kt)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Lt(t),i+=e),0===t.strm.avail_in)break;if(a=Ut(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Rt(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Rt(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<kt&&0!==t.strm.avail_in)},Zt=(t,e)=>{let a,i,s,n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>s&&(a=s),a<n&&(0===a&&e!==dt||e===lt||a!==i+t.strm.avail_in))break;r=e===dt&&a===i+t.strm.avail_in?1:0,nt(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,Dt(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(Ut(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==lt&&e!==dt&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(Ut(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,n=s>t.w_size?t.w_size:s,i=t.strstart-t.block_start,(i>=n||(i||e===dt)&&e!==lt&&0===t.strm.avail_in&&i<=s)&&(a=i>s?s:i,r=e===dt&&0===t.strm.avail_in&&a===i?1:0,nt(t,t.block_start,a,r),t.block_start+=a,Dt(t.strm)),r?3:1)},Ht=(t,e)=>{let a,i;for(;;){if(t.lookahead<kt){if(qt(t),t.lookahead<kt&&e===lt)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Rt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-kt&&(t.match_length=jt(t,a)),t.match_length>=3)if(i=ot(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Rt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Rt(t,t.ins_h,t.window[t.strstart+1]);else i=ot(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===dt?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2},Wt=(t,e)=>{let a,i,s;for(;;){if(t.lookahead<kt){if(qt(t),t.lookahead<kt&&e===lt)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Rt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-kt&&(t.match_length=jt(t,a),t.match_length<=5&&(t.strategy===bt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,i=ot(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Rt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=ot(t,0,t.window[t.strstart-1]),i&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=ot(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===dt?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Vt(t,e,a,i,s){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=s}const Xt=[new Vt(0,0,0,0,Zt),new Vt(4,4,8,4,Ht),new Vt(4,5,16,8,Ht),new Vt(4,6,32,32,Ht),new Vt(4,4,16,16,Wt),new Vt(8,16,32,32,Wt),new Vt(8,16,128,128,Wt),new Vt(8,32,128,256,Wt),new Vt(32,128,258,1024,Wt),new Vt(32,258,258,4096,Wt)];function Kt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Pt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ot(this.dyn_ltree),Ot(this.dyn_dtree),Ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ot(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $t=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Gt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==Ct&&e.status!==It?1:0},Yt=t=>{if($t(t))return Tt(t,gt);t.total_in=t.total_out=0,t.data_type=Et;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Gt:Ct,t.adler=2===e.wrap?0:1,e.last_flush=-2,st(e),mt},Jt=t=>{const e=Yt(t);var a;return e===mt&&((a=t.state).window_size=2*a.w_size,Ot(a.head),a.max_lazy_match=Xt[a.level].max_lazy,a.good_match=Xt[a.level].good_length,a.nice_match=Xt[a.level].nice_length,a.max_chain_length=Xt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Qt=(t,e,a,i,s,n)=>{if(!t)return gt;let r=1;if(e===wt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),s<1||s>9||a!==Pt||i<8||i>15||e<0||e>9||n<0||n>xt||8===i&&1!==r)return Tt(t,gt);8===i&&(i=9);const o=new Kt;return t.state=o,o.strm=t,o.status=Gt,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=n,o.method=a,Jt(t)};var te=Qt,ee=(t,e)=>$t(t)||2!==t.state.wrap?gt:(t.state.gzhead=e,mt),ae=(t,e)=>{if($t(t)||e>pt||e<0)return t?Tt(t,gt):gt;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||a.status===It&&e!==dt)return Tt(t,0===t.avail_out?yt:gt);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(Dt(t),0===t.avail_out)return a.last_flush=-1,mt}else if(0===t.avail_in&&Nt(e)<=Nt(i)&&e!==dt)return Tt(t,yt);if(a.status===It&&0!==t.avail_in)return Tt(t,yt);if(a.status===Gt&&0===a.wrap&&(a.status=Ct),a.status===Gt){let e=Pt+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=Mt||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,Ft(a,e),0!==a.strstart&&(Ft(a,t.adler>>>16),Ft(a,65535&t.adler)),t.adler=1,a.status=Ct,Dt(t),0!==a.pending)return a.last_flush=-1,mt}if(57===a.status)if(t.adler=0,Bt(a,31),Bt(a,139),Bt(a,8),a.gzhead)Bt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),Bt(a,255&a.gzhead.time),Bt(a,a.gzhead.time>>8&255),Bt(a,a.gzhead.time>>16&255),Bt(a,a.gzhead.time>>24&255),Bt(a,9===a.level?2:a.strategy>=Mt||a.level<2?4:0),Bt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(Bt(a,255&a.gzhead.extra.length),Bt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=et(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(Bt(a,0),Bt(a,0),Bt(a,0),Bt(a,0),Bt(a,0),Bt(a,9===a.level?2:a.strategy>=Mt||a.level<2?4:0),Bt(a,3),a.status=Ct,Dt(t),0!==a.pending)return a.last_flush=-1,mt;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let s=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+s),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=et(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=s,Dt(t),0!==a.pending)return a.last_flush=-1,mt;e=0,i-=s}let s=new Uint8Array(a.gzhead.extra);a.pending_buf.set(s.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=et(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=et(t.adler,a.pending_buf,a.pending-i,i)),Dt(t),0!==a.pending)return a.last_flush=-1,mt;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,Bt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=et(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=et(t.adler,a.pending_buf,a.pending-i,i)),Dt(t),0!==a.pending)return a.last_flush=-1,mt;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,Bt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=et(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(Dt(t),0!==a.pending))return a.last_flush=-1,mt;Bt(a,255&t.adler),Bt(a,t.adler>>8&255),t.adler=0}if(a.status=Ct,Dt(t),0!==a.pending)return a.last_flush=-1,mt}if(0!==t.avail_in||0!==a.lookahead||e!==lt&&a.status!==It){let i=0===a.level?Zt(a,e):a.strategy===Mt?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(qt(t),0===t.lookahead)){if(e===lt)return 1;break}if(t.match_length=0,a=ot(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===dt?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===vt?((t,e)=>{let a,i,s,n;const r=t.window;for(;;){if(t.lookahead<=At){if(qt(t),t.lookahead<=At&&e===lt)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,i=r[s],i===r[++s]&&i===r[++s]&&i===r[++s])){n=t.strstart+At;do{}while(i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&i===r[++s]&&s<n);t.match_length=At-(n-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=ot(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=ot(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===dt?(zt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(zt(t,!1),0===t.strm.avail_out)?1:2})(a,e):Xt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=It),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),mt;if(2===i&&(e===ct?ht(a):e!==pt&&(nt(a,0,0,!1),e===ut&&(Ot(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),Dt(t),0===t.avail_out))return a.last_flush=-1,mt}return e!==dt?mt:a.wrap<=0?ft:(2===a.wrap?(Bt(a,255&t.adler),Bt(a,t.adler>>8&255),Bt(a,t.adler>>16&255),Bt(a,t.adler>>24&255),Bt(a,255&t.total_in),Bt(a,t.total_in>>8&255),Bt(a,t.total_in>>16&255),Bt(a,t.total_in>>24&255)):(Ft(a,t.adler>>>16),Ft(a,65535&t.adler)),Dt(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?mt:ft)},ie=t=>{if($t(t))return gt;const e=t.state.status;return t.state=null,e===Ct?Tt(t,_t):mt},se=(t,e)=>{let a=e.length;if($t(t))return gt;const i=t.state,s=i.wrap;if(2===s||1===s&&i.status!==Gt||i.lookahead)return gt;if(1===s&&(t.adler=Q(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===s&&(Ot(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const n=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,qt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=Rt(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,qt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=n,i.wrap=s,mt};const ne=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var re=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)ne(a,e)&&(t[e]=a[e])}}return t},oe=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,s=t.length;e<s;e++){let s=t[e];a.set(s,i),i+=s.length}return a};let he=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){he=!1}const le=new Uint8Array(256);for(let t=0;t<256;t++)le[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;le[254]=le[254]=1;var ce=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,s,n,r=t.length,o=0;for(s=0;s<r;s++)a=t.charCodeAt(s),55296==(64512&a)&&s+1<r&&(i=t.charCodeAt(s+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),s++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),n=0,s=0;n<o;s++)a=t.charCodeAt(s),55296==(64512&a)&&s+1<r&&(i=t.charCodeAt(s+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),s++)),a<128?e[n++]=a:a<2048?(e[n++]=192|a>>>6,e[n++]=128|63&a):a<65536?(e[n++]=224|a>>>12,e[n++]=128|a>>>6&63,e[n++]=128|63&a):(e[n++]=240|a>>>18,e[n++]=128|a>>>12&63,e[n++]=128|a>>>6&63,e[n++]=128|63&a);return e},ue=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,s;const n=new Array(2*a);for(s=0,i=0;i<a;){let e=t[i++];if(e<128){n[s++]=e;continue}let r=le[e];if(r>4)n[s++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?n[s++]=65533:e<65536?n[s++]=e:(e-=65536,n[s++]=55296|e>>10&1023,n[s++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&he)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(n,s)},de=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+le[t[a]]>e?a:e},pe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const me=Object.prototype.toString,{Z_NO_FLUSH:fe,Z_SYNC_FLUSH:ge,Z_FULL_FLUSH:_e,Z_FINISH:ye,Z_OK:we,Z_STREAM_END:be,Z_DEFAULT_COMPRESSION:Me,Z_DEFAULT_STRATEGY:ve,Z_DEFLATED:xe}=it;function Se(t){this.options=re({level:Me,method:xe,chunkSize:16384,windowBits:15,memLevel:8,strategy:ve},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pe,this.strm.avail_out=0;let a=te(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==we)throw new Error(at[a]);if(e.header&&ee(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ce(e.dictionary):"[object ArrayBuffer]"===me.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=se(this.strm,t),a!==we)throw new Error(at[a]);this._dict_set=!0}}function Ee(t,e){const a=new Se(e);if(a.push(t,!0),a.err)throw a.msg||at[a.err];return a.result}Se.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let s,n;if(this.ended)return!1;for(n=e===~~e?e:!0===e?ye:fe,"string"==typeof t?a.input=ce(t):"[object ArrayBuffer]"===me.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(n===ge||n===_e)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(s=ae(a,n),s===be)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),s=ie(this.strm),this.onEnd(s),this.ended=!0,s===we;if(0!==a.avail_out){if(n>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Se.prototype.onData=function(t){this.chunks.push(t)},Se.prototype.onEnd=function(t){t===we&&(this.result=oe(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Pe={Deflate:Se,deflate:Ee,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Ee(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Ee(t,e)},constants:it};const Ae=16209;var ke=function(t,e){let a,i,s,n,r,o,h,l,c,u,d,p,m,f,g,_,y,w,b,M,v,x,S,E;const P=t.state;a=t.next_in,S=t.input,i=a+(t.avail_in-5),s=t.next_out,E=t.output,n=s-(e-t.avail_out),r=s+(t.avail_out-257),o=P.dmax,h=P.wsize,l=P.whave,c=P.wnext,u=P.window,d=P.hold,p=P.bits,m=P.lencode,f=P.distcode,g=(1<<P.lenbits)-1,_=(1<<P.distbits)-1;t:do{p<15&&(d+=S[a++]<<p,p+=8,d+=S[a++]<<p,p+=8),y=m[d&g];e:for(;;){if(w=y>>>24,d>>>=w,p-=w,w=y>>>16&255,0===w)E[s++]=65535&y;else{if(!(16&w)){if(64&w){if(32&w){P.mode=16191;break t}t.msg="invalid literal/length code",P.mode=Ae;break t}y=m[(65535&y)+(d&(1<<w)-1)];continue e}for(b=65535&y,w&=15,w&&(p<w&&(d+=S[a++]<<p,p+=8),b+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=S[a++]<<p,p+=8,d+=S[a++]<<p,p+=8),y=f[d&_];;){if(w=y>>>24,d>>>=w,p-=w,w=y>>>16&255,16&w){if(M=65535&y,w&=15,p<w&&(d+=S[a++]<<p,p+=8,p<w&&(d+=S[a++]<<p,p+=8)),M+=d&(1<<w)-1,M>o){t.msg="invalid distance too far back",P.mode=Ae;break t}if(d>>>=w,p-=w,w=s-n,M>w){if(w=M-w,w>l&&P.sane){t.msg="invalid distance too far back",P.mode=Ae;break t}if(v=0,x=u,0===c){if(v+=h-w,w<b){b-=w;do{E[s++]=u[v++]}while(--w);v=s-M,x=E}}else if(c<w){if(v+=h+c-w,w-=c,w<b){b-=w;do{E[s++]=u[v++]}while(--w);if(v=0,c<b){w=c,b-=w;do{E[s++]=u[v++]}while(--w);v=s-M,x=E}}}else if(v+=c-w,w<b){b-=w;do{E[s++]=u[v++]}while(--w);v=s-M,x=E}for(;b>2;)E[s++]=x[v++],E[s++]=x[v++],E[s++]=x[v++],b-=3;b&&(E[s++]=x[v++],b>1&&(E[s++]=x[v++]))}else{v=s-M;do{E[s++]=E[v++],E[s++]=E[v++],E[s++]=E[v++],b-=3}while(b>2);b&&(E[s++]=E[v++],b>1&&(E[s++]=E[v++]))}break}if(64&w){t.msg="invalid distance code",P.mode=Ae;break t}y=f[(65535&y)+(d&(1<<w)-1)]}}break}}while(a<i&&s<r);b=p>>3,a-=b,p-=b<<3,d&=(1<<p)-1,t.next_in=a,t.next_out=s,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=s<r?r-s+257:257-(s-r),P.hold=d,P.bits=p};const Ge=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ie=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Te=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ne=(t,e,a,i,s,n,r,o)=>{const h=o.bits;let l,c,u,d,p,m,f=0,g=0,_=0,y=0,w=0,b=0,M=0,v=0,x=0,S=0,E=null;const P=new Uint16Array(16),A=new Uint16Array(16);let k,G,C,I=null;for(f=0;f<=15;f++)P[f]=0;for(g=0;g<i;g++)P[e[a+g]]++;for(w=h,y=15;y>=1&&0===P[y];y--);if(w>y&&(w=y),0===y)return s[n++]=20971520,s[n++]=20971520,o.bits=1,0;for(_=1;_<y&&0===P[_];_++);for(w<_&&(w=_),v=1,f=1;f<=15;f++)if(v<<=1,v-=P[f],v<0)return-1;if(v>0&&(0===t||1!==y))return-1;for(A[1]=0,f=1;f<15;f++)A[f+1]=A[f]+P[f];for(g=0;g<i;g++)0!==e[a+g]&&(r[A[e[a+g]]++]=g);if(0===t?(E=I=r,m=20):1===t?(E=Ge,I=Ce,m=257):(E=Ie,I=Te,m=0),S=0,g=0,f=_,p=n,b=w,M=0,u=-1,x=1<<w,d=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){k=f-M,r[g]+1<m?(G=0,C=r[g]):r[g]>=m?(G=I[r[g]-m],C=E[r[g]-m]):(G=96,C=0),l=1<<f-M,c=1<<b,_=c;do{c-=l,s[p+(S>>M)+c]=k<<24|G<<16|C}while(0!==c);for(l=1<<f-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,g++,0===--P[f]){if(f===y)break;f=e[a+r[g]]}if(f>w&&(S&d)!==u){for(0===M&&(M=w),p+=_,b=f-M,v=1<<b;b+M<y&&(v-=P[b+M],!(v<=0));)b++,v<<=1;if(x+=1<<b,1===t&&x>852||2===t&&x>592)return 1;u=S&d,s[u]=w<<24|b<<16|p-n}}return 0!==S&&(s[p+S]=f-M<<24|64<<16),o.bits=w,0};const{Z_FINISH:Oe,Z_BLOCK:Le,Z_TREES:Re,Z_OK:De,Z_STREAM_END:ze,Z_NEED_DICT:Be,Z_STREAM_ERROR:Fe,Z_DATA_ERROR:Ue,Z_MEM_ERROR:je,Z_BUF_ERROR:qe,Z_DEFLATED:Ze}=it,He=16180,We=16190,Ve=16191,Xe=16192,Ke=16194,$e=16199,Ye=16200,Je=16206,Qe=16209,ta=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ea(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const aa=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<He||e.mode>16211?1:0},ia=t=>{if(aa(t))return Fe;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=He,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,De},sa=t=>{if(aa(t))return Fe;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ia(t)},na=(t,e)=>{let a;if(aa(t))return Fe;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Fe:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,sa(t))},ra=(t,e)=>{if(!t)return Fe;const a=new ea;t.state=a,a.strm=t,a.window=null,a.mode=He;const i=na(t,e);return i!==De&&(t.state=null),i};let oa,ha,la=!0;const ca=t=>{if(la){oa=new Int32Array(512),ha=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ne(1,t.lens,0,288,oa,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ne(2,t.lens,0,32,ha,0,t.work,{bits:5}),la=!1}t.lencode=oa,t.lenbits=9,t.distcode=ha,t.distbits=5},ua=(t,e,a,i)=>{let s;const n=t.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Uint8Array(n.wsize)),i>=n.wsize?(n.window.set(e.subarray(a-n.wsize,a),0),n.wnext=0,n.whave=n.wsize):(s=n.wsize-n.wnext,s>i&&(s=i),n.window.set(e.subarray(a-i,a-i+s),n.wnext),(i-=s)?(n.window.set(e.subarray(a-i,a),0),n.wnext=i,n.whave=n.wsize):(n.wnext+=s,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=s))),0};var da=sa,pa=ra,ma=(t,e)=>{let a,i,s,n,r,o,h,l,c,u,d,p,m,f,g,_,y,w,b,M,v,x,S=0;const E=new Uint8Array(4);let P,A;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(aa(t)||!t.output||!t.input&&0!==t.avail_in)return Fe;a=t.state,a.mode===Ve&&(a.mode=Xe),r=t.next_out,s=t.output,h=t.avail_out,n=t.next_in,i=t.input,o=t.avail_in,l=a.hold,c=a.bits,u=o,d=h,x=De;t:for(;;)switch(a.mode){case He:if(0===a.wrap){a.mode=Xe;break}for(;c<16;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(2&a.wrap&&35615===l){0===a.wbits&&(a.wbits=15),a.check=0,E[0]=255&l,E[1]=l>>>8&255,a.check=et(a.check,E,2,0),l=0,c=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",a.mode=Qe;break}if((15&l)!==Ze){t.msg="unknown compression method",a.mode=Qe;break}if(l>>>=4,c-=4,v=8+(15&l),0===a.wbits&&(a.wbits=v),v>15||v>a.wbits){t.msg="invalid window size",a.mode=Qe;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&l?16189:Ve,l=0,c=0;break;case 16181:for(;c<16;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(a.flags=l,(255&a.flags)!==Ze){t.msg="unknown compression method",a.mode=Qe;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=Qe;break}a.head&&(a.head.text=l>>8&1),512&a.flags&&4&a.wrap&&(E[0]=255&l,E[1]=l>>>8&255,a.check=et(a.check,E,2,0)),l=0,c=0,a.mode=16182;case 16182:for(;c<32;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}a.head&&(a.head.time=l),512&a.flags&&4&a.wrap&&(E[0]=255&l,E[1]=l>>>8&255,E[2]=l>>>16&255,E[3]=l>>>24&255,a.check=et(a.check,E,4,0)),l=0,c=0,a.mode=16183;case 16183:for(;c<16;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}a.head&&(a.head.xflags=255&l,a.head.os=l>>8),512&a.flags&&4&a.wrap&&(E[0]=255&l,E[1]=l>>>8&255,a.check=et(a.check,E,2,0)),l=0,c=0,a.mode=16184;case 16184:if(1024&a.flags){for(;c<16;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}a.length=l,a.head&&(a.head.extra_len=l),512&a.flags&&4&a.wrap&&(E[0]=255&l,E[1]=l>>>8&255,a.check=et(a.check,E,2,0)),l=0,c=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(p=a.length,p>o&&(p=o),p&&(a.head&&(v=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(n,n+p),v)),512&a.flags&&4&a.wrap&&(a.check=et(a.check,i,p,n)),o-=p,n+=p,a.length-=p),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;p=0;do{v=i[n+p++],a.head&&v&&a.length<65536&&(a.head.name+=String.fromCharCode(v))}while(v&&p<o);if(512&a.flags&&4&a.wrap&&(a.check=et(a.check,i,p,n)),o-=p,n+=p,v)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;p=0;do{v=i[n+p++],a.head&&v&&a.length<65536&&(a.head.comment+=String.fromCharCode(v))}while(v&&p<o);if(512&a.flags&&4&a.wrap&&(a.check=et(a.check,i,p,n)),o-=p,n+=p,v)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;c<16;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(4&a.wrap&&l!==(65535&a.check)){t.msg="header crc mismatch",a.mode=Qe;break}l=0,c=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=Ve;break;case 16189:for(;c<32;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}t.adler=a.check=ta(l),l=0,c=0,a.mode=We;case We:if(0===a.havedict)return t.next_out=r,t.avail_out=h,t.next_in=n,t.avail_in=o,a.hold=l,a.bits=c,Be;t.adler=a.check=1,a.mode=Ve;case Ve:if(e===Le||e===Re)break t;case Xe:if(a.last){l>>>=7&c,c-=7&c,a.mode=Je;break}for(;c<3;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}switch(a.last=1&l,l>>>=1,c-=1,3&l){case 0:a.mode=16193;break;case 1:if(ca(a),a.mode=$e,e===Re){l>>>=2,c-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=Qe}l>>>=2,c-=2;break;case 16193:for(l>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",a.mode=Qe;break}if(a.length=65535&l,l=0,c=0,a.mode=Ke,e===Re)break t;case Ke:a.mode=16195;case 16195:if(p=a.length,p){if(p>o&&(p=o),p>h&&(p=h),0===p)break t;s.set(i.subarray(n,n+p),r),o-=p,n+=p,h-=p,r+=p,a.length-=p;break}a.mode=Ve;break;case 16196:for(;c<14;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(a.nlen=257+(31&l),l>>>=5,c-=5,a.ndist=1+(31&l),l>>>=5,c-=5,a.ncode=4+(15&l),l>>>=4,c-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=Qe;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;c<3;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}a.lens[k[a.have++]]=7&l,l>>>=3,c-=3}for(;a.have<19;)a.lens[k[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,P={bits:a.lenbits},x=Ne(0,a.lens,0,19,a.lencode,0,a.work,P),a.lenbits=P.bits,x){t.msg="invalid code lengths set",a.mode=Qe;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;S=a.lencode[l&(1<<a.lenbits)-1],g=S>>>24,_=S>>>16&255,y=65535&S,!(g<=c);){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(y<16)l>>>=g,c-=g,a.lens[a.have++]=y;else{if(16===y){for(A=g+2;c<A;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(l>>>=g,c-=g,0===a.have){t.msg="invalid bit length repeat",a.mode=Qe;break}v=a.lens[a.have-1],p=3+(3&l),l>>>=2,c-=2}else if(17===y){for(A=g+3;c<A;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}l>>>=g,c-=g,v=0,p=3+(7&l),l>>>=3,c-=3}else{for(A=g+7;c<A;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}l>>>=g,c-=g,v=0,p=11+(127&l),l>>>=7,c-=7}if(a.have+p>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=Qe;break}for(;p--;)a.lens[a.have++]=v}}if(a.mode===Qe)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=Qe;break}if(a.lenbits=9,P={bits:a.lenbits},x=Ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,P),a.lenbits=P.bits,x){t.msg="invalid literal/lengths set",a.mode=Qe;break}if(a.distbits=6,a.distcode=a.distdyn,P={bits:a.distbits},x=Ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,P),a.distbits=P.bits,x){t.msg="invalid distances set",a.mode=Qe;break}if(a.mode=$e,e===Re)break t;case $e:a.mode=Ye;case Ye:if(o>=6&&h>=258){t.next_out=r,t.avail_out=h,t.next_in=n,t.avail_in=o,a.hold=l,a.bits=c,ke(t,d),r=t.next_out,s=t.output,h=t.avail_out,n=t.next_in,i=t.input,o=t.avail_in,l=a.hold,c=a.bits,a.mode===Ve&&(a.back=-1);break}for(a.back=0;S=a.lencode[l&(1<<a.lenbits)-1],g=S>>>24,_=S>>>16&255,y=65535&S,!(g<=c);){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(_&&!(240&_)){for(w=g,b=_,M=y;S=a.lencode[M+((l&(1<<w+b)-1)>>w)],g=S>>>24,_=S>>>16&255,y=65535&S,!(w+g<=c);){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}l>>>=w,c-=w,a.back+=w}if(l>>>=g,c-=g,a.back+=g,a.length=y,0===_){a.mode=16205;break}if(32&_){a.back=-1,a.mode=Ve;break}if(64&_){t.msg="invalid literal/length code",a.mode=Qe;break}a.extra=15&_,a.mode=16201;case 16201:if(a.extra){for(A=a.extra;c<A;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}a.length+=l&(1<<a.extra)-1,l>>>=a.extra,c-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;S=a.distcode[l&(1<<a.distbits)-1],g=S>>>24,_=S>>>16&255,y=65535&S,!(g<=c);){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(!(240&_)){for(w=g,b=_,M=y;S=a.distcode[M+((l&(1<<w+b)-1)>>w)],g=S>>>24,_=S>>>16&255,y=65535&S,!(w+g<=c);){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}l>>>=w,c-=w,a.back+=w}if(l>>>=g,c-=g,a.back+=g,64&_){t.msg="invalid distance code",a.mode=Qe;break}a.offset=y,a.extra=15&_,a.mode=16203;case 16203:if(a.extra){for(A=a.extra;c<A;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}a.offset+=l&(1<<a.extra)-1,l>>>=a.extra,c-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=Qe;break}a.mode=16204;case 16204:if(0===h)break t;if(p=d-h,a.offset>p){if(p=a.offset-p,p>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=Qe;break}p>a.wnext?(p-=a.wnext,m=a.wsize-p):m=a.wnext-p,p>a.length&&(p=a.length),f=a.window}else f=s,m=r-a.offset,p=a.length;p>h&&(p=h),h-=p,a.length-=p;do{s[r++]=f[m++]}while(--p);0===a.length&&(a.mode=Ye);break;case 16205:if(0===h)break t;s[r++]=a.length,h--,a.mode=Ye;break;case Je:if(a.wrap){for(;c<32;){if(0===o)break t;o--,l|=i[n++]<<c,c+=8}if(d-=h,t.total_out+=d,a.total+=d,4&a.wrap&&d&&(t.adler=a.check=a.flags?et(a.check,s,d,r-d):Q(a.check,s,d,r-d)),d=h,4&a.wrap&&(a.flags?l:ta(l))!==a.check){t.msg="incorrect data check",a.mode=Qe;break}l=0,c=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;c<32;){if(0===o)break t;o--,l+=i[n++]<<c,c+=8}if(4&a.wrap&&l!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=Qe;break}l=0,c=0}a.mode=16208;case 16208:x=ze;break t;case Qe:x=Ue;break t;case 16210:return je;default:return Fe}return t.next_out=r,t.avail_out=h,t.next_in=n,t.avail_in=o,a.hold=l,a.bits=c,(a.wsize||d!==t.avail_out&&a.mode<Qe&&(a.mode<Je||e!==Oe))&&ua(t,t.output,t.next_out,d-t.avail_out),u-=t.avail_in,d-=t.avail_out,t.total_in+=u,t.total_out+=d,a.total+=d,4&a.wrap&&d&&(t.adler=a.check=a.flags?et(a.check,s,d,t.next_out-d):Q(a.check,s,d,t.next_out-d)),t.data_type=a.bits+(a.last?64:0)+(a.mode===Ve?128:0)+(a.mode===$e||a.mode===Ke?256:0),(0===u&&0===d||e===Oe)&&x===De&&(x=qe),x},fa=t=>{if(aa(t))return Fe;let e=t.state;return e.window&&(e.window=null),t.state=null,De},ga=(t,e)=>{if(aa(t))return Fe;const a=t.state;return 2&a.wrap?(a.head=e,e.done=!1,De):Fe},_a=(t,e)=>{const a=e.length;let i,s,n;return aa(t)?Fe:(i=t.state,0!==i.wrap&&i.mode!==We?Fe:i.mode===We&&(s=1,s=Q(s,e,a,0),s!==i.check)?Ue:(n=ua(t,e,a,a),n?(i.mode=16210,je):(i.havedict=1,De)))},ya=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const wa=Object.prototype.toString,{Z_NO_FLUSH:ba,Z_FINISH:Ma,Z_OK:va,Z_STREAM_END:xa,Z_NEED_DICT:Sa,Z_STREAM_ERROR:Ea,Z_DATA_ERROR:Pa,Z_MEM_ERROR:Aa}=it;function ka(t){this.options=re({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pe,this.strm.avail_out=0;let a=pa(this.strm,e.windowBits);if(a!==va)throw new Error(at[a]);if(this.header=new ya,ga(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ce(e.dictionary):"[object ArrayBuffer]"===wa.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=_a(this.strm,e.dictionary),a!==va)))throw new Error(at[a])}function Ga(t,e){const a=new ka(e);if(a.push(t),a.err)throw a.msg||at[a.err];return a.result}ka.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let n,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Ma:ba,"[object ArrayBuffer]"===wa.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),n=ma(a,r),n===Sa&&s&&(n=_a(a,s),n===va?n=ma(a,r):n===Pa&&(n=Sa));a.avail_in>0&&n===xa&&a.state.wrap>0&&0!==t[a.next_in];)da(a),n=ma(a,r);switch(n){case Ea:case Pa:case Sa:case Aa:return this.onEnd(n),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||n===xa))if("string"===this.options.to){let t=de(a.output,a.next_out),e=a.next_out-t,s=ue(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(s)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(n!==va||0!==o){if(n===xa)return n=fa(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},ka.prototype.onData=function(t){this.chunks.push(t)},ka.prototype.onEnd=function(t){t===va&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=oe(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ca={Inflate:ka,inflate:Ga,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Ga(t,e)},ungzip:Ga,constants:it};const{Deflate:Ia,deflate:Ta,deflateRaw:Na,gzip:Oa}=Pe,{Inflate:La,inflate:Ra,inflateRaw:Da,ungzip:za}=Ca;var Ba={Deflate:Ia,deflate:Ta,deflateRaw:Na,gzip:Oa,Inflate:La,inflate:Ra,inflateRaw:Da,ungzip:za,constants:it},Fa=a(962),Ua=a.n(Fa);var ja=a(335),qa=a.n(ja);function Za(t,e){return(t[0].numerator+t[1].numerator/(60*t[1].denominator)+t[2].numerator/(3600*t[2].denominator))*(e?-1:1)}class Ha{constructor(t){this.imageFile=t}async hasGeolocationData(){const t=await this.latitude(),e=await this.longitude();return t&&e}async width(){return await this.extractExifData(),qa().getTag(this.imageFile,"PixelXDimension")}async height(){return await this.extractExifData(),qa().getTag(this.imageFile,"PixelYDimension")}async latitude(){await this.extractExifData();const t=qa().getTag(this.imageFile,"GPSLatitude"),e=qa().getTag(this.imageFile,"GPSLatitudeRef");if(!t||!e)throw"No latitude data";return Za(t,"S"===e)}async longitude(){await this.extractExifData();const t=qa().getTag(this.imageFile,"GPSLongitude"),e=qa().getTag(this.imageFile,"GPSLongitudeRef");if(!t||!e)throw"No longitude data";return Za(t,"W"===e)}async extractExifData(){await new Promise(t=>qa().getData(this.imageFile,t))}async getImageData(){return new Promise(t=>{let e=new FileReader;e.onload=()=>t(e.result),e.readAsDataURL(this.imageFile,"UTF-8")})}}const Wa=["CartoDB.DarkMatter","CartoDB.DarkMatterNoLabels","CartoDB.Positron","CartoDB.PositronNoLabels","Esri.WorldImagery","OpenStreetMap.Mapnik","OpenTopoMap","Stamen.Terrain","Stamen.TerrainBackground","Stamen.Toner","Stamen.TonerLite","Stamen.TonerBackground","Stamen.Watercolor","CyclOSM","No map"],Va={exportImage:'\n<h3>Export Image</h3>\n\n<form id="export-settings">\n    <div class="form-row">\n        <label>Format:</label>\n        <select name="format">\n            <option selected value="png">PNG</option>\n            <option value="svg">SVG (no background map)</option>\n        </select>\n    </div>\n\n    <div class="form-row">\n        <label></label>\n        <input id="render-export" type="button" value="Render">\n    </div>\n</form>\n\n<p id="export-output"></p>\n'};function Xa(t,e){e.stopPropagation(),e.preventDefault();let a=[],i=Array.from(e.dataTransfer.files),s=function(t){let e=0,a=[],i=a.length?`, <span class='failures'>${a.length} failed</span>`:"",s=()=>`\n        <h1>Reading files...</h1>\n        <p>${e} loaded${i} of <b>${t}</b></p>`,n=y()({content:s(),escCloses:!1,overlayClose:!1,overlayStyles:t=>{t.opacity=.1}});return n.afterCreate(()=>{n.closeElem().style.display="none"}),n.afterClose(()=>n.destroy()),n.setContent=t=>{Array.from(n.modalElem().childNodes).forEach(t=>{t!==n.closeElem()&&n.modalElem().removeChild(t)}),n.modalElem().insertAdjacentHTML("afterbegin",t)},n.addFailure=t=>{a.push(t),n.setContent(s())},n.addSuccess=()=>{e++,n.setContent(s())},n.finished=()=>{if(0===a.length)return n.close();let t=a.map(t=>`<li>${t.name}</li>`);n.setContent(`\n            <h1>Files loaded</h1>\n            <p>\n                Loaded ${e},\n                <span class="failures">${a.length} failure${1===a.length?"":"s"}:</span>\n            </p>\n            <ul class="failures">${t.join("")}</ul>`),n.closeElem().style.display="",n.options({escCloses:!0,overlayClose:!0})},n}(i.length);s.show(),Promise.all(i.map(async e=>{try{return/\.jpe?g$/i.test(e.name)?await(async e=>{const a=new Ha(e);if(!await a.hasGeolocationData())throw"No geolocation data";await t.addImage(a),s.addSuccess()})(e):await(async e=>{for(const i of await function(t){const e=/\.gz$/i.test(t.name),a=t.name.replace(/\.gz$/i,"").split(".").pop().toLowerCase();if("igc"!==a)throw new Error(`Unsupported file format: ${a}`);return function(t,e){return new Promise((a,i)=>{const s=new FileReader;s.onload=t=>{const s=t.target.result;try{a(e?Ba.inflate(s,{to:"string"}):s)}catch(t){i(t)}},s.readAsText(t)})}(t,e).then(t=>{try{return function(t){const e=[];let a=null;for(const i of t.fixes)e.push({lat:i.latitude,lng:i.longitude}),a=a||new Date(i.timestamp);return e.length>0?[{timestamp:a,points:e,name:"igc",pilot:t.pilot||null,callsign:t.callsign||null,gliderType:t.gliderType||null,registration:t.registration||null,numFlight:t.numFlight||null,date:t.date||null}]:[]}(Ua().parse(t,{lenient:!0}))}catch(t){return Promise.reject(t)}})}(e))i.filename=e.name,a.push(i),t.addTrack(i),s.addSuccess()})(e)}catch(t){console.error(t),s.addFailure({name:e.name,error:t})}})).then(()=>{t.center(),s.finished()})}function Ka(t){t.dataTransfer.dropEffect="copy",t.stopPropagation(),t.preventDefault()}var $a=6378137,Ya=.0066943799901413165,Ja=484813681109536e-20,Qa=Math.PI/2,ti=1e-10,ei=.017453292519943295,ai=57.29577951308232,ii=Math.PI/4,si=2*Math.PI,ni=3.14159265359;const ri={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},oi={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var hi=/[\s_\-\/\(\)]/g;function li(t,e){if(t[e])return t[e];for(var a,i=Object.keys(t),s=e.toLowerCase().replace(hi,""),n=-1;++n<i.length;)if((a=i[n]).toLowerCase().replace(hi,"")===s)return t[a]}function ci(t){var e,a,i,s={},n=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var a=e.split("=");return a.push(!0),t[a[0].toLowerCase()]=a[1],t},{}),r={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*ei},lat_1:function(t){s.lat1=t*ei},lat_2:function(t){s.lat2=t*ei},lat_ts:function(t){s.lat_ts=t*ei},lon_0:function(t){s.long0=t*ei},lon_1:function(t){s.long1=t*ei},lon_2:function(t){s.long2=t*ei},alpha:function(t){s.alpha=parseFloat(t)*ei},gamma:function(t){s.rectified_grid_angle=parseFloat(t)*ei},lonc:function(t){s.longc=t*ei},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r:function(t){s.a=s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var e=li(oi,t);e&&(s.to_meter=e.to_meter)},from_greenwich:function(t){s.from_greenwich=t*ei},pm:function(t){var e=li(ri,t);s.from_greenwich=(e||parseFloat(t))*ei},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(s.axis=t)},approx:function(){s.approx=!0}};for(e in n)a=n[e],e in r?"function"==typeof(i=r[e])?i(a):s[i]=a:s[e]=a;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}const ui=class{static getId(t){const e=t.find(t=>Array.isArray(t)&&"ID"===t[0]);return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}static convertUnit(t,e="unit"){if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};const a=t[1],i=parseFloat(t[2])||null,s=t.find(t=>Array.isArray(t)&&"ID"===t[0]);return{type:e,name:a,conversion_factor:i,id:s?{authority:s[1],code:parseInt(s[2],10)}:null}}static convertAxis(t){const e=t[1]||"Unknown";let a;const i=e.match(/^\((.)\)$/);if(i){const t=i[1].toUpperCase();if("E"===t)a="east";else if("N"===t)a="north";else{if("U"!==t)throw new Error(`Unknown axis abbreviation: ${t}`);a="up"}}else a=t[2]?t[2].toLowerCase():"unknown";const s=t.find(t=>Array.isArray(t)&&"ORDER"===t[0]),n=s?parseInt(s[1],10):null,r=t.find(t=>Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0]));return{name:e,direction:a,unit:this.convertUnit(r),order:n}}static extractAxes(t){return t.filter(t=>Array.isArray(t)&&"AXIS"===t[0]).map(t=>this.convertAxis(t)).sort((t,e)=>(t.order||0)-(e.order||0))}static convert(t,e={}){switch(t[0]){case"PROJCRS":e.type="ProjectedCRS",e.name=t[1],e.base_crs=t.find(t=>Array.isArray(t)&&"BASEGEOGCRS"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"BASEGEOGCRS"===t[0])):null,e.conversion=t.find(t=>Array.isArray(t)&&"CONVERSION"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"CONVERSION"===t[0])):null;const a=t.find(t=>Array.isArray(t)&&"CS"===t[0]);a&&(e.coordinate_system={type:a[1],axis:this.extractAxes(t)});const i=t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0]);if(i){const t=this.convertUnit(i);e.coordinate_system.unit=t}e.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":e.type="GeographicCRS",e.name=t[1];const s=t.find(t=>Array.isArray(t)&&("DATUM"===t[0]||"ENSEMBLE"===t[0]));if(s){const a=this.convert(s);"ENSEMBLE"===s[0]?e.datum_ensemble=a:e.datum=a;const i=t.find(t=>Array.isArray(t)&&"PRIMEM"===t[0]);i&&"Greenwich"!==i[1]&&(a.prime_meridian={name:i[1],longitude:parseFloat(i[2])})}e.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},e.id=this.getId(t);break;case"DATUM":e.type="GeodeticReferenceFrame",e.name=t[1],e.ellipsoid=t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0])):null;break;case"ENSEMBLE":e.type="DatumEnsemble",e.name=t[1],e.members=t.filter(t=>Array.isArray(t)&&"MEMBER"===t[0]).map(t=>({type:"DatumEnsembleMember",name:t[1],id:this.getId(t)}));const n=t.find(t=>Array.isArray(t)&&"ENSEMBLEACCURACY"===t[0]);n&&(e.accuracy=parseFloat(n[1]));const r=t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0]);r&&(e.ellipsoid=this.convert(r)),e.id=this.getId(t);break;case"ELLIPSOID":e.type="Ellipsoid",e.name=t[1],e.semi_major_axis=parseFloat(t[2]),e.inverse_flattening=parseFloat(t[3]),t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0])&&this.convert(t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0]),e);break;case"CONVERSION":e.type="Conversion",e.name=t[1],e.method=t.find(t=>Array.isArray(t)&&"METHOD"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"METHOD"===t[0])):null,e.parameters=t.filter(t=>Array.isArray(t)&&"PARAMETER"===t[0]).map(t=>this.convert(t));break;case"METHOD":e.type="Method",e.name=t[1],e.id=this.getId(t);break;case"PARAMETER":e.type="Parameter",e.name=t[1],e.value=parseFloat(t[2]),e.unit=this.convertUnit(t.find(t=>Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0]))),e.id=this.getId(t);break;case"BOUNDCRS":e.type="BoundCRS";const o=t.find(t=>Array.isArray(t)&&"SOURCECRS"===t[0]);if(o){const t=o.find(t=>Array.isArray(t));e.source_crs=t?this.convert(t):null}const h=t.find(t=>Array.isArray(t)&&"TARGETCRS"===t[0]);if(h){const t=h.find(t=>Array.isArray(t));e.target_crs=t?this.convert(t):null}const l=t.find(t=>Array.isArray(t)&&"ABRIDGEDTRANSFORMATION"===t[0]);e.transformation=l?this.convert(l):null;break;case"ABRIDGEDTRANSFORMATION":if(e.type="Transformation",e.name=t[1],e.method=t.find(t=>Array.isArray(t)&&"METHOD"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"METHOD"===t[0])):null,e.parameters=t.filter(t=>Array.isArray(t)&&("PARAMETER"===t[0]||"PARAMETERFILE"===t[0])).map(t=>"PARAMETER"===t[0]?this.convert(t):"PARAMETERFILE"===t[0]?{name:t[1],value:t[2],id:{authority:"EPSG",code:8656}}:void 0),7===e.parameters.length){const t=e.parameters[6];"Scale difference"===t.name&&(t.value=Math.round(1e12*(t.value-1))/1e6)}e.id=this.getId(t);break;case"AXIS":e.coordinate_system||(e.coordinate_system={type:"unspecified",axis:[]}),e.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const c=this.convertUnit(t,"LinearUnit");e.coordinate_system&&e.coordinate_system.axis&&e.coordinate_system.axis.forEach(t=>{t.unit||(t.unit=c)}),c.conversion_factor&&1!==c.conversion_factor&&e.semi_major_axis&&(e.semi_major_axis={value:e.semi_major_axis,unit:c});break;default:e.keyword=t[0]}return e}},di=class extends ui{static convert(t,e={}){return super.convert(t,e),e.coordinate_system&&"Cartesian"===e.coordinate_system.subtype&&delete e.coordinate_system,e.usage&&delete e.usage,e}},pi=class extends ui{static convert(t,e={}){super.convert(t,e);const a=t.find(t=>Array.isArray(t)&&"CS"===t[0]);a&&(e.coordinate_system={subtype:a[1],axis:this.extractAxes(t)});const i=t.find(t=>Array.isArray(t)&&"USAGE"===t[0]);if(i){const t=i.find(t=>Array.isArray(t)&&"SCOPE"===t[0]),a=i.find(t=>Array.isArray(t)&&"AREA"===t[0]),s=i.find(t=>Array.isArray(t)&&"BBOX"===t[0]);e.usage={},t&&(e.usage.scope=t[1]),a&&(e.usage.area=a[1]),s&&(e.usage.bbox=s.slice(1))}return e}};var mi=1,fi=/\s/,gi=/[A-Za-z]/,_i=/[A-Za-z84_]/,yi=/[,\]]/,wi=/[\d\.E\-\+]/;function bi(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=mi}function Mi(t,e,a){Array.isArray(e)&&(a.unshift(e),e=null);var i=e?{}:t,s=a.reduce(function(t,e){return vi(e,t),t},i);e&&(t[e]=s)}function vi(t,e){if(Array.isArray(t)){var a=t.shift();if("PARAMETER"===a&&(a=t.shift()),1===t.length)return Array.isArray(t[0])?(e[a]={},void vi(t[0],e[a])):void(e[a]=t[0]);if(t.length)if("TOWGS84"!==a){if("AXIS"===a)return a in e||(e[a]=[]),void e[a].push(t);var i;switch(Array.isArray(a)||(e[a]={}),a){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[a]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&vi(t[2],e[a]));case"SPHEROID":case"ELLIPSOID":return e[a]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&vi(t[3],e[a]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void Mi(e,a,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],Mi(e,a,t),void(e[a].type=a);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return vi(t,e[a]);return Mi(e,a,t)}}else e[a]=t;else e[a]=!0}else e[t]=!0}function xi(t){return.017453292519943295*t}function Si(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");t.long0||!t.longc||"albers conic equal area"!==e&&"lambert azimuthal equal area"!==e||(t.long0=t.longc),t.lat_ts||!t.lat1||"stereographic south pole"!==e&&"polar stereographic (variant b)"!==e?t.lat_ts||!t.lat0||"polar stereographic"!==e&&"polar stereographic (variant a)"!==e||(t.lat_ts=t.lat0,t.lat0=xi(t.lat0>0?90:-90),delete t.lat1):(t.lat0=xi(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1)}function Ei(t){let e={units:null,to_meter:void 0};return"string"==typeof t?(e.units=t.toLowerCase(),"metre"===e.units&&(e.units="meter"),"meter"===e.units&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Pi(t){return"object"==typeof t?t.value*t.unit.conversion_factor:t}function Ai(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Pi(t.ellipsoid.semi_major_axis),void 0!==t.ellipsoid.inverse_flattening?e.rf=t.ellipsoid.inverse_flattening:void 0!==t.ellipsoid.semi_major_axis&&void 0!==t.ellipsoid.semi_minor_axis&&(e.rf=e.a/(e.a-Pi(t.ellipsoid.semi_minor_axis))))}function ki(t,e={}){return t&&"object"==typeof t?"BoundCRS"===t.type?(ki(t.source_crs,e),t.transformation&&(t.transformation.method&&"NTv2"===t.transformation.method.name?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(t=>t.value)),e):(Object.keys(t).forEach(a=>{const i=t[a];if(null!==i)switch(a){case"name":if(e.srsCode)break;e.name=i,e.srsCode=i;break;case"type":"GeographicCRS"===i?e.projName="longlat":"ProjectedCRS"===i&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(e.ellps=i.ellipsoid.name,Ai(i,e)),i.prime_meridian&&(e.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=i.name,Ai(i,e);break;case"prime_meridian":e.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis)if(e.axis=i.axis.map(t=>{const e=t.direction;if("east"===e)return"e";if("north"===e)return"n";if("west"===e)return"w";if("south"===e)return"s";throw new Error(`Unknown axis direction: ${e}`)}).join("")+"u",i.unit){const{units:t,to_meter:a}=Ei(i.unit);e.units=t,e.to_meter=a}else if(i.axis[0]&&i.axis[0].unit){const{units:t,to_meter:a}=Ei(i.axis[0].unit);e.units=t,e.to_meter=a}break;case"id":i.authority&&i.code&&(e.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(e.projName=i.method.name),i.parameters&&i.parameters.forEach(t=>{const a=t.name.toLowerCase().replace(/\s+/g,"_"),i=t.value;t.unit&&t.unit.conversion_factor?e[a]=i*t.unit.conversion_factor:"degree"===t.unit?e[a]=i*Math.PI/180:e[a]=i});break;case"unit":i.name&&(e.units=i.name.toLowerCase(),"metre"===e.units&&(e.units="meter")),i.conversion_factor&&(e.to_meter=i.conversion_factor);break;case"base_crs":ki(i,e),e.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name}}),void 0!==e.latitude_of_false_origin&&(e.lat0=e.latitude_of_false_origin),void 0!==e.longitude_of_false_origin&&(e.long0=e.longitude_of_false_origin),void 0!==e.latitude_of_standard_parallel&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),void 0!==e.latitude_of_1st_standard_parallel&&(e.lat1=e.latitude_of_1st_standard_parallel),void 0!==e.latitude_of_2nd_standard_parallel&&(e.lat2=e.latitude_of_2nd_standard_parallel),void 0!==e.latitude_of_projection_centre&&(e.lat0=e.latitude_of_projection_centre),void 0!==e.longitude_of_projection_centre&&(e.longc=e.longitude_of_projection_centre),void 0!==e.easting_at_false_origin&&(e.x0=e.easting_at_false_origin),void 0!==e.northing_at_false_origin&&(e.y0=e.northing_at_false_origin),void 0!==e.latitude_of_natural_origin&&(e.lat0=e.latitude_of_natural_origin),void 0!==e.longitude_of_natural_origin&&(e.long0=e.longitude_of_natural_origin),void 0!==e.longitude_of_origin&&(e.long0=e.longitude_of_origin),void 0!==e.false_easting&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),void 0!==e.false_northing&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),void 0!==e.standard_parallel_1&&(e.lat1=e.standard_parallel_1),void 0!==e.standard_parallel_2&&(e.lat2=e.standard_parallel_2),void 0!==e.scale_factor_at_natural_origin&&(e.k0=e.scale_factor_at_natural_origin),void 0!==e.scale_factor_at_projection_centre&&(e.k0=e.scale_factor_at_projection_centre),void 0!==e.scale_factor_on_pseudo_standard_parallel&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),void 0!==e.azimuth&&(e.alpha=e.azimuth),void 0!==e.azimuth_at_projection_centre&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),Si(e),e):t}bi.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;fi.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case mi:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},bi.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(yi.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},bi.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=mi)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=mi,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},bi.prototype.number=function(t){if(!wi.test(t)){if(yi.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},bi.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},bi.prototype.keyword=function(t){if(_i.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=mi)}if(!yi.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},bi.prototype.neutral=function(t){if(gi.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(wi.test(t))return this.word=t,void(this.state=3);if(!yi.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},bi.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Gi=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Ci(t){for(var e=Object.keys(t),a=0,i=e.length;a<i;++a){var s=e[a];-1!==Gi.indexOf(s)&&Ii(t[s]),"object"==typeof t[s]&&Ci(t[s])}}function Ii(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var a="",i=0,s=t.AXIS.length;i<s;++i){var n=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==n[0].indexOf("north")||("y"===n[0]||"lat"===n[0])&&"north"===n[1]?a+="n":-1!==n[0].indexOf("south")||("y"===n[0]||"lat"===n[0])&&"south"===n[1]?a+="s":-1!==n[0].indexOf("east")||("x"===n[0]||"lon"===n[0])&&"east"===n[1]?a+="e":-1===n[0].indexOf("west")&&("x"!==n[0]&&"lon"!==n[0]||"west"!==n[1])||(a+="w")}2===a.length&&(a+="u"),3===a.length&&(t.axis=a)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var r=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(r=t),r&&(r.DATUM?t.datumCode=r.DATUM.name.toLowerCase():t.datumCode=r.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(t.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=r.DATUM.SPHEROID.a,t.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(t.datum_params=r.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=xi(t.rectified_grid_angle)),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",xi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",xi],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",xi],["lat0","latitude_of_origin",xi],["lat0","standard_parallel_1",xi],["lat1","standard_parallel_1",xi],["lat2","standard_parallel_2",xi],["azimuth","Azimuth"],["alpha","azimuth",xi],["srsCode","name"]].forEach(function(e){return function(t,e){var a=e[0],i=e[1];!(a in t)&&i in t&&(t[a]=t[i],3===e.length&&(t[a]=e[2](t[a])))}(t,e)}),Si(t)}function Ti(t){if("object"==typeof t)return ki(t);const e=function(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}(t);var a=new bi(t).output();if("WKT2"===e)return ki(function(t){const e=function(t){return t.find(t=>Array.isArray(t)&&"USAGE"===t[0])?"2019":(t.find(t=>Array.isArray(t)&&"CS"===t[0])||"BOUNDCRS"===t[0]||"PROJCRS"===t[0]||t[0],"2015")}(t);return("2019"===e?pi:di).convert(t)}(a));var i=a[0],s={};return vi(a,s),Ci(s),s[i]}function Ni(t){var e=this;if(2===arguments.length){var a=arguments[1];"string"==typeof a?"+"===a.charAt(0)?Ni[t]=ci(arguments[1]):Ni[t]=Ti(arguments[1]):Ni[t]=a}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){return Array.isArray(t)?Ni.apply(e,t):Ni(t)});if("string"==typeof t){if(t in Ni)return Ni[t]}else"EPSG"in t?Ni["EPSG:"+t.EPSG]=t:"ESRI"in t?Ni["ESRI:"+t.ESRI]=t:"IAU2000"in t?Ni["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Ni);const Oi=Ni;var Li=["3857","900913","3785","102113"];function Ri(t,e){var a,i;if(t=t||{},!e)return t;for(i in e)void 0!==(a=e[i])&&(t[i]=a);return t}function Di(t,e,a){var i=t*e;return a/Math.sqrt(1-i*i)}function zi(t){return t<0?-1:1}function Bi(t){return Math.abs(t)<=ni?t:t-zi(t)*si}function Fi(t,e,a){var i=t*a,s=.5*t;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(Qa-e))/i}function Ui(t,e){for(var a,i,s=.5*t,n=Qa-2*Math.atan(e),r=0;r<=15;r++)if(a=t*Math.sin(n),n+=i=Qa-2*Math.atan(e*Math.pow((1-a)/(1+a),s))-n,Math.abs(i)<=1e-10)return n;return-9999}function ji(t){return t}var qi=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,a,i=t.x,s=t.y;if(s*ai>90&&s*ai<-90&&i*ai>180&&i*ai<-180)return null;if(Math.abs(Math.abs(s)-Qa)<=ti)return null;if(this.sphere)e=this.x0+this.a*this.k0*Bi(i-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(ii+.5*s));else{var n=Math.sin(s),r=Fi(this.e,s,n);e=this.x0+this.a*this.k0*Bi(i-this.long0),a=this.y0-this.a*this.k0*Math.log(r)}return t.x=e,t.y=a,t},inverse:function(t){var e,a,i=t.x-this.x0,s=t.y-this.y0;if(this.sphere)a=Qa-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var n=Math.exp(-s/(this.a*this.k0));if(-9999===(a=Ui(this.e,n)))return null}return e=Bi(this.long0+i/(this.a*this.k0)),t.x=e,t.y=a,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"]},{init:function(){},forward:ji,inverse:ji,names:["longlat","identity"]}],Zi={},Hi=[];function Wi(t,e){var a=Hi.length;return t.names?(Hi[a]=t,t.names.forEach(function(t){Zi[t.toLowerCase()]=a}),this):(console.log(e),!0)}function Vi(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}const Xi={start:function(){qi.forEach(Wi)},add:Wi,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Zi[e]&&Hi[Zi[e]]||(e=Vi(e))in Zi&&Hi[Zi[e]]?Hi[Zi[e]]:void 0}},Ki={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},$i=Ki.WGS84;var Yi={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Ji in Yi){var Qi=Yi[Ji];Qi.datumName&&(Yi[Qi.datumName]=Qi)}const ts=Yi;var es={};async function as(t,e){for(var a=[],i=await e.getImageCount(),s=i-1;s>=0;s--){var n=await e.getImage(s),r=await n.readRasters(),o=[n.getWidth(),n.getHeight()],h=n.getBoundingBox().map(ss),l=[n.fileDirectory.ModelPixelScale[0],n.fileDirectory.ModelPixelScale[1]].map(ss),c=h[0]+(o[0]-1)*l[0],u=h[3]-(o[1]-1)*l[1],d=r[0],p=r[1],m=[];for(let t=o[1]-1;t>=0;t--)for(let e=o[0]-1;e>=0;e--){var f=t*o[0]+e;m.push([-ns(p[f]),ns(d[f])])}a.push({del:l,lim:o,ll:[-c,u],cvs:m})}var g={header:{nSubgrids:i},subgrids:a};return es[t]=g,g}function is(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:es[t]||null,isNull:!1}}function ss(t){return t*Math.PI/180}function ns(t){return t/3600*Math.PI/180}function rs(t,e,a){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,a)))}function os(t){return t.map(function(t){return[ns(t.longitudeShift),ns(t.latitudeShift)]})}function hs(t,e,a){return{name:rs(t,e+8,e+16).trim(),parent:rs(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,a),upperLatitude:t.getFloat64(e+88,a),lowerLongitude:t.getFloat64(e+104,a),upperLongitude:t.getFloat64(e+120,a),latitudeInterval:t.getFloat64(e+136,a),longitudeInterval:t.getFloat64(e+152,a),gridNodeCount:t.getInt32(e+168,a)}}function ls(t,e,a,i,s){var n=e+176,r=16;!1===s&&(r=8);for(var o=[],h=0;h<a.gridNodeCount;h++){var l={latitudeShift:t.getFloat32(n+h*r,i),longitudeShift:t.getFloat32(n+h*r+4,i)};!1!==s&&(l.latitudeAccuracy=t.getFloat32(n+h*r+8,i),l.longitudeAccuracy=t.getFloat32(n+h*r+12,i)),o.push(l)}return o}function cs(t,e){if(!(this instanceof cs))return new cs(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(t){if(t)throw t};var a=function(t){if(!function(t){return"string"==typeof t}(t))return"projName"in t?t:Ti(t);if(function(t){return t in Oi}(t))return Oi[t];if(function(t){return 0!==t.indexOf("+")&&-1!==t.indexOf("[")||"object"==typeof t&&!("srsCode"in t)}(t)){var e=Ti(t);if(function(t){var e=li(t,"authority");if(e){var a=li(e,"epsg");return a&&Li.indexOf(a)>-1}}(e))return Oi["EPSG:3857"];var a=function(t){var e=li(t,"extension");if(e)return li(e,"proj4")}(e);return a?ci(a):e}return function(t){return"+"===t[0]}(t)?ci(t):void 0}(t);if("object"==typeof a){var i=cs.projections.get(a.projName);if(i){if(a.datumCode&&"none"!==a.datumCode){var s=li(ts,a.datumCode);s&&(a.datum_params=a.datum_params||(s.towgs84?s.towgs84.split(","):null),a.ellps=s.ellipse,a.datumName=s.datumName?s.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var n,r,o,h,l,c,u=function(t,e,a,i,s){if(!t){var n=li(Ki,i);n||(n=$i),t=n.a,e=n.b,a=n.rf}return a&&!e&&(e=(1-1/a)*t),(0===a||Math.abs(t-e)<ti)&&(s=!0,e=t),{a:t,b:e,rf:a,sphere:s}}(a.a,a.b,a.rf,a.ellps,a.sphere),d=(n=u.a,r=u.b,u.rf,l=((o=n*n)-(h=r*r))/o,c=0,a.R_A?(o=(n*=1-l*(.16666666666666666+l*(.04722222222222222+.022156084656084655*l)))*n,l=0):c=Math.sqrt(l),{es:l,e:c,ep2:(o-h)/h}),p=function(t){return void 0===t?null:t.split(",").map(is)}(a.nadgrids),m=a.datum||function(t,e,a,i,s,n,r){var o={};return o.datum_type=void 0===t||"none"===t?5:4,e&&(o.datum_params=e.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=1),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=2,o.datum_params[3]*=Ja,o.datum_params[4]*=Ja,o.datum_params[5]*=Ja,o.datum_params[6]=o.datum_params[6]/1e6+1))),r&&(o.datum_type=3,o.grids=r),o.a=a,o.b=i,o.es=s,o.ep2=n,o}(a.datumCode,a.datum_params,u.a,u.b,d.es,d.ep2,p);Ri(this,a),Ri(this,i),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=m,"init"in this&&"function"==typeof this.init&&this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}cs.projections=Xi,cs.projections.start();const us=cs;function ds(t,e,a){var i,s,n,r,o=t.x,h=t.y,l=t.z?t.z:0;if(h<-Qa&&h>-1.001*Qa)h=-Qa;else if(h>Qa&&h<1.001*Qa)h=Qa;else{if(h<-Qa)return{x:-1/0,y:-1/0,z:t.z};if(h>Qa)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),s=Math.sin(h),r=Math.cos(h),n=s*s,{x:((i=a/Math.sqrt(1-e*n))+l)*r*Math.cos(o),y:(i+l)*r*Math.sin(o),z:(i*(1-e)+l)*s}}function ps(t,e,a,i){var s,n,r,o,h,l,c,u,d,p,m,f,g,_,y,w=t.x,b=t.y,M=t.z?t.z:0;if(s=Math.sqrt(w*w+b*b),n=Math.sqrt(w*w+b*b+M*M),s/a<1e-12){if(_=0,n/a<1e-12)return y=-i,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(b,w);r=M/n,u=(o=s/n)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*o*o)),d=r*h,g=0;do{g++,l=e*(c=a/Math.sqrt(1-e*d*d))/(c+(y=s*u+M*d-c*(1-e*d*d))),f=(m=r*(h=1/Math.sqrt(1-l*(2-l)*o*o)))*u-(p=o*(1-l)*h)*d,u=p,d=m}while(f*f>1e-24&&g<30);return{x:_,y:Math.atan(m/Math.abs(p)),z:y}}function ms(t){return 1===t||2===t}function fs(t,e,a){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-a.x,y:a.y},s={x:Number.NaN,y:Number.NaN},n=[];t:for(var r=0;r<t.grids.length;r++){var o=t.grids[r];if(n.push(o.name),o.isNull){s=i;break}if(null!==o.grid)for(var h=o.grid.subgrids,l=0,c=h.length;l<c;l++){var u=h[l],d=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,p=u.ll[0]-d,m=u.ll[1]-d,f=u.ll[0]+(u.lim[0]-1)*u.del[0]+d,g=u.ll[1]+(u.lim[1]-1)*u.del[1]+d;if(!(m>i.y||p>i.x||g<i.y||f<i.x||(s=gs(i,e,u),isNaN(s.x))))break t}else if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*ai+" "+i.y*ai+" tried: '"+n+"'"),-1):(a.x=-s.x,a.y=s.y,0)}function gs(t,e,a){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var s={x:t.x,y:t.y};s.x-=a.ll[0],s.y-=a.ll[1],s.x=Bi(s.x-Math.PI)+Math.PI;var n=_s(s,a);if(e){if(isNaN(n.x))return i;n.x=s.x-n.x,n.y=s.y-n.y;var r,o,h=9;do{if(o=_s(n,a),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r={x:s.x-(o.x+n.x),y:s.y-(o.y+n.y)},n.x+=r.x,n.y+=r.y}while(h--&&Math.abs(r.x)>1e-12&&Math.abs(r.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Bi(n.x+a.ll[0]),i.y=n.y+a.ll[1]}else isNaN(n.x)||(i.x=t.x+n.x,i.y=t.y+n.y);return i}function _s(t,e){var a,i={x:t.x/e.del[0],y:t.y/e.del[1]},s=Math.floor(i.x),n=Math.floor(i.y),r=i.x-1*s,o=i.y-1*n,h={x:Number.NaN,y:Number.NaN};if(s<0||s>=e.lim[0])return h;if(n<0||n>=e.lim[1])return h;a=n*e.lim[0]+s;var l=e.cvs[a][0],c=e.cvs[a][1];a++;var u=e.cvs[a][0],d=e.cvs[a][1];a+=e.lim[0];var p=e.cvs[a][0],m=e.cvs[a][1];a--;var f=e.cvs[a][0],g=e.cvs[a][1],_=r*o,y=r*(1-o),w=(1-r)*(1-o),b=(1-r)*o;return h.x=w*l+y*u+b*f+_*p,h.y=w*c+y*d+b*g+_*m,h}function ys(t,e,a){var i,s,n,r=a.x,o=a.y,h=a.z||0,l={};for(n=0;n<3;n++)if(!e||2!==n||void 0!==a.z)switch(0===n?(i=r,s=-1!=="ew".indexOf(t.axis[n])?"x":"y"):1===n?(i=o,s=-1!=="ns".indexOf(t.axis[n])?"y":"x"):(i=h,s="z"),t.axis[n]){case"e":case"n":l[s]=i;break;case"w":case"s":l[s]=-i;break;case"u":void 0!==a[s]&&(l.z=i);break;case"d":void 0!==a[s]&&(l.z=-i);break;default:return null}return l}function ws(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function bs(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ms(t,e,a,i){var s,n=void 0!==(a=Array.isArray(a)?ws(a):{x:a.x,y:a.y,z:a.z,m:a.m}).z;if(function(t){bs(t.x),bs(t.y)}(a),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(a=Ms(t,s=new us("WGS84"),a,i),t=s),i&&"enu"!==t.axis&&(a=ys(t,!1,a)),"longlat"===t.projName)a={x:a.x*ei,y:a.y*ei,z:a.z||0};else if(t.to_meter&&(a={x:a.x*t.to_meter,y:a.y*t.to_meter,z:a.z||0}),!(a=t.inverse(a)))return;if(t.from_greenwich&&(a.x+=t.from_greenwich),a=function(t,e,a){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return a;if(5===t.datum_type||5===e.datum_type)return a;var i=t.a,s=t.es;if(3===t.datum_type){if(0!==fs(t,!1,a))return;i=$a,s=Ya}var n=e.a,r=e.b,o=e.es;return 3===e.datum_type&&(n=$a,r=6356752.314,o=Ya),s!==o||i!==n||ms(t.datum_type)||ms(e.datum_type)?(a=ds(a,s,i),ms(t.datum_type)&&(a=function(t,e,a){if(1===e)return{x:t.x+a[0],y:t.y+a[1],z:t.z+a[2]};if(2===e){var i=a[0],s=a[1],n=a[2],r=a[3],o=a[4],h=a[5],l=a[6];return{x:l*(t.x-h*t.y+o*t.z)+i,y:l*(h*t.x+t.y-r*t.z)+s,z:l*(-o*t.x+r*t.y+t.z)+n}}}(a,t.datum_type,t.datum_params)),ms(e.datum_type)&&(a=function(t,e,a){if(1===e)return{x:t.x-a[0],y:t.y-a[1],z:t.z-a[2]};if(2===e){var i=a[0],s=a[1],n=a[2],r=a[3],o=a[4],h=a[5],l=a[6],c=(t.x-i)/l,u=(t.y-s)/l,d=(t.z-n)/l;return{x:c+h*u-o*d,y:-h*c+u+r*d,z:o*c-r*u+d}}}(a,e.datum_type,e.datum_params)),a=ps(a,o,n,r),3!==e.datum_type||0===fs(e,!0,a)?a:void 0):a}(t.datum,e.datum,a))return e.from_greenwich&&(a={x:a.x-e.from_greenwich,y:a.y,z:a.z||0}),"longlat"===e.projName?a={x:a.x*ai,y:a.y*ai,z:a.z||0}:(a=e.forward(a),e.to_meter&&(a={x:a.x/e.to_meter,y:a.y/e.to_meter,z:a.z||0})),i&&"enu"!==e.axis?ys(e,!0,a):(a&&!n&&delete a.z,a)}var vs=us("WGS84");function xs(t,e,a,i){var s,n,r;return Array.isArray(a)?(s=Ms(t,e,a,i)||{x:NaN,y:NaN},a.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof s.z?[s.x,s.y,s.z].concat(a.slice(3)):[s.x,s.y,a[2]].concat(a.slice(3)):[s.x,s.y].concat(a.slice(2)):[s.x,s.y]):(n=Ms(t,e,a,i),2===(r=Object.keys(a)).length||r.forEach(function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;n[i]=a[i]}),n)}function Ss(t){return t instanceof us?t:"object"==typeof t&&"oProj"in t?t.oProj:us(t)}var Es="AJSAJS",Ps="AFAFAF",As=65,ks=73,Gs=79;const Cs={forward:Is,inverse:function(t){var e=Ls(Ds(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Ts};function Is(t,e){return e=e||5,function(t,e){var a,i,s,n,r,o,h,l,c,u,d,p="00000"+t.easting,m="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,u=t.northing,d=Rs(t.zoneNumber),a=Math.floor(c/1e5),i=Math.floor(u/1e5)%20,n=Es.charCodeAt(s=d-1),r=Ps.charCodeAt(s),l=!1,(o=n+a-1)>90&&(o=o-90+As-1,l=!0),(o===ks||n<ks&&o>ks||(o>ks||n<ks)&&l)&&o++,(o===Gs||n<Gs&&o>Gs||(o>Gs||n<Gs)&&l)&&++o===ks&&o++,o>90&&(o=o-90+As-1),(h=r+i)>86?(h=h-86+As-1,l=!0):l=!1,(h===ks||r<ks&&h>ks||(h>ks||r<ks)&&l)&&h++,(h===Gs||r<Gs&&h>Gs||(h>Gs||r<Gs)&&l)&&++h===ks&&h++,h>86&&(h=h-86+As-1),String.fromCharCode(o)+String.fromCharCode(h))+p.substr(p.length-5,e)+m.substr(m.length-5,e)}(function(t){var e,a,i,s,n,r,o,h=t.lat,l=t.lon,c=6378137,u=.00669438,d=.9996,p=Ns(h),m=Ns(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60),h>=56&&h<64&&l>=3&&l<12&&(o=32),h>=72&&h<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37)),r=Ns(6*(o-1)-180+3),e=.006739496752268451,a=c/Math.sqrt(1-u*Math.sin(p)*Math.sin(p)),i=Math.tan(p)*Math.tan(p),s=e*Math.cos(p)*Math.cos(p);var f,g,_=d*a*((n=Math.cos(p)*(m-r))+(1-i+s)*n*n*n/6+(5-18*i+i*i+72*s-58*e)*n*n*n*n*n/120)+5e5,y=d*(c*(.9983242984503243*p-.002514607064228144*Math.sin(2*p)+2639046602129982e-21*Math.sin(4*p)-3.418046101696858e-9*Math.sin(6*p))+a*Math.tan(p)*(n*n/2+(5-i+9*s+4*s*s)*n*n*n*n/24+(61-58*i+i*i+600*s-2.2240339282485886)*n*n*n*n*n*n/720));return h<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(_),zoneNumber:o,zoneLetter:(f=h,g="Z",84>=f&&f>=72?g="X":72>f&&f>=64?g="W":64>f&&f>=56?g="V":56>f&&f>=48?g="U":48>f&&f>=40?g="T":40>f&&f>=32?g="S":32>f&&f>=24?g="R":24>f&&f>=16?g="Q":16>f&&f>=8?g="P":8>f&&f>=0?g="N":0>f&&f>=-8?g="M":-8>f&&f>=-16?g="L":-16>f&&f>=-24?g="K":-24>f&&f>=-32?g="J":-32>f&&f>=-40?g="H":-40>f&&f>=-48?g="G":-48>f&&f>=-56?g="F":-56>f&&f>=-64?g="E":-64>f&&f>=-72?g="D":-72>f&&f>=-80&&(g="C"),g)}}({lat:t[1],lon:t[0]}),e)}function Ts(t){var e=Ls(Ds(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ns(t){return t*(Math.PI/180)}function Os(t){return t/Math.PI*180}function Ls(t){var e=t.northing,a=t.easting,i=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var n,r,o,h,l,c,u,d,p,m=.9996,f=6378137,g=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=a-5e5,w=e;i<"N"&&(w-=1e7),u=6*(s-1)-180+3,n=.006739496752268451,p=(d=w/m/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*d)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*d)+151*_*_*_/96*Math.sin(6*d),r=f/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),o=Math.tan(p)*Math.tan(p),h=n*Math.cos(p)*Math.cos(p),l=.99330562*f/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),c=y/(r*m);var b=p-r*Math.tan(p)/l*(c*c/2-(5+3*o+10*h-4*h*h-9*n)*c*c*c*c/24+(61+90*o+298*h+45*o*o-1.6983531815716497-3*h*h)*c*c*c*c*c*c/720);b=Os(b);var M,v=(c-(1+2*o+h)*c*c*c/6+(5-2*h+28*o-3*h*h+8*n+24*o*o)*c*c*c*c*c/120)/Math.cos(p);if(v=u+Os(v),t.accuracy){var x=Ls({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});M={top:x.lat,right:x.lon,bottom:b,left:v}}else M={lat:b,lon:v};return M}function Rs(t){var e=t%6;return 0===e&&(e=6),e}function Ds(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,a=t.length,i=null,s="",n=0;!/[A-Z]/.test(e=t.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+t;s+=e,n++}var r=parseInt(s,10);if(0===n||n+3>a)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(n++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;i=t.substring(n,n+=2);for(var h=Rs(r),l=function(t,e){for(var a=Es.charCodeAt(e-1),i=1e5,s=!1;a!==t.charCodeAt(0);){if(++a===ks&&a++,a===Gs&&a++,a>90){if(s)throw"Bad character: "+t;a=As,s=!0}i+=1e5}return i}(i.charAt(0),h),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var a=Ps.charCodeAt(e-1),i=0,s=!1;a!==t.charCodeAt(0);){if(++a===ks&&a++,a===Gs&&a++,a>86){if(s)throw"Bad character: "+t;a=As,s=!0}i+=1e5}return i}(i.charAt(1),h);c<zs(o);)c+=2e6;var u=a-n;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,p,m,f=u/2,g=0,_=0;return f>0&&(d=1e5/Math.pow(10,f),p=t.substring(n,n+f),g=parseFloat(p)*d,m=t.substring(n+f),_=parseFloat(m)*d),{easting:g+l,northing:_+c,zoneLetter:o,zoneNumber:r,accuracy:d}}function zs(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Bs(t,e,a){if(!(this instanceof Bs))return new Bs(t,e,a);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=t,this.y=e,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Bs.fromMGRS=function(t){return new Bs(Ts(t))},Bs.prototype.toMGRS=function(t){return Is([this.x,this.y],t)};const Fs=Bs;var Us=.046875,js=.01953125,qs=.01068115234375;function Zs(t){var e=[];e[0]=1-t*(.25+t*(Us+t*(js+t*qs))),e[1]=t*(.75-t*(Us+t*(js+t*qs)));var a=t*t;return e[2]=a*(.46875-t*(.013020833333333334+.007120768229166667*t)),a*=t,e[3]=a*(.3645833333333333-.005696614583333333*t),e[4]=a*t*.3076171875,e}function Hs(t,e,a,i){return a*=e,e*=e,i[0]*t-a*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}function Ws(t,e,a){for(var i=1/(1-e),s=t,n=20;n;--n){var r=Math.sin(s),o=1-e*r*r;if(s-=o=(Hs(s,r,Math.cos(s),a)-t)*(o*Math.sqrt(o))*i,Math.abs(o)<ti)return s}return s}const Vs={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Zs(this.es),this.ml0=Hs(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,a,i,s=t.x,n=t.y,r=Bi(s-this.long0),o=Math.sin(n),h=Math.cos(n);if(this.es){var l=h*r,c=Math.pow(l,2),u=this.ep2*Math.pow(h,2),d=Math.pow(u,2),p=Math.abs(h)>ti?Math.tan(n):0,m=Math.pow(p,2),f=Math.pow(m,2);e=1-this.es*Math.pow(o,2),l/=Math.sqrt(e);var g=Hs(n,o,h,this.en);a=this.a*(this.k0*l*(1+c/6*(1-m+u+c/20*(5-18*m+f+14*u-58*m*u+c/42*(61+179*f-f*m-479*m)))))+this.x0,i=this.a*(this.k0*(g-this.ml0+o*r*l/2*(1+c/12*(5-m+9*u+4*d+c/30*(61+f-58*m+270*u-330*m*u+c/56*(1385+543*f-f*m-3111*m))))))+this.y0}else{var _=h*Math.sin(r);if(Math.abs(Math.abs(_)-1)<ti)return 93;if(a=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,i=h*Math.cos(r)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(i))>=1){if(_-1>ti)return 93;i=0}else i=Math.acos(i);n<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=a,t.y=i,t},inverse:function(t){var e,a,i,s,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(this.es)if(a=Ws(e=this.ml0+r/this.k0,this.es,this.en),Math.abs(a)<Qa){var o=Math.sin(a),h=Math.cos(a),l=Math.abs(h)>ti?Math.tan(a):0,c=this.ep2*Math.pow(h,2),u=Math.pow(c,2),d=Math.pow(l,2),p=Math.pow(d,2);e=1-this.es*Math.pow(o,2);var m=n*Math.sqrt(e)/this.k0,f=Math.pow(m,2);i=a-(e*=l)*f/(1-this.es)*.5*(1-f/12*(5+3*d-9*c*d+c-4*u-f/30*(61+90*d-252*c*d+45*p+46*c-f/56*(1385+3633*d+4095*p+1574*p*d)))),s=Bi(this.long0+m*(1-f/6*(1+2*d+c-f/20*(5+28*d+24*p+8*c*d+6*c-f/42*(61+662*d+1320*p+720*p*d))))/h)}else i=Qa*zi(r),s=0;else{var g=Math.exp(n/this.k0),_=.5*(g-1/g),y=this.lat0+r/this.k0,w=Math.cos(y);e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(_,2))),i=Math.asin(e),r<0&&(i=-i),s=0===_&&0===w?0:Bi(Math.atan2(_,w)+this.long0)}return t.x=s,t.y=i,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Xs(t){var e=Math.exp(t);return(e-1/e)/2}function Ks(t,e){t=Math.abs(t),e=Math.abs(e);var a=Math.max(t,e),i=Math.min(t,e)/(a||1);return a*Math.sqrt(1+Math.pow(i,2))}function $s(t,e){for(var a,i=2*Math.cos(2*e),s=t.length-1,n=t[s],r=0;--s>=0;)a=i*n-r+t[s],r=n,n=a;return e+a*Math.sin(2*e)}function Ys(t,e,a){for(var i,s,n=Math.sin(e),r=Math.cos(e),o=Xs(a),h=function(t){var e=Math.exp(t);return(e+1/e)/2}(a),l=2*r*h,c=-2*n*o,u=t.length-1,d=t[u],p=0,m=0,f=0;--u>=0;)i=m,s=p,d=l*(m=d)-i-c*(p=f)+t[u],f=c*m-s+l*p;return[(l=n*h)*d-(c=r*o)*f,l*f+c*d]}const Js={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Vs.init.apply(this),this.forward=Vs.forward,this.inverse=Vs.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),a=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),a*=e,this.cgb[1]=a*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=a*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),a*=e,this.cgb[2]=a*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=a*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),a*=e,this.cgb[3]=a*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=a*(1237/630+e*(e*(-24832/14175)-2.4)),a*=e,this.cgb[4]=a*(4174/315+e*(-144838/6237)),this.cbg[4]=a*(-734/315+e*(109598/31185)),a*=e,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=a*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=a*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),a*=e,this.utg[2]=a*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=a*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),a*=e,this.utg[3]=a*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=a*(49561/161280+e*(-179/168+e*(6601661/7257600))),a*=e,this.utg[4]=a*(-4583/161280+e*(108847/3991680)),this.gtu[4]=a*(34729/80640+e*(-3418889/1995840)),a*=e,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=.6650675310896665*a;var i=$s(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var a,i=2*Math.cos(e),s=t.length-1,n=t[s],r=0;--s>=0;)a=i*n-r+t[s],r=n,n=a;return Math.sin(e)*a}(this.gtu,2*i))},forward:function(t){var e=Bi(t.x-this.long0),a=t.y;a=$s(this.cbg,a);var i=Math.sin(a),s=Math.cos(a),n=Math.sin(e),r=Math.cos(e);a=Math.atan2(i,r*s),e=Math.atan2(n*s,Ks(i,s*r)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,a=e-1;return 0===a?t:t*Math.log(e)/a}(e*(1+e/(Ks(1,e)+1))),t<0?-e:e}(Math.tan(e));var o,h,l=Ys(this.gtu,2*a,2*e);return a+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(o=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*a+this.Zb)+this.y0):(o=1/0,h=1/0),t.x=o,t.y=h,t},inverse:function(t){var e,a,i=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var n=Ys(this.utg,2*s,2*i);s+=n[0],i+=n[1],i=Math.atan(Xs(i));var r=Math.sin(s),o=Math.cos(s),h=Math.sin(i),l=Math.cos(i);s=Math.atan2(r*l,Ks(h,l*o)),e=Bi((i=Math.atan2(h,l*o))+this.long0),a=$s(this.cgb,s)}else e=1/0,a=1/0;return t.x=e,t.y=a,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},Qs={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Bi(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*ei,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Js.init.apply(this),this.forward=Js.forward,this.inverse=Js.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function tn(t,e){return Math.pow((1-t)/(1+t),e)}const en={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ii)/(Math.pow(Math.tan(.5*this.lat0+ii),this.C)*tn(this.e*t,this.ratexp))},forward:function(t){var e=t.x,a=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+ii),this.C)*tn(this.e*Math.sin(a),this.ratexp))-Qa,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,a=t.y,i=Math.pow(Math.tan(.5*a+ii)/this.K,1/this.C),s=20;s>0&&(a=2*Math.atan(i*tn(this.e*Math.sin(t.y),-.5*this.e))-Qa,!(Math.abs(a-t.y)<1e-14));--s)t.y=a;return s?(t.x=e,t.y=a,t):null},names:["gauss"]},an={init:function(){en.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,a,i,s;return t.x=Bi(t.x-this.long0),en.forward.apply(this,[t]),e=Math.sin(t.y),a=Math.cos(t.y),i=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*a*i),t.x=s*a*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*a*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,a,i,s,n;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,n=Ks(t.x,t.y)){var r=2*Math.atan2(n,this.R2);e=Math.sin(r),a=Math.cos(r),s=Math.asin(a*this.sinc0+t.y*e*this.cosc0/n),i=Math.atan2(t.x*e,n*this.cosc0*a-t.y*this.sinc0*e)}else s=this.phic0,i=0;return t.x=i,t.y=s,en.inverse.apply(this,[t]),t.x=Bi(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};function sn(t,e,a){return e*=a,Math.tan(.5*(Qa+t))*Math.pow((1-e)/(1+e),.5*a)}const nn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ti&&(this.k0=.5*(1+zi(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ti&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ti&&Math.abs(Math.cos(this.lat_ts))>ti&&(this.k0=.5*this.cons*Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Di(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(sn(this.lat0,this.sinlat0,this.e))-Qa,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,a,i,s,n,r,o=t.x,h=t.y,l=Math.sin(h),c=Math.cos(h),u=Bi(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=ti&&Math.abs(h+this.lat0)<=ti?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(u))+this.y0,t):(a=2*Math.atan(sn(h,l,this.e))-Qa,s=Math.cos(a),i=Math.sin(a),Math.abs(this.coslat0)<=ti?(n=Fi(this.e,h*this.con,this.con*l),r=2*this.a*this.k0*n/this.cons,t.x=this.x0+r*Math.sin(o-this.long0),t.y=this.y0-this.con*r*Math.cos(o-this.long0),t):(Math.abs(this.sinlat0)<ti?(e=2*this.a*this.k0/(1+s*Math.cos(u)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*s*Math.cos(u))),t.y=e*(this.cosX0*i-this.sinX0*s*Math.cos(u))+this.y0),t.x=e*s*Math.sin(u)+this.x0,t))},inverse:function(t){var e,a,i,s,n;t.x-=this.x0,t.y-=this.y0;var r=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,a=this.lat0,r<=ti?(t.x=e,t.y=a,t):(a=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/r),e=Math.abs(this.coslat0)<ti?this.lat0>0?Bi(this.long0+Math.atan2(t.x,-1*t.y)):Bi(this.long0+Math.atan2(t.x,t.y)):Bi(this.long0+Math.atan2(t.x*Math.sin(o),r*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=a,t)}if(Math.abs(this.coslat0)<=ti){if(r<=ti)return a=this.lat0,e=this.long0,t.x=e,t.y=a,t;t.x*=this.con,t.y*=this.con,i=r*this.cons/(2*this.a*this.k0),a=this.con*Ui(this.e,i),e=this.con*Bi(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=ti?n=this.X0:(n=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/r),e=Bi(this.long0+Math.atan2(t.x*Math.sin(s),r*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),a=-1*Ui(this.e,Math.tan(.5*(Qa+n)));return t.x=e,t.y=a,t},names:["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],ssfn_:sn},rn={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),a=this.a,i=1/this.rf,s=2*i-Math.pow(i,2),n=this.e=Math.sqrt(s);this.R=this.k0*a*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+n*e)/(1-n*e));this.K=r-this.alpha*o+this.alpha*n/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+a)+this.K,s=2*(Math.atan(Math.exp(i))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*r+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,a=t.y-this.y0,i=e/this.R,s=2*(Math.atan(Math.exp(a/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+r/this.alpha,h=0,l=n,c=-1e3,u=0;Math.abs(l-c)>1e-7;){if(++u>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=l,t},names:["somerc"]};var on=1e-7;const hn={init:function(){var t,e,a,i,s,n,r,o,h,l,c,u,d,p,m=0,f=0,g=0,_=0,y=0,w=0,b=0;this.no_off=(d=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],p="object"==typeof(u=this).projName?Object.keys(u.projName)[0]:u.projName,"no_uoff"in u||"no_off"in u||-1!==d.indexOf(p)||-1!==d.indexOf(Vi(p))),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),M&&(b=this.alpha),v&&(m=this.rectified_grid_angle),M||v)f=this.longc;else if(g=this.long1,y=this.lat1,_=this.long2,w=this.lat2,Math.abs(y-w)<=on||(t=Math.abs(y))<=on||Math.abs(t-Qa)<=on||Math.abs(Math.abs(this.lat0)-Qa)<=on||Math.abs(Math.abs(w)-Qa)<=on)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>ti?(o=Math.sin(this.lat0),a=Math.cos(this.lat0),t=1-this.es*o*o,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,(s=(i=this.B*e/(a*Math.sqrt(t)))*i-1)<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=i,this.E*=Math.pow(Fi(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=s=1),M||v?(M?(c=Math.asin(Math.sin(b)/i),v||(m=b)):(c=m,b=Math.asin(i*Math.sin(c))),this.lam0=f-Math.asin(.5*(s-1/s)*Math.tan(c))/this.B):(n=Math.pow(Fi(this.e,y,Math.sin(y)),this.B),r=Math.pow(Fi(this.e,w,Math.sin(w)),this.B),s=this.E/n,h=(r-n)/(r+n),l=((l=this.E*this.E)-r*n)/(l+r*n),(t=g-_)<-Math.PI?_-=si:t>Math.PI&&(_+=si),this.lam0=Bi(.5*(g+_)-Math.atan(l*Math.tan(.5*this.B*(g-_))/h)/this.B),c=Math.atan(2*Math.sin(this.B*Bi(g-this.lam0))/(s-1/s)),m=b=Math.asin(i*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(m),this.cosrot=Math.cos(m),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(ii-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(ii+s))},forward:function(t){var e,a,i,s,n,r,o,h,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Qa)>ti){if(e=.5*((n=this.E/Math.pow(Fi(this.e,t.y,Math.sin(t.y)),this.B))-(r=1/n)),a=.5*(n+r),s=Math.sin(this.B*t.x),i=(e*this.singam-s*this.cosgam)/a,Math.abs(Math.abs(i)-1)<ti)throw new Error;h=.5*this.ArB*Math.log((1-i)/(1+i)),r=Math.cos(this.B*t.x),o=Math.abs(r)<on?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+s*this.singam,r)}else h=t.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*t.y;return this.no_rot?(l.x=o,l.y=h):(o-=this.u_0,l.x=h*this.cosrot+o*this.sinrot,l.y=o*this.cosrot-h*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,a,i,s,n,r,o,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(a=t.y,e=t.x):(a=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),s=.5*((i=Math.exp(-this.BrA*a))-1/i),n=.5*(i+1/i),o=((r=Math.sin(this.BrA*e))*this.cosgam+s*this.singam)/n,Math.abs(Math.abs(o)-1)<ti)h.x=0,h.y=o<0?-Qa:Qa;else{if(h.y=this.E/Math.sqrt((1+o)/(1-o)),h.y=Ui(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(s*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},ln={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ti)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),a=Math.cos(this.lat1),i=Di(this.e,e,a),s=Fi(this.e,this.lat1,e),n=Math.sin(this.lat2),r=Math.cos(this.lat2),o=Di(this.e,n,r),h=Fi(this.e,this.lat2,n),l=Math.abs(Math.abs(this.lat0)-Qa)<ti?0:Fi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ti?this.ns=Math.log(i/o)/Math.log(s/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,a=t.y;Math.abs(2*Math.abs(a)-Math.PI)<=ti&&(a=zi(a)*(Qa-2e-10));var i,s,n=Math.abs(Math.abs(a)-Qa);if(n>ti)i=Fi(this.e,a,Math.sin(a)),s=this.a*this.f0*Math.pow(i,this.ns);else{if((n=a*this.ns)<=0)return null;s=0}var r=this.ns*Bi(e-this.long0);return t.x=this.k0*(s*Math.sin(r))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,t},inverse:function(t){var e,a,i,s,n,r=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+o*o),a=1):(e=-Math.sqrt(r*r+o*o),a=-1);var h=0;if(0!==e&&(h=Math.atan2(a*r,a*o)),0!==e||this.ns>0){if(a=1/this.ns,i=Math.pow(e/(this.a*this.f0),a),-9999===(s=Ui(this.e,i)))return null}else s=-Qa;return n=Bi(h/this.ns+this.long0),t.x=n,t.y=s,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},cn={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,a,i,s,n,r,o,h=t.x,l=t.y,c=Bi(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(i)),n=Math.asin(Math.cos(a)*Math.sin(i)/Math.cos(s)),r=this.n*n,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=o*Math.cos(r)/1,t.x=o*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,a,i,s,n,r,o,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),n=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/n,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),a=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(e)),t.x=this.long0-a/this.alfa,r=e,o=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(o=1),r=t.y,l+=1}while(0===o&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function un(t,e,a,i,s){return t*s-e*Math.sin(2*s)+a*Math.sin(4*s)-i*Math.sin(6*s)}function dn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function pn(t){return.375*t*(1+.25*t*(1+.46875*t))}function mn(t){return.05859375*t*t*(1+.75*t)}function fn(t){return t*t*t*(35/3072)}function gn(t,e,a){var i=e*a;return t/Math.sqrt(1-i*i)}function _n(t){return Math.abs(t)<Qa?t:t-zi(t)*Math.PI}function yn(t,e,a,i,s){var n,r;n=t/e;for(var o=0;o<15;o++)if(n+=r=(t-(e*n-a*Math.sin(2*n)+i*Math.sin(4*n)-s*Math.sin(6*n)))/(e-2*a*Math.cos(2*n)+4*i*Math.cos(4*n)-6*s*Math.cos(6*n)),Math.abs(r)<=1e-10)return n;return NaN}const wn={init:function(){this.sphere||(this.e0=dn(this.es),this.e1=pn(this.es),this.e2=mn(this.es),this.e3=fn(this.es),this.ml0=this.a*un(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,a,i=t.x,s=t.y;if(i=Bi(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(i)),a=this.a*(Math.atan2(Math.tan(s),Math.cos(i))-this.lat0);else{var n=Math.sin(s),r=Math.cos(s),o=gn(this.a,this.e,n),h=Math.tan(s)*Math.tan(s),l=i*Math.cos(s),c=l*l,u=this.es*r*r/(1-this.es);e=o*l*(1-c*h*(1/6-(8-h+8*u)*c/120)),a=this.a*un(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+o*n/r*c*(.5+(5-h+6*u)*c/24)}return t.x=e+this.x0,t.y=a+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,a,i=t.x/this.a,s=t.y/this.a;if(this.sphere){var n=s+this.lat0;e=Math.asin(Math.sin(n)*Math.cos(i)),a=Math.atan2(Math.tan(i),Math.cos(n))}else{var r=yn(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-Qa)<=ti)return t.x=this.long0,t.y=Qa,s<0&&(t.y*=-1),t;var o=gn(this.a,this.e,Math.sin(r)),h=o*o*o/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(r),2),c=i*this.a/o,u=c*c;e=r-o*Math.tan(r)/h*c*c*(.5-(1+3*l)*c*c/24),a=c*(1-u*(l/3+(1+3*l)*l*u/15))/Math.cos(r)}return t.x=Bi(a+this.long0),t.y=_n(e),t},names:["Cassini","Cassini_Soldner","cass"]};function bn(t,e){var a;return t>1e-7?(1-t*t)*(e/(1-(a=t*e)*a)-.5/t*Math.log((1-a)/(1+a))):2*e}const Mn={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Qa)<ti?this.mode=this.lat0<0?1:2:Math.abs(e)<ti?this.mode=3:this.mode=4,this.es>0)switch(this.qp=bn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,a=[];return a[0]=.3333333333333333*t,e=t*t,a[0]+=.17222222222222222*e,a[1]=.06388888888888888*e,e*=t,a[0]+=.10257936507936508*e,a[1]+=.0664021164021164*e,a[2]=.016415012942191543*e,a}(this.es),this.mode){case 2:case 1:this.dd=1;break;case 3:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case 4:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=bn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else 4===this.mode&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,a,i,s,n,r,o,h,l,c,u=t.x,d=t.y;if(u=Bi(u-this.long0),this.sphere){if(n=Math.sin(d),c=Math.cos(d),i=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((a=this.mode===this.EQUIT?1+c*i:1+this.sinph0*n+this.cosph0*c*i)<=ti)return null;e=(a=Math.sqrt(2/a))*c*Math.sin(u),a*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(d+this.lat0)<ti)return null;a=ii-.5*d,e=(a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)))*Math.sin(u),a*=i}}else{switch(o=0,h=0,l=0,i=Math.cos(u),s=Math.sin(u),n=Math.sin(d),r=bn(this.e,n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=r/this.qp,h=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:l=1+this.sinb1*o+this.cosb1*h*i;break;case this.EQUIT:l=1+h*i;break;case this.N_POLE:l=Qa+d,r=this.qp-r;break;case this.S_POLE:l=d-Qa,r=this.qp+r}if(Math.abs(l)<ti)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),a=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*o-this.sinb1*h*i):(l=Math.sqrt(2/(1+h*i)))*o*this.ymf,e=this.xmf*l*h*s;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(l=Math.sqrt(r))*s,a=i*(this.mode===this.S_POLE?l:-l)):e=a=0}}return t.x=this.a*e+this.x0,t.y=this.a*a+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,a,i,s,n,r,o,h,l,c,u=t.x/this.a,d=t.y/this.a;if(this.sphere){var p,m=0,f=0;if((a=.5*(p=Math.sqrt(u*u+d*d)))>1)return null;switch(a=2*Math.asin(a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(a),m=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(p)<=ti?0:Math.asin(d*f/p),u*=f,d=m*p;break;case this.OBLIQ:a=Math.abs(p)<=ti?this.lat0:Math.asin(m*this.sinph0+d*f*this.cosph0/p),u*=f*this.cosph0,d=(m-Math.sin(a)*this.sinph0)*p;break;case this.N_POLE:d=-d,a=Qa-a;break;case this.S_POLE:a-=Qa}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,d):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,d*=this.dd,(r=Math.sqrt(u*u+d*d))<ti)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*r/this.rq),i=Math.cos(s),u*=s=Math.sin(s),this.mode===this.OBLIQ?(o=i*this.sinb1+d*s*this.cosb1/r,n=this.qp*o,d=r*this.cosb1*i-d*this.sinb1*s):(o=d*s/r,n=this.qp*o,d=r*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(n=u*u+d*d))return t.x=this.long0,t.y=this.lat0,t;o=1-n/this.qp,this.mode===this.S_POLE&&(o=-o)}e=Math.atan2(u,d),c=(h=Math.asin(o))+h,a=h+(l=this.apa)[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=Bi(this.long0+e),t.y=a,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function vn(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const xn={init:function(){Math.abs(this.lat1+this.lat2)<ti||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Di(this.e3,this.sin_po,this.cos_po),this.qs1=bn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Di(this.e3,this.sin_po,this.cos_po),this.qs2=bn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=bn(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ti?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,a=t.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var i=bn(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,n=this.ns0*Bi(e-this.long0),r=s*Math.sin(n)+this.x0,o=this.rh-s*Math.cos(n)+this.y0;return t.x=r,t.y=o,t},inverse:function(t){var e,a,i,s,n,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),s=0,0!==e&&(s=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-i*i)/(2*this.ns0)):(a=(this.c-i*i)/this.ns0,r=this.phi1z(this.e3,a)),n=Bi(s/this.ns0+this.long0),t.x=n,t.y=r,t},names:["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],phi1z:function(t,e){var a,i,s,n,r=vn(.5*e);if(t<ti)return r;for(var o=t*t,h=1;h<=25;h++)if(r+=n=.5*(s=1-(i=t*(a=Math.sin(r)))*i)*s/Math.cos(r)*(e/(1-o)-a/s+.5/t*Math.log((1-i)/(1+i))),Math.abs(n)<=1e-7)return r;return null}},Sn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,a,i,s,n,r,o,h=t.x,l=t.y;return i=Bi(h-this.long0),e=Math.sin(l),a=Math.cos(l),s=Math.cos(i),(n=this.sin_p14*e+this.cos_p14*a*s)>0||Math.abs(n)<=ti?(r=this.x0+1*this.a*a*Math.sin(i)/n,o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*a*s)/n):(r=this.x0+this.infinity_dist*a*Math.sin(i),o=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*a*s)),t.x=r,t.y=o,t},inverse:function(t){var e,a,i,s,n,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),a=Math.sin(s),r=vn((i=Math.cos(s))*this.sin_p14+t.y*a*this.cos_p14/e),n=Math.atan2(t.x*a,e*this.cos_p14*i-t.y*this.sin_p14*a),n=Bi(this.long0+n)):(r=this.phic0,n=0),t.x=n,t.y=r,t},names:["gnom"]},En={init:function(){this.sphere||(this.k0=Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,a,i=t.x,s=t.y,n=Bi(i-this.long0);if(this.sphere)e=this.x0+this.a*n*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var r=bn(this.e,Math.sin(s));e=this.x0+this.a*this.k0*n,a=this.y0+this.a*r*.5/this.k0}return t.x=e,t.y=a,t},inverse:function(t){var e,a;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Bi(this.long0+t.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(a=function(t,e){var a=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-a)<1e-6)return e<0?-1*Qa:Qa;for(var i,s,n,r,o=Math.asin(.5*e),h=0;h<30;h++)if(s=Math.sin(o),n=Math.cos(o),r=t*s,o+=i=Math.pow(1-r*r,2)/(2*n)*(e/(1-t*t)-s/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),Math.abs(i)<=1e-10)return o;return NaN}(this.e,2*t.y*this.k0/this.a),e=Bi(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=a,t},names:["cea"]},Pn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,a=t.y,i=Bi(e-this.long0),s=_n(a-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var e=t.x,a=t.y;return t.x=Bi(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=_n(this.lat0+(a-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"]},An={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=dn(this.es),this.e1=pn(this.es),this.e2=mn(this.es),this.e3=fn(this.es),this.ml0=this.a*un(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,a,i,s=t.x,n=t.y,r=Bi(s-this.long0);if(i=r*Math.sin(n),this.sphere)Math.abs(n)<=ti?(e=this.a*r,a=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(n),a=this.a*(_n(n-this.lat0)+(1-Math.cos(i))/Math.tan(n)));else if(Math.abs(n)<=ti)e=this.a*r,a=-1*this.ml0;else{var o=gn(this.a,this.e,Math.sin(n))/Math.tan(n);e=o*Math.sin(i),a=this.a*un(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*(1-Math.cos(i))}return t.x=e+this.x0,t.y=a+this.y0,t},inverse:function(t){var e,a,i,s,n,r,o,h,l;if(i=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=ti)e=Bi(i/this.a+this.long0),a=0;else{var c;for(r=this.lat0+s/this.a,o=i*i/this.a/this.a+r*r,h=r,n=20;n;--n)if(h+=l=-1*(r*(h*(c=Math.tan(h))+1)-h-.5*(h*h+o)*c)/((h-r)/c-1),Math.abs(l)<=ti){a=h;break}e=Bi(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(a))}else if(Math.abs(s+this.ml0)<=ti)a=0,e=Bi(this.long0+i/this.a);else{var u,d,p,m,f;for(r=(this.ml0+s)/this.a,o=i*i/this.a/this.a+r*r,h=r,n=20;n;--n)if(f=this.e*Math.sin(h),u=Math.sqrt(1-f*f)*Math.tan(h),d=this.a*un(this.e0,this.e1,this.e2,this.e3,h),p=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=l=(r*(u*(m=d/this.a)+1)-m-.5*u*(m*m+o))/(this.es*Math.sin(2*h)*(m*m+o-2*r*m)/(4*u)+(r-m)*(u*p-2/Math.sin(2*h))-p),Math.abs(l)<=ti){a=h;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),e=Bi(this.long0+Math.asin(i*u/this.a)/Math.sin(a))}return t.x=e,t.y=a,t},names:["Polyconic","American_Polyconic","poly"]},kn={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,a=t.x,i=t.y-this.lat0,s=a-this.long0,n=i/Ja*1e-5,r=s,o=1,h=0;for(e=1;e<=10;e++)o*=n,h+=this.A[e]*o;var l,c=h,u=r,d=1,p=0,m=0,f=0;for(e=1;e<=6;e++)l=p*c+d*u,d=d*c-p*u,p=l,m=m+this.B_re[e]*d-this.B_im[e]*p,f=f+this.B_im[e]*d+this.B_re[e]*p;return t.x=f*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var e,a,i=t.x,s=t.y,n=i-this.x0,r=(s-this.y0)/this.a,o=n/this.a,h=1,l=0,c=0,u=0;for(e=1;e<=6;e++)a=l*r+h*o,h=h*r-l*o,l=a,c=c+this.C_re[e]*h-this.C_im[e]*l,u=u+this.C_im[e]*h+this.C_re[e]*l;for(var d=0;d<this.iterations;d++){var p,m=c,f=u,g=r,_=o;for(e=2;e<=6;e++)p=f*c+m*u,m=m*c-f*u,f=p,g+=(e-1)*(this.B_re[e]*m-this.B_im[e]*f),_+=(e-1)*(this.B_im[e]*m+this.B_re[e]*f);m=1,f=0;var y=this.B_re[1],w=this.B_im[1];for(e=2;e<=6;e++)p=f*c+m*u,m=m*c-f*u,f=p,y+=e*(this.B_re[e]*m-this.B_im[e]*f),w+=e*(this.B_im[e]*m+this.B_re[e]*f);var b=y*y+w*w;c=(g*y+_*w)/b,u=(_*y-g*w)/b}var M=c,v=u,x=1,S=0;for(e=1;e<=9;e++)x*=M,S+=this.D[e]*x;var E=this.lat0+S*Ja*1e5,P=this.long0+v;return t.x=P,t.y=E,t},names:["New_Zealand_Map_Grid","nzmg"]},Gn={init:function(){},forward:function(t){var e=t.x,a=t.y,i=Bi(e-this.long0),s=this.x0+this.a*i,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return t.x=s,t.y=n,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Bi(this.long0+t.x/this.a),a=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=a,t},names:["Miller_Cylindrical","mill"]},Cn={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Zs(this.es)},forward:function(t){var e,a,i=t.x,s=t.y;if(i=Bi(i-this.long0),this.sphere){if(this.m)for(var n=this.n*Math.sin(s),r=20;r;--r){var o=(this.m*s+Math.sin(s)-n)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<ti)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*i*(this.m+Math.cos(s)),a=this.a*this.C_y*s}else{var h=Math.sin(s),l=Math.cos(s);a=this.a*Hs(s,h,l,this.en),e=this.a*i*l/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=a,t},inverse:function(t){var e,a,i;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a/=this.C_x*(this.m+Math.cos(e)),this.m?e=vn((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=vn(Math.sin(e)/this.n)),a=Bi(a+this.long0),e=_n(e)):(e=Ws(t.y/this.a,this.es,this.en),(i=Math.abs(e))<Qa?(i=Math.sin(e),a=Bi(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-ti<Qa&&(a=this.long0)),t.x=a,t.y=e,t},names:["Sinusoidal","sinu"]},In={init:function(){},forward:function(t){for(var e=t.x,a=t.y,i=Bi(e-this.long0),s=a,n=Math.PI*Math.sin(a);;){var r=-(s+Math.sin(s)-n)/(1+Math.cos(s));if(s+=r,Math.abs(r)<ti)break}s/=2,Math.PI/2-Math.abs(a)<ti&&(i=0);var o=.900316316158*this.a*i*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=o,t.y=h,t},inverse:function(t){var e,a;t.x-=this.x0,t.y-=this.y0,a=t.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),e=Math.asin(a);var i=Bi(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),a=(2*e+Math.sin(2*e))/Math.PI,Math.abs(a)>1&&(a=1);var s=Math.asin(a);return t.x=i,t.y=s,t},names:["Mollweide","moll"]},Tn={init:function(){Math.abs(this.lat1+this.lat2)<ti||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=dn(this.es),this.e1=pn(this.es),this.e2=mn(this.es),this.e3=fn(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Di(this.e,this.sin_phi,this.cos_phi),this.ml1=un(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ti?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Di(this.e,this.sin_phi,this.cos_phi),this.ml2=un(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=un(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,a=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var s=un(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-s)}var n=this.ns*Bi(a-this.long0),r=this.x0+e*Math.sin(n),o=this.y0+this.rh-e*Math.cos(n);return t.x=r,t.y=o,t},inverse:function(t){var e,a,i,s;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(a=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(a=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var n=0;return 0!==a&&(n=Math.atan2(e*t.x,e*t.y)),this.sphere?(s=Bi(this.long0+n/this.ns),i=_n(this.g-a/this.a),t.x=s,t.y=i,t):(i=yn(this.g-a/this.a,this.e0,this.e1,this.e2,this.e3),s=Bi(this.long0+n/this.ns),t.x=s,t.y=i,t)},names:["Equidistant_Conic","eqdc"]},Nn={init:function(){this.R=this.a},forward:function(t){var e,a,i=t.x,s=t.y,n=Bi(i-this.long0);Math.abs(s)<=ti&&(e=this.x0+this.R*n,a=this.y0);var r=vn(2*Math.abs(s/Math.PI));(Math.abs(n)<=ti||Math.abs(Math.abs(s)-Qa)<=ti)&&(e=this.x0,a=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/n-n/Math.PI),h=o*o,l=Math.sin(r),c=Math.cos(r),u=c/(l+c-1),d=u*u,p=u*(2/l-1),m=p*p,f=Math.PI*this.R*(o*(u-m)+Math.sqrt(h*(u-m)*(u-m)-(m+h)*(d-m)))/(m+h);n<0&&(f=-f),e=this.x0+f;var g=h+u;return f=Math.PI*this.R*(p*g-o*Math.sqrt((m+h)*(h+1)-g*g))/(m+h),a=s>=0?this.y0+f:this.y0-f,t.x=e,t.y=a,t},inverse:function(t){var e,a,i,s,n,r,o,h,l,c,u,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,n=(i=t.x/u)*i+(s=t.y/u)*s,u=3*(s*s/(h=-2*(r=-Math.abs(s)*(1+n))+1+2*s*s+n*n)+(2*(o=r-2*s*s+i*i)*o*o/h/h/h-9*r*o/h/h)/27)/(l=(r-o*o/3/h)/h)/(c=2*Math.sqrt(-l/3)),Math.abs(u)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,a=t.y>=0?(-c*Math.cos(d+Math.PI/3)-o/3/h)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-o/3/h)*Math.PI,e=Math.abs(i)<ti?this.long0:Bi(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(i*i-s*s)+n*n))/2/i),t.x=e,t.y=a,t},names:["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"]},On={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))},forward:function(t){var e,a,i,s,n,r,o,h,l,c,u,d=t.x,p=t.y,m=Math.sin(t.y),f=Math.cos(t.y),g=Bi(d-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=ti?(t.x=this.x0+this.a*(Qa-p)*Math.sin(g),t.y=this.y0-this.a*(Qa-p)*Math.cos(g),t):Math.abs(this.sin_p12+1)<=ti?(t.x=this.x0+this.a*(Qa+p)*Math.sin(g),t.y=this.y0+this.a*(Qa+p)*Math.cos(g),t):(l=this.sin_p12*m+this.cos_p12*f*Math.cos(g),h=(o=Math.acos(l))?o/Math.sin(o):1,t.x=this.x0+this.a*h*f*Math.sin(g),t.y=this.y0+this.a*h*(this.cos_p12*m-this.sin_p12*f*Math.cos(g)),t):(e=dn(this.es),a=pn(this.es),i=mn(this.es),s=fn(this.es),Math.abs(this.sin_p12-1)<=ti?(n=this.a*un(e,a,i,s,Qa),r=this.a*un(e,a,i,s,p),t.x=this.x0+(n-r)*Math.sin(g),t.y=this.y0-(n-r)*Math.cos(g),t):Math.abs(this.sin_p12+1)<=ti?(n=this.a*un(e,a,i,s,Qa),r=this.a*un(e,a,i,s,p),t.x=this.x0+(n+r)*Math.sin(g),t.y=this.y0+(n+r)*Math.cos(g),t):Math.abs(d)<ti&&Math.abs(p-this.lat0)<ti?(t.x=t.y=0,t):(c=function(t,e,a,i,s,n){const r=i-e,o=Math.atan((1-n)*Math.tan(t)),h=Math.atan((1-n)*Math.tan(a)),l=Math.sin(o),c=Math.cos(o),u=Math.sin(h),d=Math.cos(h);let p,m,f,g,_,y,w,b,M,v,x,S,E,P,A,k=r,G=100;do{if(m=Math.sin(k),f=Math.cos(k),g=Math.sqrt(d*m*(d*m)+(c*u-l*d*f)*(c*u-l*d*f)),0===g)return{azi1:0,s12:0};_=l*u+c*d*f,y=Math.atan2(g,_),w=c*d*m/g,b=1-w*w,M=0!==b?_-2*l*u/b:0,v=n/16*b*(4+n*(4-3*b)),p=k,k=r+(1-v)*n*w*(y+v*g*(M+v*_*(2*M*M-1)))}while(Math.abs(k-p)>1e-12&&--G>0);return 0===G?{azi1:NaN,s12:NaN}:(x=b*(s*s-s*(1-n)*(s*(1-n)))/(s*(1-n)*(s*(1-n))),S=1+x/16384*(4096+x*(x*(320-175*x)-768)),E=x/1024*(256+x*(x*(74-47*x)-128)),P=E*g*(M+E/4*(_*(2*M*M-1)-E/6*M*(4*g*g-3)*(4*M*M-3))),A=s*(1-n)*S*(y-P),{azi1:Math.atan2(d*m,c*u-l*d*f),s12:A})}(this.lat0,this.long0,p,d,this.a,this.f),u=c.azi1,t.x=c.s12*Math.sin(u),t.y=c.s12*Math.cos(u),t))},inverse:function(t){var e,a,i,s,n,r,o,h,l,c,u,d,p,m,f;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Qa*this.a)return;return a=e/this.a,i=Math.sin(a),s=Math.cos(a),n=this.long0,Math.abs(e)<=ti?r=this.lat0:(r=vn(s*this.sin_p12+t.y*i*this.cos_p12/e),o=Math.abs(this.lat0)-Qa,n=Math.abs(o)<=ti?this.lat0>=0?Bi(this.long0+Math.atan2(t.x,-t.y)):Bi(this.long0-Math.atan2(-t.x,t.y)):Bi(this.long0+Math.atan2(t.x*i,e*this.cos_p12*s-t.y*this.sin_p12*i))),t.x=n,t.y=r,t}return h=dn(this.es),l=pn(this.es),c=mn(this.es),u=fn(this.es),Math.abs(this.sin_p12-1)<=ti?(r=yn(((d=this.a*un(h,l,c,u,Qa))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,l,c,u),n=Bi(this.long0+Math.atan2(t.x,-1*t.y)),t.x=n,t.y=r,t):Math.abs(this.sin_p12+1)<=ti?(d=this.a*un(h,l,c,u,Qa),r=yn(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,h,l,c,u),n=Bi(this.long0+Math.atan2(t.x,t.y)),t.x=n,t.y=r,t):(p=Math.atan2(t.x,t.y),m=Math.sqrt(t.x*t.x+t.y*t.y),f=function(t,e,a,i,s,n){const r=Math.atan((1-n)*Math.tan(t)),o=Math.sin(r),h=Math.cos(r),l=Math.sin(a),c=Math.cos(a),u=Math.atan2(o,h*c),d=h*l,p=1-d*d,m=p*(s*s-s*(1-n)*(s*(1-n)))/(s*(1-n)*(s*(1-n))),f=1+m/16384*(4096+m*(m*(320-175*m)-768)),g=m/1024*(256+m*(m*(74-47*m)-128));let _,y,w,b,M,v=i/(s*(1-n)*f),x=100;do{y=Math.cos(2*u+v),w=Math.sin(v),b=Math.cos(v),M=g*w*(y+g/4*(b*(2*y*y-1)-g/6*y*(4*w*w-3)*(4*y*y-3))),_=v,v=i/(s*(1-n)*f)+M}while(Math.abs(v-_)>1e-12&&--x>0);if(0===x)return{lat2:NaN,lon2:NaN};const S=o*w-h*b*c,E=n/16*p*(4+n*(4-3*p));return{lat2:Math.atan2(o*b+h*w*c,(1-n)*Math.sqrt(d*d+S*S)),lon2:e+(Math.atan2(w*l,h*b-o*w*c)-(1-E)*n*d*(v+E*w*(y+E*b*(2*y*y-1))))}}(this.lat0,this.long0,p,m,this.a,this.f),t.x=f.lon2,t.y=f.lat2,t)},names:["Azimuthal_Equidistant","aeqd"]},Ln={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,a,i,s,n,r,o,h=t.x,l=t.y;return i=Bi(h-this.long0),e=Math.sin(l),a=Math.cos(l),s=Math.cos(i),((n=this.sin_p14*e+this.cos_p14*a*s)>0||Math.abs(n)<=ti)&&(r=1*this.a*a*Math.sin(i),o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*a*s)),t.x=r,t.y=o,t},inverse:function(t){var e,a,i,s,n,r,o;return t.x-=this.x0,t.y-=this.y0,a=vn((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(a),s=Math.cos(a),r=this.long0,Math.abs(e)<=ti?(o=this.lat0,t.x=r,t.y=o,t):(o=vn(s*this.sin_p14+t.y*i*this.cos_p14/e),n=Math.abs(this.lat0)-Qa,Math.abs(n)<=ti?(r=this.lat0>=0?Bi(this.long0+Math.atan2(t.x,-t.y)):Bi(this.long0-Math.atan2(-t.x,t.y)),t.x=r,t.y=o,t):(r=Bi(this.long0+Math.atan2(t.x*i,e*this.cos_p14*s-t.y*this.sin_p14*i)),t.x=r,t.y=o,t))},names:["ortho"]};function Rn(t,e,a,i){var s;return t<ti?(i.value=1,s=0):(s=Math.atan2(e,a),Math.abs(s)<=ii?i.value=1:s>ii&&s<=Qa+ii?(i.value=2,s-=Qa):s>Qa+ii||s<=-(Qa+ii)?(i.value=3,s=s>=0?s-ni:s+ni):(i.value=4,s+=Qa)),s}function Dn(t,e){var a=t+e;return a<-ni?a+=si:a>+ni&&(a-=si),a}const zn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Qa-ii/2?this.face=5:this.lat0<=-(Qa-ii/2)?this.face=6:Math.abs(this.long0)<=ii?this.face=1:Math.abs(this.long0)<=Qa+ii?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,a,i,s,n,r,o={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,a=t.x,5===this.face)s=Qa-e,a>=ii&&a<=Qa+ii?(h.value=1,i=a-Qa):a>Qa+ii||a<=-(Qa+ii)?(h.value=2,i=a>0?a-ni:a+ni):a>-(Qa+ii)&&a<=-ii?(h.value=3,i=a+Qa):(h.value=4,i=a);else if(6===this.face)s=Qa+e,a>=ii&&a<=Qa+ii?(h.value=1,i=-a+Qa):a<ii&&a>=-ii?(h.value=2,i=-a):a<-ii&&a>=-(Qa+ii)?(h.value=3,i=-a-Qa):(h.value=4,i=a>0?-a+ni:-a-ni);else{var l,c,u,d,p,m;2===this.face?a=Dn(a,+Qa):3===this.face?a=Dn(a,+ni):4===this.face&&(a=Dn(a,-Qa)),d=Math.sin(e),p=Math.cos(e),m=Math.sin(a),l=p*Math.cos(a),c=p*m,u=d,1===this.face?i=Rn(s=Math.acos(l),u,c,h):2===this.face?i=Rn(s=Math.acos(c),u,-l,h):3===this.face?i=Rn(s=Math.acos(-l),u,-c,h):4===this.face?i=Rn(s=Math.acos(-c),u,l,h):(s=i=0,h.value=1)}return r=Math.atan(12/ni*(i+Math.acos(Math.sin(i)*Math.cos(ii))-Qa)),n=Math.sqrt((1-Math.cos(s))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(i))))),2===h.value?r+=Qa:3===h.value?r+=ni:4===h.value&&(r+=1.5*ni),o.x=n*Math.cos(r),o.y=n*Math.sin(r),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,t.x=o.x,t.y=o.y,t},inverse:function(t){var e,a,i,s,n,r,o,h,l,c,u,d,p={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=2,e-=Qa):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=3,e=e<0?e+ni:e-ni):(m.value=4,e+=Qa),l=ni/12*Math.tan(e),n=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),r=Math.atan(n),(o=1-(i=Math.cos(e))*i*(s=Math.tan(a))*s*(1-Math.cos(Math.atan(1/Math.cos(r)))))<-1?o=-1:o>1&&(o=1),5===this.face)h=Math.acos(o),p.phi=Qa-h,1===m.value?p.lam=r+Qa:2===m.value?p.lam=r<0?r+ni:r-ni:3===m.value?p.lam=r-Qa:p.lam=r;else if(6===this.face)h=Math.acos(o),p.phi=h-Qa,1===m.value?p.lam=-r+Qa:2===m.value?p.lam=-r:3===m.value?p.lam=-r-Qa:p.lam=r<0?-r-ni:-r+ni;else{var f,g,_;l=(f=o)*f,g=(l+=(_=l>=1?0:Math.sqrt(1-l)*Math.sin(r))*_)>=1?0:Math.sqrt(1-l),2===m.value?(l=g,g=-_,_=l):3===m.value?(g=-g,_=-_):4===m.value&&(l=g,g=_,_=-l),2===this.face?(l=f,f=-g,g=l):3===this.face?(f=-f,g=-g):4===this.face&&(l=f,f=g,g=-l),p.phi=Math.acos(-_)-Qa,p.lam=Math.atan2(g,f),2===this.face?p.lam=Dn(p.lam,-Qa):3===this.face?p.lam=Dn(p.lam,-ni):4===this.face&&(p.lam=Dn(p.lam,+Qa))}return 0!==this.es&&(c=p.phi<0?1:0,u=Math.tan(p.phi),d=this.b/Math.sqrt(u*u+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Bn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Fn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Un=.8487,jn=1.3523,qn=ai/5,Zn=1/qn,Hn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const Wn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Bi(t.x-this.long0),a=Math.abs(t.y),i=Math.floor(a*qn);i<0?i=0:i>=18&&(i=17);var s={x:Hn(Bn[i],a=ai*(a-Zn*i))*e,y:Hn(Fn[i],a)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*Un+this.x0,s.y=s.y*this.a*jn+this.y0,s},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Un),y:Math.abs(t.y-this.y0)/(this.a*jn)};if(e.y>=1)e.x/=Bn[18][0],e.y=t.y<0?-Qa:Qa;else{var a=Math.floor(18*e.y);for(a<0?a=0:a>=18&&(a=17);;)if(Fn[a][0]>e.y)--a;else{if(!(Fn[a+1][0]<=e.y))break;++a}var i=Fn[a],s=5*(e.y-i[0])/(Fn[a+1][0]-i[0]);s=function(t,e,a,i){for(var s=e;i;--i){var n=t(s);if(s-=n,Math.abs(n)<1e-10)break}return s}(function(t){return(Hn(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)},s,0,100),e.x/=Hn(Bn[a],s),e.y=(5*a+s)*ei,t.y<0&&(e.y=-e.y)}return e.x=Bi(e.x+this.long0),e},names:["Robinson","robin"]},Vn={init:function(){this.name="geocent"},forward:function(t){return ds(t,this.es,this.a)},inverse:function(t){return ps(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var Xn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Kn={init:function(){if(Object.keys(Xn).forEach(function(t){if(void 0===this[t])this[t]=Xn[t].def;else{if(Xn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Xn[t].num&&(this[t]=parseFloat(this[t]))}Xn[t].degrees&&(this[t]=this[t]*ei)}.bind(this)),Math.abs(Math.abs(this.lat0)-Qa)<ti?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<ti?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,a,i,s,n=Math.sin(t.y),r=Math.cos(t.y),o=Math.cos(t.x);switch(this.mode){case 3:a=this.sinph0*n+this.cosph0*r*o;break;case 2:a=r*o;break;case 1:a=-n;break;case 0:a=n}switch(e=(a=this.pn1/(this.p-a))*r*Math.sin(t.x),this.mode){case 3:a*=this.cosph0*n-this.sinph0*r*o;break;case 2:a*=n;break;case 0:a*=-r*o;break;case 1:a*=r*o}return s=1/((i=a*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-a*this.sg)*this.cw*s,a=i*s,t.x=e*this.a,t.y=a*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,a,i,s={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,a=this.pn1*t.y*this.cw*i,t.x=e*this.cg+a*this.sg,t.y=a*this.cg-e*this.sg;var n=Ks(t.x,t.y);if(Math.abs(n)<ti)s.x=0,s.y=t.y;else{var r,o;switch(o=1-n*n*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/n+n/this.pn1),r=Math.sqrt(1-o*o),this.mode){case 3:s.y=Math.asin(r*this.sinph0+t.y*o*this.cosph0/n),t.y=(r-this.sinph0*Math.sin(s.y))*n,t.x*=o*this.cosph0;break;case 2:s.y=Math.asin(t.y*o/n),t.y=r*n,t.x*=o;break;case 0:s.y=Math.asin(r),t.y=-t.y;break;case 1:s.y=-Math.asin(r)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t},names:["Tilted_Perspective","tpers"]},$n={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,a,i,s,n=t.x,r=t.y;if(n-=this.long0,"ellipse"===this.shape){r=Math.atan(this.radius_p2*Math.tan(r));var o=this.radius_p/Ks(this.radius_p*Math.cos(r),Math.sin(r));if(a=o*Math.cos(n)*Math.cos(r),i=o*Math.sin(n)*Math.cos(r),s=o*Math.sin(r),(this.radius_g-a)*a-i*i-s*s*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-a,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Ks(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(s/Ks(i,e)))}else"sphere"===this.shape&&(e=Math.cos(r),a=Math.cos(n)*e,i=Math.sin(n)*e,s=Math.sin(r),e=this.radius_g-a,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Ks(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(s/Ks(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,a,i,s,n=-1,r=0,o=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Ks(1,o)):(r=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Ks(1,r));var h=o/this.radius_p;if(e=r*r+h*h+n*n,(i=(a=2*this.radius_g*n)*a-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-a-Math.sqrt(i))/(2*e),n=this.radius_g+s*n,r*=s,o*=s,t.x=Math.atan2(r,n),t.y=Math.atan(o*Math.cos(t.x)/n),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+o*o)):(r=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),e=r*r+o*o+n*n,(i=(a=2*this.radius_g*n)*a-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-a-Math.sqrt(i))/(2*e),n=this.radius_g+s*n,r*=s,o*=s,t.x=Math.atan2(r,n),t.y=Math.atan(o*Math.cos(t.x)/n)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var Yn=1.340264,Jn=-.081106,Qn=893e-6,tr=.003796,er=Math.sqrt(3)/2;const ar={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=Bi(t.x-this.long0),a=t.y,i=Math.asin(er*Math.sin(a)),s=i*i,n=s*s*s;return t.x=e*Math.cos(i)/(er*(Yn+3*Jn*s+n*(7*Qn+9*tr*s))),t.y=i*(Yn+Jn*s+n*(Qn+tr*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,a,i,s,n=t.y;for(s=0;s<12&&(n-=i=(n*(Yn+Jn*(e=n*n)+(a=e*e*e)*(Qn+tr*e))-t.y)/(Yn+3*Jn*e+a*(7*Qn+9*tr*e)),!(Math.abs(i)<1e-9));++s);return a=(e=n*n)*e*e,t.x=er*t.x*(Yn+3*Jn*e+a*(7*Qn+9*tr*e))/Math.cos(n),t.y=Math.asin(Math.sin(n)/er),t.x=Bi(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]};var ir=1e-10;function sr(t){var e,a,i,s=Bi(t.x-(this.long0||0)),n=t.y;return e=this.am1+this.m1-Hs(n,a=Math.sin(n),i=Math.cos(n),this.en),a=i*s/(e*Math.sqrt(1-this.es*a*a)),t.x=e*Math.sin(a),t.y=this.am1-e*Math.cos(a),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function nr(t){var e,a,i,s;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,a=Ks(t.x,t.y=this.am1-t.y),s=Ws(this.am1+this.m1-a,this.es,this.en),(e=Math.abs(s))<Qa)e=Math.sin(s),i=a*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(s);else{if(!(Math.abs(e-Qa)<=ir))throw new Error;i=0}return t.x=Bi(i+(this.long0||0)),t.y=_n(s),t}function rr(t){var e,a,i=Bi(t.x-(this.long0||0)),s=t.y;return a=this.cphi1+this.phi1-s,Math.abs(a)>ir?(t.x=a*Math.sin(e=i*Math.cos(s)/a),t.y=this.cphi1-a*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function or(t){var e,a;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var i=Ks(t.x,t.y=this.cphi1-t.y);if(a=this.cphi1+this.phi1-i,Math.abs(a)>Qa)throw new Error;return e=Math.abs(Math.abs(a)-Qa)<=ir?0:i*Math.atan2(t.x,t.y)/Math.cos(a),t.x=Bi(e+(this.long0||0)),t.y=_n(a),t}const hr={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<ir)throw new Error;this.es?(this.en=Zs(this.es),this.m1=Hs(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=nr,this.forward=sr):(Math.abs(this.phi1)+ir>=Qa?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=or,this.forward=rr)},names:["bonne","Bonne (Werner lat_1=90)"]},lr=Object.assign(function(t,e,a){var i,s,n,r=!1;return void 0===e?(s=Ss(t),i=vs,r=!0):(void 0!==e.x||Array.isArray(e))&&(a=e,s=Ss(t),i=vs,r=!0),i||(i=Ss(t)),s||(s=Ss(e)),a?xs(i,s,a):(n={forward:function(t,e){return xs(i,s,t,e)},inverse:function(t,e){return xs(s,i,t,e)}},r&&(n.oProj=s),n)},{defaultDatum:"WGS84",Proj:us,WGS84:new us("WGS84"),Point:Fs,toPoint:ws,defs:Oi,nadgrid:function(t,e,a){return e instanceof ArrayBuffer?function(t,e,a){var i=!0;void 0!==a&&!1===a.includeErrorFields&&(i=!1);var s=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(s),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:rs(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(s,n),o=function(t,e,a,i){for(var s=176,n=[],r=0;r<e.nSubgrids;r++){var o=hs(t,s,a),h=ls(t,s,o,a,i),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[ns(o.lowerLongitude),ns(o.lowerLatitude)],del:[ns(o.longitudeInterval),ns(o.latitudeInterval)],lim:[l,c],count:o.gridNodeCount,cvs:os(h)});var u=16;!1===i&&(u=8),s+=176+o.gridNodeCount*u}return n}(s,r,n,i),h={header:r,subgrids:o};return es[t]=h,h}(t,e,a):{ready:as(t,e)}},transform:Ms,mgrs:Cs,version:"__VERSION__"});var cr;(cr=lr).Proj.projections.add(Vs),cr.Proj.projections.add(Js),cr.Proj.projections.add(Qs),cr.Proj.projections.add(an),cr.Proj.projections.add(nn),cr.Proj.projections.add(rn),cr.Proj.projections.add(hn),cr.Proj.projections.add(ln),cr.Proj.projections.add(cn),cr.Proj.projections.add(wn),cr.Proj.projections.add(Mn),cr.Proj.projections.add(xn),cr.Proj.projections.add(Sn),cr.Proj.projections.add(En),cr.Proj.projections.add(Pn),cr.Proj.projections.add(An),cr.Proj.projections.add(kn),cr.Proj.projections.add(Gn),cr.Proj.projections.add(Cn),cr.Proj.projections.add(In),cr.Proj.projections.add(Tn),cr.Proj.projections.add(Nn),cr.Proj.projections.add(On),cr.Proj.projections.add(Ln),cr.Proj.projections.add(zn),cr.Proj.projections.add(Wn),cr.Proj.projections.add(Vn),cr.Proj.projections.add(Kn),cr.Proj.projections.add($n),cr.Proj.projections.add(ar),cr.Proj.projections.add(hr);const ur=lr,dr="+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",pr=[51.55802,4.93596],mr=L.latLng(51.55166,4.93284),fr=L.latLng(51.56619,4.94022),gr={theme:"CartoDB.DarkMatter",lineOptions:{color:"#0CB1E8",weight:1,opacity:.5,smoothFactor:1,overrideExisting:!0,detectColors:!0},markerOptions:{color:"#00FF00",weight:3,radius:5,opacity:.5}};class _r{constructor(t){this.options=t||gr,this.tracks=[],this.filters={minDate:null,maxDate:null},this.imageMarkers=[],this.map=L.map("background-map",{center:pr,zoom:14,preferCanvas:!0}),this.gridLayer=L.layerGroup().addTo(this.map),yr(this.map,mr,fr,250,this.gridLayer),this.map.on("moveend zoomend",()=>{yr(this.map,mr,fr,250,this.gridLayer)}),this.toLocalBaseline=function(t,e){const a=ur(dr,[t.lng,t.lat]),i=ur(dr,[e.lng,e.lat]),s=i[0]-a[0],n=i[1]-a[1],r=Math.hypot(s,n),o=s/r,h=n/r,l=-h,c=o;return function(t){const e=ur(dr,[t.lng,t.lat]),i=e[0]-a[0],s=e[1]-a[1];return[i*o+s*h,i*l+s*c]}}(mr,fr),L.control.scale({imperial:!1,metric:!0,maxWidth:200,position:"bottomleft"}).addTo(this.map),L.control.ruler({position:"topleft",circleMarker:{color:"red",radius:2},lineStyle:{color:"red",dashArray:"1,6"},lengthUnit:{display:"meters",decimal:0,factor:1e3,label:"m"},angleUnit:{display:"&deg;",decimal:0,factor:null,label:"Bearing:"}}).addTo(this.map),L.easyButton({type:"animate",states:[{icon:"fa-camera fa-lg",stateName:"default",title:"Export as png",onClick:()=>{const t=function(){let t=y()({content:Va.exportImage,overlayStyles:t=>{t.opacity=.01}});return t.show(),t}();t.afterClose(()=>t.destroy()),t.show(),document.getElementById("render-export").addEventListener("click",t=>{t.preventDefault();let e=document.getElementById("export-output");e.innerHTML='Rendering <i class="fa fa-cog fa-spin"></i>';let a=document.getElementById("export-settings").elements;this.screenshot(a.format.value,e)},{once:!0})}}]}).addTo(this.map),L.easyButton({type:"animate",states:[{icon:"fa-sliders fa-lg",stateName:"default",title:"Open settings dialog",onClick:()=>{const t=function(t,e,a){let i=e.lineOptions.overrideExisting?"checked":"";t.length>0&&(t.every(({line:e})=>e.options.color===t[0].line.options.color)?e.lineOptions.color=t[0].line.options.color:i=!1);let s=e.lineOptions.detectColors?"checked":"",n=`\n<h3>Options</h3>\n\n<form id="settings">\n    <span class="form-row">\n        <label>Theme</label>\n        <select name="theme">\n            ${Wa.map(t=>`<option ${t===e.theme?"selected":""} value="${t}">${t}</option>`)}\n        </select>\n    </span>\n\n    <fieldset class="form-group">\n        <legend>GPS Track Options</legend>\n\n        <div class="row">\n            <label>Color</label>\n            <input name="color" type="color" value=${e.lineOptions.color}>\n        </div>\n\n        <div class="row">\n            <label>Opacity</label>\n            <input name="opacity" type="range" min=0 max=1 step=0.01\n                value=${e.lineOptions.opacity}>\n        </div>\n\n        <div class="row">\n            <label>Width</label>\n            <input name="weight" type="number" min=1 max=100\n                value=${e.lineOptions.weight}>\n        </div>\n\n    </fieldset>\n\n    <fieldset class="form-group">\n        <legend>Image Marker Options</legend>\n\n        <div class="row">\n            <label>Color</label>\n            <input name="markerColor" type="color" value=${e.markerOptions.color}>\n        </div>\n\n        <div class="row">\n            <label>Opacity</label>\n            <input name="markerOpacity" type="range" min=0 max=1 step=0.01\n                value=${e.markerOptions.opacity}>\n        </div>\n\n        <div class="row">\n            <label>Width</label>\n            <input name="markerWeight" type="number" min=1 max=100\n                value=${e.markerOptions.weight}>\n        </div>\n\n        <div class="row">\n            <label>Radius</label>\n            <input name="markerRadius" type="number" min=1 max=100\n                value=${e.markerOptions.radius}>\n        </div>\n\n    </fieldset>\n\n    <span class="form-row">\n        <label>Override existing tracks</label>\n        <input name="overrideExisting" type="checkbox" ${i}>\n    </span>\n\n    <span class="form-row">\n        <label>Detect color from Strava bulk export</label>\n        <input name="detectColors" type="checkbox" ${s}>\n    </span>\n</form>`,r=y()({content:n,closeButton:!0,escCloses:!0,overlayClose:!0,overlayStyles:t=>{t.opacity=.1}}),o=()=>{let t=document.getElementById("settings").elements,i=Object.assign({},e);for(let e of["theme"])i[e]=t[e].value;for(let e of["color","weight","opacity"])i.lineOptions[e]=t[e].value;for(let e of["markerColor","markerWeight","markerOpacity","markerRadius"]){let a=e.replace("marker","").toLowerCase();i.markerOptions[a]=t[e].value}for(let e of["overrideExisting","detectColors"])i.lineOptions[e]=t[e].checked;a(i)};return r.afterClose(t=>{o(),t.destroy()}),r.afterCreate(()=>{let t=document.getElementById("settings").elements;for(let e of["theme","color","weight","opacity","markerColor","markerWeight","markerOpacity","markerRadius"])t[e].addEventListener("change",o)}),r}(this.tracks,this.options,t=>{this.updateOptions(t),this.saveOptions(t)});t.show()}}]}).addTo(this.map),L.easyButton({type:"animate",states:[{icon:"fa-filter fa-lg",stateName:"default",title:"Filter displayed tracks",onClick:()=>{const t=function(t,e,a){let i=(new Date).toISOString().split("T")[0],s=`\n<h3>Filter Displayed Tracks</h3>\n\n<form id="settings">\n    <span class="form-row">\n        <label for="minDate">Start date:</label>\n        <input type="date" id="minDate" name="minDate"\n            value="${e.minDate||""}"\n            min="1990-01-01"\n            max="${i}">\n    </span>\n\n    <span class="form-row">\n        <label for="maxDate">End date:</label>\n        <input type="date" id="maxDate" name="maxDate"\n            value="${e.maxDate||""}"\n            min="1990-01-01"\n            max="${i}">\n    </span>\n</form>`,n=y()({content:s,closeButton:!0,escCloses:!0,overlayClose:!0,overlayStyles:t=>{t.opacity=.1}});return n.afterClose(t=>{let e=document.getElementById("settings").elements,i=Object.assign({},i);for(let t of["minDate","maxDate"])i[t]=e[t].value;a(i),t.destroy()}),n}(this.tracks,this.filters,t=>{this.filters=t,this.applyFilters()});t.show()}}]}).addTo(this.map),L.easyButton("fa-th fa-lg",()=>{this.map.hasLayer(this.gridLayer)?this.map.removeLayer(this.gridLayer):this.map.addLayer(this.gridLayer)},"Toggle 250m grid").addTo(this.map),this.viewAll=L.easyButton({type:"animate",states:[{icon:"fa-map fa-lg",stateName:"default",title:"Zoom to all tracks",onClick:()=>{this.center()}}]}).addTo(this.map),this.markScrolled=()=>{this.map.removeEventListener("movestart",this.markScrolled),this.scrolled=!0},this.clearScroll(),this.viewAll.disable(),this.switchTheme(this.options.theme),this.requestBrowserLocation()}clearScroll(){this.scrolled=!1,this.map.addEventListener("movestart",this.markScrolled)}switchTheme(t){this.mapTiles&&this.mapTiles.removeFrom(this.map),"No map"!==t&&(this.mapTiles=L.tileLayer.provider(t),this.mapTiles.addTo(this.map,{detectRetina:!0}))}saveOptions(t){window.localStorage.setItem("options",JSON.stringify(t))}restoreSavedOptions(){if(null===window.localStorage.getItem("options"))return;let t=window.localStorage.getItem("options");t=JSON.parse(t),"object"==typeof t&&this.updateOptions(t)}updateOptions(t){if(t.theme!==this.options.theme&&this.switchTheme(t.theme),t.lineOptions.overrideExisting){this.tracks.forEach(({line:e})=>{e.setStyle({color:t.lineOptions.color,weight:t.lineOptions.weight,opacity:t.lineOptions.opacity}),e.redraw()});let e=t.markerOptions;this.imageMarkers.forEach(t=>{t.setStyle({color:e.color,weight:e.weight,opacity:e.opacity,radius:e.radius}),t.redraw()})}this.options=t}applyFilters(){const t=new Date(this.filters.minDate||"1900/01/01"),e=new Date(this.filters.maxDate||"2500/01/01"),a=[e=>e.timestamp&&t>e.timestamp,t=>t.timestamp&&e<t.timestamp];for(let t of this.tracks){let e=a.some(e=>e(t));e&&t.visible?t.line.remove():e||t.visible||t.line.addTo(this.map),t.visible=!e}}requestBrowserLocation(){navigator.geolocation.getCurrentPosition(t=>{this.scrolled||0!==this.tracks.length||(this.map.panTo([t.coords.latitude,t.coords.longitude],{noMoveStart:!0,animate:!1}),this.clearScroll())})}addTrack(t){this.viewAll.enable();let e=Object.assign({},this.options.lineOptions);const a=function(t,e){if(!t||0===t.length)return 0;let a=0;for(const i of t){const[,t]=e(L.latLng(i));Math.abs(t)>a&&(a=Math.abs(t))}return a}(t.points,this.toLocalBaseline)??0;a>700?(e.color="#ff3b3b",e.weight=Math.max(e.weight,2)):e.detectColors&&(/-(Hike|Walk)\.gpx/.test(t.filename)?e.color="#ffc0cb":/-Run\.gpx/.test(t.filename)?e.color="#ff0000":/-Ride\.gpx/.test(t.filename)&&(e.color="#00ffff"));const i=L.polyline(t.points,e).addTo(this.map),s=`\n  <div style="font-family:sans-serif; font-size:13px;">\n    <dl style="margin:0; display:grid; grid-template-columns:auto 1fr; gap:2px 8px;">\n      <dt style="font-weight:bold;">#</dt><dd>${t.numFlight??"-"}</dd>\n      <dt style="font-weight:bold;">Callsign</dt><dd>${t.callsign??"-"}</dd>\n      <dt style="font-weight:bold;">Type</dt><dd>${t.gliderType??"-"}</dd>\n      <dt style="font-weight:bold;">Registratie</dt><dd>${t.registration??"-"}</dd>\n      <dt style="font-weight:bold;">Afstand tot het veld</dt><dd>${a.toFixed(0)} m</dd>\n    </dl>\n  </div>\n`;i.bindPopup(s),i.on("popupopen",()=>{this.tracks.forEach(t=>{t.line!==i&&this.map.removeLayer(t.line)})}),i.on("popupclose",()=>{this.tracks.forEach(t=>{this.map.hasLayer(t.line)||t.line.addTo(this.map)})}),this.tracks.push(Object.assign({line:i,visible:!0},t)),console.info("track",t.filename,{maxOffsetMeters:a,baselineLen:this.baselineLenM})}async markerClick(t){const e=await t.latitude(),a=await t.longitude(),i=await t.getImageData();let s=L.latLng(e,a);L.popup({minWidth:512}).setLatLng(s).setContent(`<img src="${i}" width="512" height="100%">`).addTo(this.map)}async addImage(t){const e=await t.latitude(),a=await t.longitude();let i=L.latLng(e,a),s=Object.assign({},this.options.markerOptions),n=L.circleMarker(i,s).on("click",()=>{this.markerClick(t)}).addTo(this.map);this.imageMarkers.push(n)}recenter(){this.scrolled||this.center()}center(){if(0===this.tracks.length&&0===this.imageMarkers.length)return;let t=this.tracks.map(t=>t.line).concat(this.imageMarkers);this.map.fitBounds(new L.featureGroup(t).getBounds(),{noMoveStart:!0,animate:!1,padding:[50,20]}),this.scrolled||this.clearScroll()}screenshot(t,e){g()(this.map,(a,i)=>{if(a)return window.alert(a);let s=document.createElement("a");if("png"===t)s.download="igc-analyzer-export.png",s.innerText="Download as PNG",i.toBlob(t=>{s.href=URL.createObjectURL(t),e.innerText="",e.appendChild(s)});else if("svg"===t){s.innerText="Download as SVG";const t=2,a=this.map.getPixelBounds();a.min=a.min.multiplyBy(t),a.max=a.max.multiplyBy(t);const i=a.min.x,n=a.min.y,r=a.getSize().x,o=a.getSize().y;let h=L.SVG.create("svg"),l=L.SVG.create("g");h.setAttribute("viewBox",`${i} ${n} ${r} ${o}`),this.tracks.forEach(e=>{let i=e.points.map(e=>this.map.project(e).multiplyBy(10*t).round().divideBy(10)).reduce((t,e)=>(0!==t.length&&t[t.length-1].x===e.x&&t[t.length-1].y===e.y||t.push(e),t),[]);if(!i.some(t=>a.contains(t)))return;let s=L.SVG.pointsToPath([i],!1),n=L.SVG.create("path");n.setAttribute("stroke",e.line.options.color),n.setAttribute("stroke-opacity",e.line.options.opacity),n.setAttribute("stroke-width",t*e.line.options.weight),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("fill","none"),n.setAttribute("d",s),l.appendChild(n)}),h.appendChild(l);let c=(new XMLSerializer).serializeToString(h);s.download="igc-analyzer-export.svg";let u=new Blob([c],{type:"application/octet-stream"});s.href=URL.createObjectURL(u),e.innerText="",e.appendChild(s)}})}}function yr(t,e,a,i=250,s){const n=L.CRS.EPSG3857,r=s||L.layerGroup().addTo(t);r.clearLayers();const o=n.project(L.latLng(e)),h=n.project(L.latLng(a)),l=(e.lat+a.lat)/2,c=i*(1/Math.cos(l*Math.PI/180)),u=1.5*c,d=h.x-o.x,p=h.y-o.y,m=Math.atan2(p,d),f=Math.cos(m),g=Math.sin(m),_=t=>{const e=t.x-o.x,a=t.y-o.y;return{x:f*e+g*a,y:-g*e+f*a}},y=t=>({x:o.x+(f*t.x-g*t.y),y:o.y+(g*t.x+f*t.y)}),w=t.getBounds(),b=n.project(w.getNorthWest()),M=n.project(w.getSouthEast()),v={x:Math.min(b.x,M.x)-u,y:Math.min(b.y,M.y)-u},x={x:Math.max(b.x,M.x)+u,y:Math.max(b.y,M.y)+u},S=_(v),E=_(x),P=Math.min(S.x,E.x),A=Math.max(S.x,E.x),k=Math.min(S.y,E.y),G=Math.max(S.y,E.y),C=Math.floor(P/c)*c,I=Math.ceil(A/c)*c,T=Math.floor(k/c)*c,N=Math.ceil(G/c)*c,O={color:"#ffffff",opacity:.25,weight:1,interactive:!1};for(let t=C;t<=I;t+=c){const e=y({x:t,y:T}),a=y({x:t,y:N});L.polyline([n.unproject(e),n.unproject(a)],O).addTo(r)}for(let t=T;t<=N;t+=c){const e=y({x:C,y:t}),a=y({x:I,y:t});L.polyline([n.unproject(e),n.unproject(a)],O).addTo(r)}L.polyline([e,a],{color:"#ffcc00",weight:2,opacity:.9,dashArray:"6 4",interactive:!1}).addTo(r)}HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value(t,e,a){let i=atob(this.toDataURL(e,a).split(",")[1]),s=i.length,n=new Uint8Array(s);for(var r=0;r<s;r++)n[r]=i.charCodeAt(r);t(new Blob([n],{type:e||"image/png"}))}}),document.addEventListener("DOMContentLoaded",function(){let t=new _r;t.restoreSavedOptions(),function(t){window.addEventListener("dragover",Ka,!1),window.addEventListener("drop",e=>{Xa(t,e)},!1)}(t)})})()})();
//# sourceMappingURL=bundle.js.map